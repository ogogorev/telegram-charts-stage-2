/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./data/chart1.json":
/*!**************************!*\
  !*** ./data/chart1.json ***!
  \**************************/
/*! exports provided: columns, types, names, colors, default */
/***/ (function(module) {

module.exports = {"columns":[["x",1523059200000,1523145600000,1523232000000,1523318400000,1523404800000,1523491200000,1523577600000,1523664000000,1523750400000,1523836800000,1523923200000,1524009600000,1524096000000,1524182400000,1524268800000,1524355200000,1524441600000,1524528000000,1524614400000,1524700800000,1524787200000,1524873600000,1524960000000,1525046400000,1525132800000,1525219200000,1525305600000,1525392000000,1525478400000,1525564800000,1525651200000,1525737600000,1525824000000,1525910400000,1525996800000,1526083200000,1526169600000,1526256000000,1526342400000,1526428800000,1526515200000,1526601600000,1526688000000,1526774400000,1526860800000,1526947200000,1527033600000,1527120000000,1527206400000,1527292800000,1527379200000,1527465600000,1527552000000,1527638400000,1527724800000,1527811200000,1527897600000,1527984000000,1528070400000,1528156800000,1528243200000,1528329600000,1528416000000,1528502400000,1528588800000,1528675200000,1528761600000,1528848000000,1528934400000,1529020800000,1529107200000,1529193600000,1529280000000,1529366400000,1529452800000,1529539200000,1529625600000,1529712000000,1529798400000,1529884800000,1529971200000,1530057600000,1530144000000,1530230400000,1530316800000,1530403200000,1530489600000,1530576000000,1530662400000,1530748800000,1530835200000,1530921600000,1531008000000,1531094400000,1531180800000,1531267200000,1531353600000,1531440000000,1531526400000,1531612800000,1531699200000,1531785600000,1531872000000,1531958400000,1532044800000,1532131200000,1532217600000,1532304000000,1532390400000,1532476800000,1532563200000,1532649600000,1532736000000,1532822400000,1532908800000,1532995200000,1533081600000,1533168000000,1533254400000,1533340800000,1533427200000,1533513600000,1533600000000,1533686400000,1533772800000,1533859200000,1533945600000,1534032000000,1534118400000,1534204800000,1534291200000,1534377600000,1534464000000,1534550400000,1534636800000,1534723200000,1534809600000,1534896000000,1534982400000,1535068800000,1535155200000,1535241600000,1535328000000,1535414400000,1535500800000,1535587200000,1535673600000,1535760000000,1535846400000,1535932800000,1536019200000,1536105600000,1536192000000,1536278400000,1536364800000,1536451200000,1536537600000,1536624000000,1536710400000,1536796800000,1536883200000,1536969600000,1537056000000,1537142400000,1537228800000,1537315200000,1537401600000,1537488000000,1537574400000,1537660800000,1537747200000,1537833600000,1537920000000,1538006400000,1538092800000,1538179200000,1538265600000,1538352000000,1538438400000,1538524800000,1538611200000,1538697600000,1538784000000,1538870400000,1538956800000,1539043200000,1539129600000,1539216000000,1539302400000,1539388800000,1539475200000,1539561600000,1539648000000,1539734400000,1539820800000,1539907200000,1539993600000,1540080000000,1540166400000,1540252800000,1540339200000,1540425600000,1540512000000,1540598400000,1540684800000,1540771200000,1540857600000,1540944000000,1541030400000,1541116800000,1541203200000,1541289600000,1541376000000,1541462400000,1541548800000,1541635200000,1541721600000,1541808000000,1541894400000,1541980800000,1542067200000,1542153600000,1542240000000,1542326400000,1542412800000,1542499200000,1542585600000,1542672000000,1542758400000,1542844800000,1542931200000,1543017600000,1543104000000,1543190400000,1543276800000,1543363200000,1543449600000,1543536000000,1543622400000,1543708800000,1543795200000,1543881600000,1543968000000,1544054400000,1544140800000,1544227200000,1544313600000,1544400000000,1544486400000,1544572800000,1544659200000,1544745600000,1544832000000,1544918400000,1545004800000,1545091200000,1545177600000,1545264000000,1545350400000,1545436800000,1545523200000,1545609600000,1545696000000,1545782400000,1545868800000,1545955200000,1546041600000,1546128000000,1546214400000,1546300800000,1546387200000,1546473600000,1546560000000,1546646400000,1546732800000,1546819200000,1546905600000,1546992000000,1547078400000,1547164800000,1547251200000,1547337600000,1547424000000,1547510400000,1547596800000,1547683200000,1547769600000,1547856000000,1547942400000,1548028800000,1548115200000,1548201600000,1548288000000,1548374400000,1548460800000,1548547200000,1548633600000,1548720000000,1548806400000,1548892800000,1548979200000,1549065600000,1549152000000,1549238400000,1549324800000,1549411200000,1549497600000,1549584000000,1549670400000,1549756800000,1549843200000,1549929600000,1550016000000,1550102400000,1550188800000,1550275200000,1550361600000,1550448000000,1550534400000,1550620800000,1550707200000,1550793600000,1550880000000,1550966400000,1551052800000,1551139200000,1551225600000,1551312000000,1551398400000,1551484800000,1551571200000,1551657600000,1551744000000,1551830400000,1551916800000,1552003200000,1552089600000,1552176000000,1552262400000,1552348800000,1552435200000,1552521600000,1552608000000,1552694400000,1552780800000,1552867200000,1552953600000,1553040000000,1553126400000,1553212800000,1553299200000,1553385600000,1553472000000,1553558400000,1553644800000,1553731200000,1553817600000,1553904000000,1553990400000,1554076800000,1554163200000,1554249600000,1554336000000,1554422400000,1554508800000],["y0",930,890,900,980,1120,1250,1220,1030,960,1390,1300,1200,1030,880,1820,1680,1190,1320,1790,1610,1210,1170,1300,1080,1320,1200,970,760,1230,1250,1040,1020,1300,1290,970,900,1050,1040,980,1070,1410,1080,1000,1100,1070,1010,940,1160,1110,990,1070,830,940,1070,1160,1040,1020,1120,1210,3030,2530,1660,1170,1240,1180,1000,1170,720,1010,1300,1020,1180,1080,960,1050,880,950,970,1360,1020,1280,1140,1150,1100,1100,1260,1280,1540,1360,1250,1060,1330,930,1060,940,1190,1320,1180,1050,1210,1370,1330,950,1270,1130,1300,1170,1530,1110,1380,1240,1390,1150,1230,1340,1160,1140,1380,1690,1460,1240,1610,1320,1360,1320,1460,1450,1330,1080,1720,1600,1250,1570,1530,1610,1860,1450,1560,1690,1560,1730,1600,2170,1540,1940,1430,1410,1840,1790,1850,1620,1520,2190,1870,1550,2080,1560,1720,2040,1810,1890,2000,1900,2270,2060,1890,1930,1590,2030,1890,1810,1620,1690,1310,1700,1530,1970,2080,1620,1510,1990,1720,1750,1870,1740,1620,1840,1980,1910,1790,2080,1820,1530,2140,2440,2130,2430,2180,2080,2190,2090,1910,2440,1940,2680,3310,2510,2200,3020,2550,2450,2800,2450,2780,3020,2680,2210,2550,3160,2870,2690,3140,2820,2850,2160,2540,3050,2720,2540,3000,2630,2660,2780,2350,2510,2980,2650,2770,2220,3000,2950,2450,2610,2270,2200,2200,2920,2600,2470,2180,2480,2400,2450,2970,2830,2740,2680,2750,2200,2720,2270,3100,3510,3400,2920,2240,2330,2660,3400,3240,2940,3300,3760,3270,3460,3340,2820,2300,2830,2690,2760,2570,2420,2730,2480,3000,3260,2920,2750,2660,3130,3480,2530,3140,2200,2970,2900,2510,2500,2660,2970,2810,3200,2640,2790,3360,2690,2750,2810,3090,3080,2490,2810,2570,2630,2370,3320,2610,2300,2670,2470,2680,3270,3580,3000,2670,2540,2740,2940,2800,3590,3000,3130,3030,2460,2400,2610,3240,4010,2880,2930,2890,3240,2600,3530,2850,3580,3480,3210,3150,2730,3240,2720,3210,3090,3310,2670,2750,2540,2600,2930,3400,3050,3480,2930],["y1",1060,990,1140,1090,1210,1160,1450,970,1400,1140,1230,1440,1660,1130,1390,1410,1110,1060,1100,1340,1140,1340,980,1390,1190,1350,1390,1230,1280,1250,1360,1470,1540,1170,1500,1330,1330,1190,1280,1370,1460,1160,1490,1300,1240,1370,1330,1360,1780,1470,1300,1390,1420,1450,1520,1270,1180,1270,1440,1470,1500,1440,1710,1460,1390,1510,1510,1730,1630,1440,1690,1480,1340,1550,1410,1470,1380,1550,1280,1550,1500,1350,1280,1270,1430,1330,1190,1380,1790,1610,1240,1520,1120,1250,1040,1370,1140,1650,1840,1320,1860,1490,1680,1920,1190,1410,1180,1510,1490,1950,1700,1060,1630,1410,1230,1340,1640,1620,1610,1780,1320,1430,1510,1410,1660,1610,1320,1420,1360,1330,1300,1370,1590,1380,1580,1250,1460,1740,2250,1820,1670,1590,1710,1630,1770,1410,2100,1640,1670,1560,1820,1580,1560,1680,1520,1660,1570,1790,1560,1850,1670,2050,1660,1690,2110,1900,2280,1680,1770,2250,1910,2190,2070,2160,1810,1890,2130,2470,2150,2320,2420,2510,2390,2340,2260,2250,2250,2560,2090,1620,2340,2410,2270,2470,2360,2520,2380,2690,2590,2600,3010,2970,2480,2680,2910,2960,3150,3290,2380,2860,3130,2680,2980,3030,2900,3570,3340,2970,2910,3130,3180,3370,3590,3380,3720,3670,3480,3470,3770,3400,3060,3080,3090,3380,3040,3080,3410,3620,3320,2890,3570,3260,3100,3450,3490,3070,2640,3360,3260,3030,3250,3690,2950,2910,3540,3140,3090,3350,2960,2930,2940,3280,3080,2750,3370,3740,2550,2340,3290,2800,2910,3160,3200,3640,2910,2930,2830,3230,3190,2930,3090,2530,2760,2990,2700,3130,3140,3020,2790,2820,3400,3360,3100,3470,2560,3030,3340,3240,3540,3310,3300,3040,2870,2960,3140,2960,3130,2910,3140,2380,3080,3100,2910,2700,3020,2590,2790,2880,3390,3190,3130,3320,2480,2850,3070,3030,2750,3190,3130,2960,3060,2810,2810,2980,3130,3150,2990,2310,2690,3070,3670,3530,2890,2510,2890,3090,2930,2850,3260,3720,2460,2610,3280,2860,3240,3420,2920,2280,2840,3030,3370,2650,3200,3190,2590]],"types":{"y0":"line","y1":"line","x":"x"},"names":{"y0":"Joined","y1":"Left"},"colors":{"y0":"#4BD964","y1":"#FE3C30"}};

/***/ }),

/***/ "./data/chart2.json":
/*!**************************!*\
  !*** ./data/chart2.json ***!
  \**************************/
/*! exports provided: columns, types, names, colors, y_scaled, default */
/***/ (function(module) {

module.exports = {"columns":[["x",1523059200000,1523145600000,1523232000000,1523318400000,1523404800000,1523491200000,1523577600000,1523664000000,1523750400000,1523836800000,1523923200000,1524009600000,1524096000000,1524182400000,1524268800000,1524355200000,1524441600000,1524528000000,1524614400000,1524700800000,1524787200000,1524873600000,1524960000000,1525046400000,1525132800000,1525219200000,1525305600000,1525392000000,1525478400000,1525564800000,1525651200000,1525737600000,1525824000000,1525910400000,1525996800000,1526083200000,1526169600000,1526256000000,1526342400000,1526428800000,1526515200000,1526601600000,1526688000000,1526774400000,1526860800000,1526947200000,1527033600000,1527120000000,1527206400000,1527292800000,1527379200000,1527465600000,1527552000000,1527638400000,1527724800000,1527811200000,1527897600000,1527984000000,1528070400000,1528156800000,1528243200000,1528329600000,1528416000000,1528502400000,1528588800000,1528675200000,1528761600000,1528848000000,1528934400000,1529020800000,1529107200000,1529193600000,1529280000000,1529366400000,1529452800000,1529539200000,1529625600000,1529712000000,1529798400000,1529884800000,1529971200000,1530057600000,1530144000000,1530230400000,1530316800000,1530403200000,1530489600000,1530576000000,1530662400000,1530748800000,1530835200000,1530921600000,1531008000000,1531094400000,1531180800000,1531267200000,1531353600000,1531440000000,1531526400000,1531612800000,1531699200000,1531785600000,1531872000000,1531958400000,1532044800000,1532131200000,1532217600000,1532304000000,1532390400000,1532476800000,1532563200000,1532649600000,1532736000000,1532822400000,1532908800000,1532995200000,1533081600000,1533168000000,1533254400000,1533340800000,1533427200000,1533513600000,1533600000000,1533686400000,1533772800000,1533859200000,1533945600000,1534032000000,1534118400000,1534204800000,1534291200000,1534377600000,1534464000000,1534550400000,1534636800000,1534723200000,1534809600000,1534896000000,1534982400000,1535068800000,1535155200000,1535241600000,1535328000000,1535414400000,1535500800000,1535587200000,1535673600000,1535760000000,1535846400000,1535932800000,1536019200000,1536105600000,1536192000000,1536278400000,1536364800000,1536451200000,1536537600000,1536624000000,1536710400000,1536796800000,1536883200000,1536969600000,1537056000000,1537142400000,1537228800000,1537315200000,1537401600000,1537488000000,1537574400000,1537660800000,1537747200000,1537833600000,1537920000000,1538006400000,1538092800000,1538179200000,1538265600000,1538352000000,1538438400000,1538524800000,1538611200000,1538697600000,1538784000000,1538870400000,1538956800000,1539043200000,1539129600000,1539216000000,1539302400000,1539388800000,1539475200000,1539561600000,1539648000000,1539734400000,1539820800000,1539907200000,1539993600000,1540080000000,1540166400000,1540252800000,1540339200000,1540425600000,1540512000000,1540598400000,1540684800000,1540771200000,1540857600000,1540944000000,1541030400000,1541116800000,1541203200000,1541289600000,1541376000000,1541462400000,1541548800000,1541635200000,1541721600000,1541808000000,1541894400000,1541980800000,1542067200000,1542153600000,1542240000000,1542326400000,1542412800000,1542499200000,1542585600000,1542672000000,1542758400000,1542844800000,1542931200000,1543017600000,1543104000000,1543190400000,1543276800000,1543363200000,1543449600000,1543536000000,1543622400000,1543708800000,1543795200000,1543881600000,1543968000000,1544054400000,1544140800000,1544227200000,1544313600000,1544400000000,1544486400000,1544572800000,1544659200000,1544745600000,1544832000000,1544918400000,1545004800000,1545091200000,1545177600000,1545264000000,1545350400000,1545436800000,1545523200000,1545609600000,1545696000000,1545782400000,1545868800000,1545955200000,1546041600000,1546128000000,1546214400000,1546300800000,1546387200000,1546473600000,1546560000000,1546646400000,1546732800000,1546819200000,1546905600000,1546992000000,1547078400000,1547164800000,1547251200000,1547337600000,1547424000000,1547510400000,1547596800000,1547683200000,1547769600000,1547856000000,1547942400000,1548028800000,1548115200000,1548201600000,1548288000000,1548374400000,1548460800000,1548547200000,1548633600000,1548720000000,1548806400000,1548892800000,1548979200000,1549065600000,1549152000000,1549238400000,1549324800000,1549411200000,1549497600000,1549584000000,1549670400000,1549756800000,1549843200000,1549929600000,1550016000000,1550102400000,1550188800000,1550275200000,1550361600000,1550448000000,1550534400000,1550620800000,1550707200000,1550793600000,1550880000000,1550966400000,1551052800000,1551139200000,1551225600000,1551312000000,1551398400000,1551484800000,1551571200000,1551657600000,1551744000000,1551830400000,1551916800000,1552003200000,1552089600000,1552176000000,1552262400000,1552348800000,1552435200000,1552521600000,1552608000000,1552694400000,1552780800000,1552867200000,1552953600000,1553040000000,1553126400000,1553212800000,1553299200000,1553385600000,1553472000000,1553558400000,1553644800000,1553731200000,1553817600000,1553904000000,1553990400000,1554076800000,1554163200000,1554249600000,1554336000000,1554422400000,1554508800000],["y0",272400,311800,339600,335800,335800,328800,317600,299600,337200,366400,350200,349800,354400,348400,324200,329000,356200,356200,329000,352400,343800,308400,261400,364400,333600,380000,353600,345400,320200,355000,354400,365000,349200,353000,339200,320200,335800,381400,357000,355200,354800,332800,320600,329400,365800,363400,365000,361600,345200,300800,344200,370800,360200,362600,349400,357800,294800,349000,372200,368200,365600,365600,357000,320200,329800,383600,383600,382200,363000,361200,329200,351000,381400,364200,394600,372200,363000,335400,361800,379600,389000,382000,389000,370400,326000,363200,406400,392200,368400,398200,367200,326200,335600,386800,386000,378600,378800,387400,341600,349000,404600,379800,388600,393600,385200,345400,371600,419600,399800,422000,410800,410200,381200,380400,442600,457800,453000,459200,457200,411000,428600,465800,451000,459800,484600,461200,427000,421800,481800,466600,402400,477800,466600,467200,457200,517000,493000,482600,504400,505600,478800,491400,518800,520800,508800,522800,531400,492400,508400,557800,564200,528000,555200,537600,480400,520600,551000,566000,531000,531200,519400,499000,495000,553800,578000,553200,554800,532400,501800,540600,567600,567600,563000,542400,566600,486800,538400,621200,580800,574200,597200,584000,522200,589600,622800,623800,627800,595200,576000,366000,592200,655600,660000,640000,639600,638400,590800,675600,746600,708400,710400,722400,708600,632200,764400,840200,810200,667000,766800,766000,740400,850800,858400,857400,851800,851800,821000,757600,851400,883000,883600,879800,852800,804800,730600,805800,864000,844800,834800,838800,809200,722800,843800,894000,820400,819000,810000,793400,737600,818000,866800,830600,845000,819200,760000,728400,793200,830000,837600,811400,823400,752800,696400,770600,844800,823000,793400,812000,769400,723200,755600,764600,811200,826200,866800,833000,755000,770600,649800,740400,836800,833600,859000,796000,834800,858400,809000,853000,801400,763600,713600,799200,819200,818000,781800,809200,736600,689800,802400,828600,794200,813000,788400,755200,689200,777800,811200,766000,809400,776800,759000,684800,807400,830800,802800,786000,751800,745000,666400,773200,795200,743600,739200,714000,727600,654000,717000,751600,739600,757600,730600,705200,674400,730800,767000,751600,776600,712000,688000,637800,686000,748600,750200,765400,742400,701000,636800,720400,779000,765200,851200,793000,731400,651200,734800,825400,790800,763400,724200,723600,625800,714600,803600,742600,738000,745800,706600,613600,712000,767400,750800,821200,813400,757800,683800],["y1",12360,16240,14210,14040,15190,13570,14020,15600,16080,15800,16740,15680,16790,15520,17410,17660,17000,15080,17190,17020,16620,15200,13210,16970,16030,16090,16800,15280,15450,15990,17130,14970,16020,15780,15770,15720,16210,15820,16080,14860,14210,14980,16200,15430,15510,16750,16460,15130,15120,15580,18040,16380,15940,16590,15950,15480,14940,16520,16570,15910,15950,16280,17120,15720,16600,17580,16260,17270,15660,16500,16410,17140,16240,17330,16320,17490,17220,17030,19130,17440,17350,17010,19050,16150,16350,18280,17670,19690,17470,16320,16180,16290,15440,16600,17430,17800,18110,16870,17200,16700,18010,18110,17850,17600,17870,18100,17300,19960,18340,19650,19710,21300,18930,20090,20240,21150,21020,21940,22350,22160,20800,22390,21450,22970,20690,23410,21490,21690,20650,22440,21630,23420,22860,23490,24460,23610,23810,22840,23540,24800,23460,24140,25050,23910,23790,23190,23390,23160,23830,23680,25940,23420,23330,23630,23400,26230,22690,24700,22010,23050,22460,24620,24960,26180,24540,24240,24690,24140,25140,29410,25900,25880,24600,25380,25090,24930,28930,26570,25270,26560,25520,27150,25130,25600,28580,25800,25500,27870,26320,18930,30390,27640,27790,28380,29230,28160,28490,31290,31710,32150,29840,29860,30240,30750,33300,34750,33250,31920,36940,36930,33360,38500,33700,34630,36580,36130,34960,35210,37600,37100,34640,36840,36150,33850,32800,35440,37510,36770,35560,35460,36650,35370,36990,39810,39340,36350,35350,33160,34440,36720,35200,37240,36030,36330,34940,34840,39350,37370,34040,33510,35270,32940,33310,34730,35760,37300,35190,33420,32550,33450,34360,41660,42960,38970,37080,37150,36460,41330,34220,34980,34840,39150,38110,35380,38760,36080,33790,36150,35960,32570,33180,36000,36390,33950,35390,36680,36540,31270,34720,35030,37090,38120,32870,34800,35000,34370,35070,35430,36830,37380,35390,33170,37300,34710,36450,37500,37820,31590,34370,37430,36650,35300,35520,35830,35650,32070,38700,34460,34450,32720,34900,35680,33340,37500,35730,35270,37150,35010,35260,33690,40330,36410,35540,35600,35480,37740,35600,44060,34610,37160,37880,36800,37940,35140,36900,40490,37740,36330,37730,35330,35800,39580,37590,35770,36430,36720,36860,33580,36830,35830,36600,37840,39450,35390,35310]],"types":{"y0":"line","y1":"line","x":"x"},"names":{"y0":"Views","y1":"Shares"},"colors":{"y0":"#108BE3","y1":"#E8AF14"},"y_scaled":true};

/***/ }),

/***/ "./data/chart3.json":
/*!**************************!*\
  !*** ./data/chart3.json ***!
  \**************************/
/*! exports provided: columns, types, names, colors, stacked, default */
/***/ (function(module) {

module.exports = {"columns":[["x",1523059200000,1523145600000,1523232000000,1523318400000,1523404800000,1523491200000,1523577600000,1523664000000,1523750400000,1523836800000,1523923200000,1524009600000,1524096000000,1524182400000,1524268800000,1524355200000,1524441600000,1524528000000,1524614400000,1524700800000,1524787200000,1524873600000,1524960000000,1525046400000,1525132800000,1525219200000,1525305600000,1525392000000,1525478400000,1525564800000,1525651200000,1525737600000,1525824000000,1525910400000,1525996800000,1526083200000,1526169600000,1526256000000,1526342400000,1526428800000,1526515200000,1526601600000,1526688000000,1526774400000,1526860800000,1526947200000,1527033600000,1527120000000,1527206400000,1527292800000,1527379200000,1527465600000,1527552000000,1527638400000,1527724800000,1527811200000,1527897600000,1527984000000,1528070400000,1528156800000,1528243200000,1528329600000,1528416000000,1528502400000,1528588800000,1528675200000,1528761600000,1528848000000,1528934400000,1529020800000,1529107200000,1529193600000,1529280000000,1529366400000,1529452800000,1529539200000,1529625600000,1529712000000,1529798400000,1529884800000,1529971200000,1530057600000,1530144000000,1530230400000,1530316800000,1530403200000,1530489600000,1530576000000,1530662400000,1530748800000,1530835200000,1530921600000,1531008000000,1531094400000,1531180800000,1531267200000,1531353600000,1531440000000,1531526400000,1531612800000,1531699200000,1531785600000,1531872000000,1531958400000,1532044800000,1532131200000,1532217600000,1532304000000,1532390400000,1532476800000,1532563200000,1532649600000,1532736000000,1532822400000,1532908800000,1532995200000,1533081600000,1533168000000,1533254400000,1533340800000,1533427200000,1533513600000,1533600000000,1533686400000,1533772800000,1533859200000,1533945600000,1534032000000,1534118400000,1534204800000,1534291200000,1534377600000,1534464000000,1534550400000,1534636800000,1534723200000,1534809600000,1534896000000,1534982400000,1535068800000,1535155200000,1535241600000,1535328000000,1535414400000,1535500800000,1535587200000,1535673600000,1535760000000,1535846400000,1535932800000,1536019200000,1536105600000,1536192000000,1536278400000,1536364800000,1536451200000,1536537600000,1536624000000,1536710400000,1536796800000,1536883200000,1536969600000,1537056000000,1537142400000,1537228800000,1537315200000,1537401600000,1537488000000,1537574400000,1537660800000,1537747200000,1537833600000,1537920000000,1538006400000,1538092800000,1538179200000,1538265600000,1538352000000,1538438400000,1538524800000,1538611200000,1538697600000,1538784000000,1538870400000,1538956800000,1539043200000,1539129600000,1539216000000,1539302400000,1539388800000,1539475200000,1539561600000,1539648000000,1539734400000,1539820800000,1539907200000,1539993600000,1540080000000,1540166400000,1540252800000,1540339200000,1540425600000,1540512000000,1540598400000,1540684800000,1540771200000,1540857600000,1540944000000,1541030400000,1541116800000,1541203200000,1541289600000,1541376000000,1541462400000,1541548800000,1541635200000,1541721600000,1541808000000,1541894400000,1541980800000,1542067200000,1542153600000,1542240000000,1542326400000,1542412800000,1542499200000,1542585600000,1542672000000,1542758400000,1542844800000,1542931200000,1543017600000,1543104000000,1543190400000,1543276800000,1543363200000,1543449600000,1543536000000,1543622400000,1543708800000,1543795200000,1543881600000,1543968000000,1544054400000,1544140800000,1544227200000,1544313600000,1544400000000,1544486400000,1544572800000,1544659200000,1544745600000,1544832000000,1544918400000,1545004800000,1545091200000,1545177600000,1545264000000,1545350400000,1545436800000,1545523200000,1545609600000,1545696000000,1545782400000,1545868800000,1545955200000,1546041600000,1546128000000,1546214400000,1546300800000,1546387200000,1546473600000,1546560000000,1546646400000,1546732800000,1546819200000,1546905600000,1546992000000,1547078400000,1547164800000,1547251200000,1547337600000,1547424000000,1547510400000,1547596800000,1547683200000,1547769600000,1547856000000,1547942400000,1548028800000,1548115200000,1548201600000,1548288000000,1548374400000,1548460800000,1548547200000,1548633600000,1548720000000,1548806400000,1548892800000,1548979200000,1549065600000,1549152000000,1549238400000,1549324800000,1549411200000,1549497600000,1549584000000,1549670400000,1549756800000,1549843200000,1549929600000,1550016000000,1550102400000,1550188800000,1550275200000,1550361600000,1550448000000,1550534400000,1550620800000,1550707200000,1550793600000,1550880000000,1550966400000,1551052800000,1551139200000,1551225600000,1551312000000,1551398400000,1551484800000,1551571200000,1551657600000,1551744000000,1551830400000,1551916800000,1552003200000,1552089600000,1552176000000,1552262400000,1552348800000,1552435200000,1552521600000,1552608000000,1552694400000,1552780800000,1552867200000,1552953600000,1553040000000,1553126400000,1553212800000,1553299200000,1553385600000,1553472000000,1553558400000,1553644800000,1553731200000,1553817600000,1553904000000,1553990400000,1554076800000,1554163200000,1554249600000,1554336000000,1554422400000,1554508800000],["y0",12360,16240,14210,14040,15190,13570,14020,15600,16080,15800,16740,15680,16790,15520,17410,17660,17000,15080,17190,17020,16620,15200,13210,16970,16030,16090,16800,15280,15450,15990,17130,14970,16020,15780,15770,15720,16210,15820,16080,14860,14210,14980,16200,15430,15510,16750,16460,15130,15120,15580,18040,16380,15940,16590,15950,15480,14940,16520,16570,15910,15950,16280,17120,15720,16600,17580,16260,17270,15660,16500,16410,17140,16240,17330,16320,17490,17220,17030,19130,17440,17350,17010,19050,16150,16350,18280,17670,19690,17470,16320,16180,16290,15440,16600,17430,17800,18110,16870,17200,16700,18010,18110,17850,17600,17870,18100,17300,19960,18340,19650,19710,21300,18930,20090,20240,21150,21020,21940,22350,22160,20800,22390,21450,22970,20690,23410,21490,21690,20650,22440,21630,23420,22860,23490,24460,23610,23810,22840,23540,24800,23460,24140,25050,23910,23790,23190,23390,23160,23830,23680,25940,23420,23330,23630,23400,26230,22690,24700,22010,23050,22460,24620,24960,26180,24540,24240,24690,24140,25140,29410,25900,25880,24600,25380,25090,24930,28930,26570,25270,26560,25520,27150,25130,25600,28580,25800,25500,27870,26320,18930,30390,27640,27790,28380,29230,28160,28490,31290,31710,32150,29840,29860,30240,30750,33300,34750,33250,31920,36940,36930,33360,38500,33700,34630,36580,36130,34960,35210,37600,37100,34640,36840,36150,33850,32800,35440,37510,36770,35560,35460,36650,35370,36990,39810,39340,36350,35350,33160,34440,36720,35200,37240,36030,36330,34940,34840,39350,37370,34040,33510,35270,32940,33310,34730,35760,37300,35190,33420,32550,33450,34360,41660,42960,38970,37080,37150,36460,41330,34220,34980,34840,39150,38110,35380,38760,36080,33790,36150,35960,32570,33180,36000,36390,33950,35390,36680,36540,31270,34720,35030,37090,38120,32870,34800,35000,34370,35070,35430,36830,37380,35390,33170,37300,34710,36450,37500,37820,31590,34370,37430,36650,35300,35520,35830,35650,32070,38700,34460,34450,32720,34900,35680,33340,37500,35730,35270,37150,35010,35260,33690,40330,36410,35540,35600,35480,37740,35600,44060,34610,37160,37880,36800,37940,35140,36900,40490,37740,36330,37730,35330,35800,39580,37590,35770,36430,36720,36860,33580,36830,35830,36600,37840,39450,35390,35310],["y1",9850,8210,10800,10490,11600,11160,11920,10210,8010,12010,12270,11720,12790,12330,10970,10150,11180,12150,9320,11460,12290,10400,7790,12150,8920,11330,11450,11550,10900,9800,11770,12130,11070,11850,11670,11260,10110,10790,10940,11200,12710,11660,9980,9120,11410,12830,11380,13290,12080,11020,9770,11700,11980,13020,12200,12320,9780,10660,10900,11940,12490,11300,12220,10410,10270,12310,12580,12170,12590,13110,10510,8960,12310,13270,13860,13460,12980,10030,10480,11550,12540,11630,13280,12670,9230,9510,11770,12160,12510,12130,12220,9630,8880,11210,10570,11600,12920,11260,11260,9570,11440,11850,12090,12640,12330,12180,9550,12990,12830,13600,14390,13380,11200,9350,13120,14140,15400,14090,14010,12900,10810,13690,13380,13910,13970,14260,12480,11110,12830,12910,8660,11560,13010,11910,11520,13260,15130,13850,14270,13940,13170,12080,15420,15530,16720,16800,16950,15980,13840,16930,17870,17780,17860,18180,16790,13320,18470,19150,18290,20630,19410,16410,15320,18460,18970,18930,20580,20850,17600,17750,22190,19970,21820,22900,21350,17600,16250,21290,20670,21300,22480,21530,17690,18860,21140,21100,22620,21730,21500,14230,17470,22730,22990,22790,23880,23070,21310,20790,23750,26840,25400,27300,25810,23570,21880,27560,29980,29890,22490,27400,25220,23230,28400,29720,31360,29380,31590,27210,23950,28940,29740,32280,32270,32520,27280,22010,30900,31550,32050,31800,32050,28210,23880,31450,29530,30470,32430,31660,27030,24270,31230,31630,31470,33030,32890,23600,24670,30340,31460,31610,31910,30550,26730,25180,29610,32710,33670,35040,35140,27820,23700,24670,16390,18390,29090,28130,25560,23590,21840,16420,24260,27670,29570,25730,22280,29060,29430,28930,29790,31130,25750,22390,29480,31690,30350,31150,31420,26440,22340,28380,29510,31160,30110,31910,25370,23090,30500,30550,29850,29560,30570,24870,23180,28910,29270,29670,31770,30990,26920,24520,30170,30620,30320,28920,30310,25300,22950,28800,30250,31800,30740,31250,27140,24710,30040,30210,32370,30260,31210,25190,24120,29280,30080,31050,31120,29810,25580,22500,28520,30260,35910,31510,31150,25450,23190,29760,31150,30540,30290,31860,26750,25020,30190,30700,30360,31060,30420,27340,22040,29990,30980,32710,32880,33190,30180],["y2",13730,13690,15220,13820,13080,13870,13300,11290,14240,15260,15150,14600,13690,14460,12750,13510,15220,15070,12730,15170,14140,12650,11480,13980,14500,15550,15590,15470,14040,14770,16590,14470,14840,14910,14490,13380,14410,14170,14800,15700,15180,14010,13020,14750,14950,14350,14710,15120,14070,12520,14680,15510,14200,15610,15180,14540,11940,15190,16180,15670,13830,14800,14560,12850,13800,14890,16190,15610,15230,14770,13940,15450,15530,16340,16000,16880,15530,13800,14410,15520,16630,14890,14660,15540,14100,15960,15950,16010,16150,15500,13800,14030,14520,16270,16110,15870,15270,15810,13670,15600,16290,15610,16060,16400,16340,13810,14920,16820,16950,17530,17490,17050,14650,15670,19000,18680,18240,18210,17680,16420,16190,16760,16580,18300,20560,18760,16440,17800,18270,21800,16760,18260,18150,18100,18210,20350,20730,22270,21910,19380,17800,20190,19540,19730,19530,19810,21450,17920,19850,21320,22400,22700,22810,20180,19140,21540,21730,21580,22800,23640,19150,22070,22740,20730,23820,21880,22700,22450,21120,21180,24150,20920,23890,21320,22110,20860,21190,22710,22170,23680,23590,23760,23170,22360,24520,23830,24690,26700,22220,14530,22920,26310,24840,24910,27490,24910,23330,28350,29540,29300,28910,30530,27710,26870,31170,34050,32040,28070,31970,32860,30500,35250,34900,35680,34820,36470,36600,31880,37310,38540,37510,36470,37070,33790,32550,34480,35660,34840,35070,34430,33800,29450,32910,37250,34730,33970,33660,32470,29670,32120,35610,33620,35090,32780,30180,26990,32680,35540,33250,33070,31350,31500,29800,29620,32630,32060,31030,31850,31040,29000,31410,30880,34180,31390,31410,33940,30190,29970,27620,28530,31660,35190,34050,33360,33250,32930,33570,32310,31930,32520,31000,34450,35120,33320,32760,32310,32110,30030,32290,32180,34510,34630,33840,32850,29680,32390,35360,32350,33910,32170,31140,25910,31100,33070,31630,32140,32980,31910,26510,28700,32450,30350,30620,28170,27090,24020,26210,30630,30010,29060,28280,27480,25640,27380,31170,30140,29880,27080,27190,26540,26100,28950,28390,29580,28430,27180,26900,27890,30370,29010,37710,31070,28200,24050,29250,30280,30940,30400,29590,27840,25070,28680,30740,28600,30670,30550,28430,26900,27170,29890,30590,33270,31990,30770,27010],["y3",930,890,900,980,1120,1250,1220,1030,960,1390,1300,1200,1030,880,1820,1680,1190,1320,1790,1610,1210,1170,1300,1080,1320,1200,970,760,1230,1250,1040,1020,1300,1290,970,900,1050,1040,980,1070,1410,1080,1000,1100,1070,1010,940,1160,1110,990,1070,830,940,1070,1160,1040,1020,1120,1210,3030,2530,1660,1170,1240,1180,1000,1170,720,1010,1300,1020,1180,1080,960,1050,880,950,970,1360,1020,1280,1140,1150,1100,1100,1260,1280,1540,1360,1250,1060,1330,930,1060,940,1190,1320,1180,1050,1210,1370,1330,950,1270,1130,1300,1170,1530,1110,1380,1240,1390,1150,1230,1340,1160,1140,1380,1690,1460,1240,1610,1320,1360,1320,1460,1450,1330,1080,1720,1600,1250,1570,1530,1610,1860,1450,1560,1690,1560,1730,1600,2170,1540,1940,1430,1410,1840,1790,1850,1620,1520,2190,1870,1550,2080,1560,1720,2040,1810,1890,2000,1900,2270,2060,1890,1930,1590,2030,1890,1810,1620,1690,1310,1700,1530,1970,2080,1620,1510,1990,1720,1750,1870,1740,1620,1840,1980,1910,1790,2080,1820,1530,2140,2440,2130,2430,2180,2080,2190,2090,1910,2440,1940,2680,3310,2510,2200,3020,2550,2450,2800,2450,2780,3020,2680,2210,2550,3160,2870,2690,3140,2820,2850,2160,2540,3050,2720,2540,3000,2630,2660,2780,2350,2510,2980,2650,2770,2220,3000,2950,2450,2610,2270,2200,2200,2920,2600,2470,2180,2480,2400,2450,2970,2830,2740,2680,2750,2200,2720,2270,3100,3510,3400,2920,2240,2330,2660,3400,3240,2940,3300,3760,3270,3460,3340,2820,2300,2830,2690,2760,2570,2420,2730,2480,3000,3260,2920,2750,2660,3130,3480,2530,3140,2200,2970,2900,2510,2500,2660,2970,2810,3200,2640,2790,3360,2690,2750,2810,3090,3080,2490,2810,2570,2630,2370,3320,2610,2300,2670,2470,2680,3270,3580,3000,2670,2540,2740,2940,2800,3590,3000,3130,3030,2460,2400,2610,3240,4010,2880,2930,2890,3240,2600,3530,2850,3580,3480,3210,3150,2730,3240,2720,3210,3090,3310,2670,2750,2540,2600,2930,3400,3050,3480,2930],["y4",2090,2070,2080,2490,2580,2210,2670,2940,2280,2520,2840,2480,3150,2590,2630,2490,3220,2390,2430,2490,2490,1520,1680,2680,2240,2630,2440,2340,2430,2710,2670,2420,2210,2750,3630,2450,2650,2330,2120,2310,2280,2500,2310,2410,2210,2210,2550,2690,2190,2030,1940,1790,3250,3370,2580,2330,2190,2270,2460,2310,2030,3070,2440,1820,2260,1580,2070,2230,2890,2430,1540,2450,2590,2200,2470,2790,2430,1960,2370,2470,2880,2960,2140,2420,1570,2530,2430,2850,2290,2380,2450,3150,3240,2100,2210,2580,2780,2880,2220,2290,2560,2550,3230,3760,4940,2460,2890,3120,3950,3170,2850,3480,2160,2770,3070,4080,2860,2950,2550,3890,3760,5150,7520,5950,4400,3150,2820,3390,3740,3140,3480,2480,2980,4740,3230,3370,3970,3730,3910,3890,2250,3340,5110,4360,3940,3030,3130,3470,3470,4230,3190,2950,5310,4600,3540,3170,3780,3210,4020,5060,4180,3710,4540,4070,3530,4100,3950,3810,4960,4750,4030,3760,4790,6930,5160,4060,4490,4500,4410,4950,4850,4380,4500,3270,3620,4910,4160,4520,5990,3080,5560,4510,4190,4390,4380,4260,4240,4260,4650,4630,3880,5130,4430,5030,5610,4420,4200,4300,5710,6660,4860,5620,4330,4120,10220,12330,7070,6430,6420,5510,4970,5390,5910,5440,4760,6080,4730,6690,6130,6050,4920,5310,5860,6880,6510,4860,6470,4960,4820,6520,5230,4350,5110,6100,4660,5110,4780,3790,5480,3560,4670,4530,5010,4590,4350,5670,3950,5150,4430,3630,4390,4090,3730,3380,6720,7270,5950,5350,4280,4400,6240,6950,5740,4400,5100,5880,4670,4710,6370,5630,4960,5780,6110,6070,5160,5280,4890,4560,5700,5030,4770,5370,6800,7150,3830,12010,4190,4320,4520,5850,5830,5670,4670,4980,4330,5050,5820,4610,5920,5160,4690,3980,4380,4450,3670,3440,4870,4330,4510,3880,4830,4850,4290,4400,5830,3760,4940,4670,5020,3920,4480,5410,5410,3750,5490,4150,3990,3910,4460,4240,3770,5000,4520,5000,4070,5080,4710,4440,5540,5280,5960,5260,4480,5540,6320,6150,5610,4900,4300,5010,5440,4450,5570,5840,4530],["y5",2520,2490,3090,2800,2820,3140,2780,2780,2770,2770,2960,2660,3010,2590,2670,2800,2630,2860,2590,2930,3020,2520,1990,2740,2540,2950,2920,3190,2610,2710,2900,3340,3240,2920,2870,2610,2600,2660,3110,3080,3260,2790,3140,2510,2940,2700,2780,3010,3010,2440,2750,3250,3500,3190,3150,2720,2550,2580,3060,2820,2640,2980,2720,2440,2270,3010,3150,3160,2830,2710,2420,2870,3130,2860,2840,2940,2780,2630,2770,2690,3100,3050,3020,2830,2270,2630,2550,3260,3120,2500,2720,2360,2170,3180,3410,2830,3250,2890,2680,2500,3730,3290,2790,2660,3160,2780,2490,3480,2990,2980,3110,3550,2900,2560,2920,3210,3410,3340,3190,3370,3430,3370,3380,3570,3360,3280,2920,3100,3250,3620,2640,2920,3370,2890,3210,3700,3880,3340,3630,3810,3960,4240,3680,3690,3540,3900,4130,3230,3430,4060,4240,3920,3950,4300,3340,3290,3670,3410,3640,4180,3560,3160,3060,3920,3980,4390,3810,3960,3590,4130,4310,3970,3870,4080,4170,3850,3750,3930,3880,3770,3970,3810,3910,3960,4180,4420,4390,4460,4420,2620,4500,4300,4470,4590,4580,4470,4120,4610,4730,5040,4970,5170,4990,4210,4870,5340,5170,4530,5560,5230,4300,5140,5630,5780,5400,5200,5310,5130,5480,5260,5780,5750,5350,5460,4670,4900,6280,6380,6580,6710,7110,5210,5230,5790,5720,5340,5510,5090,4550,5150,5370,5460,5550,5600,5510,5140,4960,5160,5180,5260,5340,5030,4750,5150,5030,5220,4620,5250,5000,4650,4080,4320,4360,4160,5420,5690,4580,4600,3750,4000,4990,5070,5510,5480,5260,5840,5330,5930,5640,5150,5560,4640,6140,5560,5880,6310,5370,5160,4920,5550,5730,5410,5180,5820,4790,5990,4960,5490,5540,5500,5140,5000,4960,5650,5440,5360,5790,5360,4690,5370,5490,5280,5510,5840,5720,4590,4760,5380,5220,5310,5300,5400,4540,4900,5140,5360,5540,5310,5480,4690,4800,5320,5900,5450,5250,4900,4410,4760,5150,5110,5890,5900,5460,4770,5100,5700,5560,5510,5700,5080,4880,4950,5880,5840,5470,5450,5320,4490,4090,5870,5420,6160,6240,5640,4530],["y6",120,60,90,70,50,60,110,150,100,60,70,50,60,80,130,80,90,130,170,80,160,100,90,100,90,40,90,100,80,100,110,100,80,120,180,160,110,50,60,50,20,110,130,120,50,40,110,110,70,140,150,70,50,110,30,70,130,110,140,60,60,80,170,110,140,60,40,140,60,160,150,90,70,150,130,100,80,110,100,30,80,80,130,130,150,130,160,70,70,70,80,200,80,80,80,50,70,80,70,90,50,70,120,140,110,170,180,90,70,80,100,150,220,170,90,120,140,90,190,190,100,110,80,180,150,140,150,220,170,120,160,130,170,150,190,200,120,100,130,210,190,100,100,180,130,80,90,230,130,100,120,120,110,100,140,140,50,100,100,100,150,140,110,120,80,100,70,150,120,100,100,100,130,110,110,190,170,210,100,90,130,210,180,90,160,90,70,120,190,140,100,100,100,160,160,200,190,190,100,90,140,180,120,170,130,60,50,160,130,170,280,160,130,140,170,110,240,220,150,110,150,80,180,150,70,190,80,150,220,210,160,170,90,120,50,180,180,130,220,100,150,200,110,280,180,150,190,140,60,120,100,110,180,100,140,120,200,180,220,170,160,70,140,150,210,120,200,80,330,90,100,140,60,100,160,50,80,120,80,120,170,80,80,110,80,70,210,140,190,60,100,120,60,170,240,200,70,80,80,120,160,90,120,100,130,180,110,130,240,130,90,80,150,150,240,250,140,80,130,170,120,120,170,110,80,170,150,130,190,210,180,120,50,100,180,210,170,150,120,110,170,160,220,140,150,160,130,120,60,230,170,270,120,160,200,160,150,180,210,200,150,110,120,160,210]],"types":{"y0":"bar","y1":"bar","y2":"bar","y3":"bar","y4":"bar","y5":"bar","y6":"bar","x":"x"},"names":{"y0":"Apples","y1":"Oranges","y2":"Lemons","y3":"Apricots","y4":"Kiwi","y5":"Mango","y6":"Pears"},"colors":{"y0":"#3497ED","y1":"#2373DB","y2":"#9ED448","y3":"#5FB641","y4":"#F5BD25","y5":"#F79E39","y6":"#E65850"},"stacked":true};

/***/ }),

/***/ "./data/chart4.json":
/*!**************************!*\
  !*** ./data/chart4.json ***!
  \**************************/
/*! exports provided: columns, types, names, colors, default */
/***/ (function(module) {

module.exports = {"columns":[["x",1523059200000,1523145600000,1523232000000,1523318400000,1523404800000,1523491200000,1523577600000,1523664000000,1523750400000,1523836800000,1523923200000,1524009600000,1524096000000,1524182400000,1524268800000,1524355200000,1524441600000,1524528000000,1524614400000,1524700800000,1524787200000,1524873600000,1524960000000,1525046400000,1525132800000,1525219200000,1525305600000,1525392000000,1525478400000,1525564800000,1525651200000,1525737600000,1525824000000,1525910400000,1525996800000,1526083200000,1526169600000,1526256000000,1526342400000,1526428800000,1526515200000,1526601600000,1526688000000,1526774400000,1526860800000,1526947200000,1527033600000,1527120000000,1527206400000,1527292800000,1527379200000,1527465600000,1527552000000,1527638400000,1527724800000,1527811200000,1527897600000,1527984000000,1528070400000,1528156800000,1528243200000,1528329600000,1528416000000,1528502400000,1528588800000,1528675200000,1528761600000,1528848000000,1528934400000,1529020800000,1529107200000,1529193600000,1529280000000,1529366400000,1529452800000,1529539200000,1529625600000,1529712000000,1529798400000,1529884800000,1529971200000,1530057600000,1530144000000,1530230400000,1530316800000,1530403200000,1530489600000,1530576000000,1530662400000,1530748800000,1530835200000,1530921600000,1531008000000,1531094400000,1531180800000,1531267200000,1531353600000,1531440000000,1531526400000,1531612800000,1531699200000,1531785600000,1531872000000,1531958400000,1532044800000,1532131200000,1532217600000,1532304000000,1532390400000,1532476800000,1532563200000,1532649600000,1532736000000,1532822400000,1532908800000,1532995200000,1533081600000,1533168000000,1533254400000,1533340800000,1533427200000,1533513600000,1533600000000,1533686400000,1533772800000,1533859200000,1533945600000,1534032000000,1534118400000,1534204800000,1534291200000,1534377600000,1534464000000,1534550400000,1534636800000,1534723200000,1534809600000,1534896000000,1534982400000,1535068800000,1535155200000,1535241600000,1535328000000,1535414400000,1535500800000,1535587200000,1535673600000,1535760000000,1535846400000,1535932800000,1536019200000,1536105600000,1536192000000,1536278400000,1536364800000,1536451200000,1536537600000,1536624000000,1536710400000,1536796800000,1536883200000,1536969600000,1537056000000,1537142400000,1537228800000,1537315200000,1537401600000,1537488000000,1537574400000,1537660800000,1537747200000,1537833600000,1537920000000,1538006400000,1538092800000,1538179200000,1538265600000,1538352000000,1538438400000,1538524800000,1538611200000,1538697600000,1538784000000,1538870400000,1538956800000,1539043200000,1539129600000,1539216000000,1539302400000,1539388800000,1539475200000,1539561600000,1539648000000,1539734400000,1539820800000,1539907200000,1539993600000,1540080000000,1540166400000,1540252800000,1540339200000,1540425600000,1540512000000,1540598400000,1540684800000,1540771200000,1540857600000,1540944000000,1541030400000,1541116800000,1541203200000,1541289600000,1541376000000,1541462400000,1541548800000,1541635200000,1541721600000,1541808000000,1541894400000,1541980800000,1542067200000,1542153600000,1542240000000,1542326400000,1542412800000,1542499200000,1542585600000,1542672000000,1542758400000,1542844800000,1542931200000,1543017600000,1543104000000,1543190400000,1543276800000,1543363200000,1543449600000,1543536000000,1543622400000,1543708800000,1543795200000,1543881600000,1543968000000,1544054400000,1544140800000,1544227200000,1544313600000,1544400000000,1544486400000,1544572800000,1544659200000,1544745600000,1544832000000,1544918400000,1545004800000,1545091200000,1545177600000,1545264000000,1545350400000,1545436800000,1545523200000,1545609600000,1545696000000,1545782400000,1545868800000,1545955200000,1546041600000,1546128000000,1546214400000,1546300800000,1546387200000,1546473600000,1546560000000,1546646400000,1546732800000,1546819200000,1546905600000,1546992000000,1547078400000,1547164800000,1547251200000,1547337600000,1547424000000,1547510400000,1547596800000,1547683200000,1547769600000,1547856000000,1547942400000,1548028800000,1548115200000,1548201600000,1548288000000,1548374400000,1548460800000,1548547200000,1548633600000,1548720000000,1548806400000,1548892800000,1548979200000,1549065600000,1549152000000,1549238400000,1549324800000,1549411200000,1549497600000,1549584000000,1549670400000,1549756800000,1549843200000,1549929600000,1550016000000,1550102400000,1550188800000,1550275200000,1550361600000,1550448000000,1550534400000,1550620800000,1550707200000,1550793600000,1550880000000,1550966400000,1551052800000,1551139200000,1551225600000,1551312000000,1551398400000,1551484800000,1551571200000,1551657600000,1551744000000,1551830400000,1551916800000,1552003200000,1552089600000,1552176000000,1552262400000,1552348800000,1552435200000,1552521600000,1552608000000,1552694400000,1552780800000,1552867200000,1552953600000,1553040000000,1553126400000,1553212800000,1553299200000,1553385600000,1553472000000,1553558400000,1553644800000,1553731200000,1553817600000,1553904000000,1553990400000,1554076800000,1554163200000,1554249600000,1554336000000,1554422400000,1554508800000],["y0",30600800,31327000,35296200,36671400,38742200,39538200,40365200,42177400,41253800,42994000,41398800,42850400,43624400,44164400,43575200,42069200,42733200,40369800,40467800,43160200,47773400,46834200,43145800,64329200,38156800,36229800,34755800,36527000,33582800,31686200,32552000,30499600,29413400,30605200,29920600,27942600,26974600,24874400,24546600,24789000,25654200,26277000,24491600,24444600,24416600,24593400,25214400,24817200,25938600,25223200,23816000,23189200,22654200,22579000,22185600,23108800,22146600,19930200,22292000,19980600,21812600,19632600,21635800,20944800,20299200,20543000,20725800,20119400,20247600,17315200,19133200,19691000,20111200,19735400,17922600,18467200,19467400,18115600,19175200,17285400,18604800,18150200,18689400,19497800,19688800,20074200,19243000,20180600,19962400,19130800,19464800,20429200,20254600,21029800,20104400,19559400,18572400,19560800,20320200,20534000,20865800,20705000,20326600,19589400,20039800,20672000,20448600,20431400,20203000,19807800,19114600,19737000,20446400,19984200,19013000,21106600,18543800,16215800,16996600,16285200,16812800,18398000,17487600,19092400,18394000,18933000,19541600,19880800,20069600,19929800,18914400,18397600,18944200,20357400,19935200,19857200,19392000,18742600,18331000,18930400,19992400,19907600,20189800,19738000,18392200,17742200,18294600,19626800,19650000,20076800,20142200,19624800,18711200,19298400,20398200,20290600,20346200,21254200,20288000,19139800,19492200,19611800,19389000,18652400,17296600,16267200,17129200,21290200,19845000,19130600,19087400,18704600,19270000,19601800,20168800,18454200,18388800,18521200,18595400,18921800,18961600,20607400,18806000,18761800,18780400,19312600,19751200,20555800,21416400,11018800,19735000,19565600,19622600,20178400,20873400,21822600,20152400,20210000,20094000,19408600,20045200,21272800,22675200,20556600,20628800,20193800,23418000,21550800,22184600,23645000,21168000,21156400,20624600,20763600,22816400,22499400,22984000,19503000,19126800,18676000,18452400,18917800,19860600,21129200,18835600,18816400,18739400,19215600,18999000,19278200,21011000,20021200,21848400,19470600,18784200,18774400,19653200,21242600,18834800,18868800,18462200,18098000,18211600,19367800,20742800,18762000,18738000,18249600,18001600,18234400,19228200,20551600,19084200,19204600,19331800,19235600,18789800,19783000,20253000,20858800,20679600,20483200,20695800,20676000,21407600,23004600,22544800,22397600,22540600,22594800,22962600,23580800,23441600,23028200,23179200,23496800,22729200,23086200,22961000,23396400,22557200,22907400,23239000,22632800,22261200,23621600,24424200,23286600,22865400,22802600,22799400,22745400,22599800,24371000,23400200,24004200,24141000,23751000,22954000,22941400,23675000,23115600,23478800,22618800,22171600,21867600,22016200,22925600,24285600,23554800,25214800,22918800,22629200,23121600,24037200,22052600,21490000,20981000,21275000,21153200,21562000,22737000,20606400,20894400,20349200,20001800,20993600,21822600,23157400,20812400,20631600,20920000,20787600,20625600,21468200,23499200,21612800,21550000,21703600,21410600,22272400,22455600,23961000,22611600,23301400,22674600,21071000,24589200,23748400,22198400,21311200,22167400,23862400,23883200,22336800,21860800,21619000,21934000,23330600,23336400,19579600,22230200,22727600,22706600,21370000]],"types":{"y0":"bar","x":"x"},"names":{"y0":"Views"},"colors":{"y0":"#64ADED"}};

/***/ }),

/***/ "./data/chart5.json":
/*!**************************!*\
  !*** ./data/chart5.json ***!
  \**************************/
/*! exports provided: columns, types, names, colors, percentage, stacked, default */
/***/ (function(module) {

module.exports = {"columns":[["x",1523059200000,1523145600000,1523232000000,1523318400000,1523404800000,1523491200000,1523577600000,1523664000000,1523750400000,1523836800000,1523923200000,1524009600000,1524096000000,1524182400000,1524268800000,1524355200000,1524441600000,1524528000000,1524614400000,1524700800000,1524787200000,1524873600000,1524960000000,1525046400000,1525132800000,1525219200000,1525305600000,1525392000000,1525478400000,1525564800000,1525651200000,1525737600000,1525824000000,1525910400000,1525996800000,1526083200000,1526169600000,1526256000000,1526342400000,1526428800000,1526515200000,1526601600000,1526688000000,1526774400000,1526860800000,1526947200000,1527033600000,1527120000000,1527206400000,1527292800000,1527379200000,1527465600000,1527552000000,1527638400000,1527724800000,1527811200000,1527897600000,1527984000000,1528070400000,1528156800000,1528243200000,1528329600000,1528416000000,1528502400000,1528588800000,1528675200000,1528761600000,1528848000000,1528934400000,1529020800000,1529107200000,1529193600000,1529280000000,1529366400000,1529452800000,1529539200000,1529625600000,1529712000000,1529798400000,1529884800000,1529971200000,1530057600000,1530144000000,1530230400000,1530316800000,1530403200000,1530489600000,1530576000000,1530662400000,1530748800000,1530835200000,1530921600000,1531008000000,1531094400000,1531180800000,1531267200000,1531353600000,1531440000000,1531526400000,1531612800000,1531699200000,1531785600000,1531872000000,1531958400000,1532044800000,1532131200000,1532217600000,1532304000000,1532390400000,1532476800000,1532563200000,1532649600000,1532736000000,1532822400000,1532908800000,1532995200000,1533081600000,1533168000000,1533254400000,1533340800000,1533427200000,1533513600000,1533600000000,1533686400000,1533772800000,1533859200000,1533945600000,1534032000000,1534118400000,1534204800000,1534291200000,1534377600000,1534464000000,1534550400000,1534636800000,1534723200000,1534809600000,1534896000000,1534982400000,1535068800000,1535155200000,1535241600000,1535328000000,1535414400000,1535500800000,1535587200000,1535673600000,1535760000000,1535846400000,1535932800000,1536019200000,1536105600000,1536192000000,1536278400000,1536364800000,1536451200000,1536537600000,1536624000000,1536710400000,1536796800000,1536883200000,1536969600000,1537056000000,1537142400000,1537228800000,1537315200000,1537401600000,1537488000000,1537574400000,1537660800000,1537747200000,1537833600000,1537920000000,1538006400000,1538092800000,1538179200000,1538265600000,1538352000000,1538438400000,1538524800000,1538611200000,1538697600000,1538784000000,1538870400000,1538956800000,1539043200000,1539129600000,1539216000000,1539302400000,1539388800000,1539475200000,1539561600000,1539648000000,1539734400000,1539820800000,1539907200000,1539993600000,1540080000000,1540166400000,1540252800000,1540339200000,1540425600000,1540512000000,1540598400000,1540684800000,1540771200000,1540857600000,1540944000000,1541030400000,1541116800000,1541203200000,1541289600000,1541376000000,1541462400000,1541548800000,1541635200000,1541721600000,1541808000000,1541894400000,1541980800000,1542067200000,1542153600000,1542240000000,1542326400000,1542412800000,1542499200000,1542585600000,1542672000000,1542758400000,1542844800000,1542931200000,1543017600000,1543104000000,1543190400000,1543276800000,1543363200000,1543449600000,1543536000000,1543622400000,1543708800000,1543795200000,1543881600000,1543968000000,1544054400000,1544140800000,1544227200000,1544313600000,1544400000000,1544486400000,1544572800000,1544659200000,1544745600000,1544832000000,1544918400000,1545004800000,1545091200000,1545177600000,1545264000000,1545350400000,1545436800000,1545523200000,1545609600000,1545696000000,1545782400000,1545868800000,1545955200000,1546041600000,1546128000000,1546214400000,1546300800000,1546387200000,1546473600000,1546560000000,1546646400000,1546732800000,1546819200000,1546905600000,1546992000000,1547078400000,1547164800000,1547251200000,1547337600000,1547424000000,1547510400000,1547596800000,1547683200000,1547769600000,1547856000000,1547942400000,1548028800000,1548115200000,1548201600000,1548288000000,1548374400000,1548460800000,1548547200000,1548633600000,1548720000000,1548806400000,1548892800000,1548979200000,1549065600000,1549152000000,1549238400000,1549324800000,1549411200000,1549497600000,1549584000000,1549670400000,1549756800000,1549843200000,1549929600000,1550016000000,1550102400000,1550188800000,1550275200000,1550361600000,1550448000000,1550534400000,1550620800000,1550707200000,1550793600000,1550880000000,1550966400000,1551052800000,1551139200000,1551225600000,1551312000000,1551398400000,1551484800000,1551571200000,1551657600000,1551744000000,1551830400000,1551916800000,1552003200000,1552089600000,1552176000000,1552262400000,1552348800000,1552435200000,1552521600000,1552608000000,1552694400000,1552780800000,1552867200000,1552953600000,1553040000000,1553126400000,1553212800000,1553299200000,1553385600000,1553472000000,1553558400000,1553644800000,1553731200000,1553817600000,1553904000000,1553990400000,1554076800000,1554163200000,1554249600000,1554336000000,1554422400000,1554508800000],["y0",34310,38260,47440,42460,43740,43770,41720,35440,39770,42420,45930,42840,42080,41300,33430,34690,44450,41780,33570,40180,38560,33220,27930,44050,35100,47290,46580,43240,34810,39960,45820,43680,44660,46050,43560,32970,42450,47550,50150,45430,44740,41950,30010,38770,45030,50130,42960,43090,39330,35630,41110,46810,48720,49340,45190,38450,31440,37730,42390,48980,49870,43060,44800,32470,38350,46770,49570,49110,50510,43630,37390,42040,49600,49120,44440,48430,47780,39650,37610,47430,49810,47090,47960,42390,31880,38090,43410,47620,48660,49410,48980,33870,39340,52190,48170,48830,49110,44620,29840,34750,52870,44890,48690,50820,41630,32840,33220,45130,48770,40130,42330,39850,30770,30490,42370,44410,42050,45240,37590,28220,28460,43830,35120,37970,38080,33960,31170,33140,35170,31390,23890,35030,29560,27300,29170,41540,38970,40210,40290,42360,33160,37040,45390,43470,45240,48290,45280,39430,37240,46040,53750,52340,56740,48730,32760,35940,57580,48800,44720,47330,40000,37190,44400,53920,48080,42060,45650,41430,34950,35300,50860,44030,46780,43890,38240,29930,36670,43530,46970,47220,45550,38840,34260,39740,41650,45770,47930,44510,42120,20810,35470,41790,45670,44380,42660,40320,32480,40190,47830,47030,47340,42530,42240,37300,38980,49190,45440,37440,34270,46220,33960,44960,45250,43860,44340,44010,41790,34410,43200,46130,48550,43810,45360,50150,35320,39170,48970,48150,47340,48960,39830,32340,37610,49160,45110,41230,44360,44180,33100,37630,47340,46860,47800,43470,39480,36760,38750,46680,42040,41890,43630,39920,30640,37680,42650,42410,39520,38680,33620,26190,31120,31710,24600,29640,35580,33250,29090,31260,20900,25900,39520,38410,38970,37370,32060,41190,42710,42410,44490,42680,33690,38400,42230,44920,41980,42120,40250,35550,37400,48750,44870,45750,44020,41510,30420,37770,48420,42870,47080,47870,41520,33120,39320,52990,44150,49360,42200,42290,29470,41270,47010,42710,44330,39960,40600,30710,33290,44720,43690,42740,40440,40440,32720,37030,42310,42630,38830,39250,36590,26960,29320,41210,40850,40130,40860,38760,29040,33270,44720,44170,43990,42110,40370,30110,30340,46630,42680,41700,41820,43800,31090,33950,46700,43480,44790,41260,40460,28270,32880,42010,43890,45990,42250,39450,28870],["y1",13730,13690,15220,13820,13080,13870,13300,11290,14240,15260,15150,14600,13690,14460,12750,13510,15220,15070,12730,15170,14140,12650,11480,13980,14500,15550,15590,15470,14040,14770,16590,14470,14840,14910,14490,13380,14410,14170,14800,15700,15180,14010,13020,14750,14950,14350,14710,15120,14070,12520,14680,15510,14200,15610,15180,14540,11940,15190,16180,15670,13830,14800,14560,12850,13800,14890,16190,15610,15230,14770,13940,15450,15530,16340,16000,16880,15530,13800,14410,15520,16630,14890,14660,15540,14100,15960,15950,16010,16150,15500,13800,14030,14520,16270,16110,15870,15270,15810,13670,15600,16290,15610,16060,16400,16340,13810,14920,16820,16950,17530,17490,17050,14650,15670,19000,18680,18240,18210,17680,16420,16190,16760,16580,18300,20560,18760,16440,17800,18270,21800,16760,18260,18150,18100,18210,20350,20730,22270,21910,19380,17800,20190,19540,19730,19530,19810,21450,17920,19850,21320,22400,22700,22810,20180,19140,21540,21730,21580,22800,23640,19150,22070,22740,20730,23820,21880,22700,22450,21120,21180,24150,20920,23890,21320,22110,20860,21190,22710,22170,23680,23590,23760,23170,22360,24520,23830,24690,26700,22220,14530,22920,26310,24840,24910,27490,24910,23330,28350,29540,29300,28910,30530,27710,26870,31170,34050,32040,28070,31970,32860,30500,35250,34900,35680,34820,36470,36600,31880,37310,38540,37510,36470,37070,33790,32550,34480,35660,34840,35070,34430,33800,29450,32910,37250,34730,33970,33660,32470,29670,32120,35610,33620,35090,32780,30180,26990,32680,35540,33250,33070,31350,31500,29800,29620,32630,32060,31030,31850,31040,29000,31410,30880,34180,31390,31410,33940,30190,29970,27620,28530,31660,35190,34050,33360,33250,32930,33570,32310,31930,32520,31000,34450,35120,33320,32760,32310,32110,30030,32290,32180,34510,34630,33840,32850,29680,32390,35360,32350,33910,32170,31140,25910,31100,33070,31630,32140,32980,31910,26510,28700,32450,30350,30620,28170,27090,24020,26210,30630,30010,29060,28280,27480,25640,27380,31170,30140,29880,27080,27190,26540,26100,28950,28390,29580,28430,27180,26900,27890,30370,29010,37710,31070,28200,24050,29250,30280,30940,30400,29590,27840,25070,28680,30740,28600,30670,30550,28430,26900,27170,29890,30590,33270,31990,30770,27010],["y2",10200,11610,11210,11800,11010,10980,12360,9040,11290,10530,10530,9160,8920,10140,8700,8320,9860,9330,7450,9840,8710,6850,6500,8840,7640,8690,7730,7990,8020,7160,9640,7810,9740,8010,10200,7060,6570,8240,8260,8390,9060,7860,8050,6180,8160,8020,9000,8300,7980,6450,6700,7870,7820,7330,8520,8010,6940,7800,8480,8430,7360,7010,7310,6680,5940,7100,6890,8810,6600,7580,5680,6710,8530,9210,6170,6940,7760,6120,5890,9590,6340,6450,8990,7720,7650,6330,8120,7200,7620,8010,5930,8830,7360,8020,6730,7360,7870,8170,6520,6500,6820,9860,7160,7960,7270,6420,5610,7340,7070,6480,7090,6960,6440,5830,7230,8080,6980,7660,9220,5980,4930,6880,6920,6910,7140,6030,5800,7240,8090,5640,5530,6520,6230,6210,6200,8850,8430,9310,8930,8140,7330,7770,7820,7380,8020,7310,6790,6980,6910,8800,7250,9200,8440,8230,6710,7710,8430,7780,7290,9210,8000,8170,7140,8060,7360,6840,7850,6650,6150,7120,8510,9020,9750,9200,9320,7500,6820,8560,9350,9020,8150,8610,6740,8500,8330,7170,8790,7090,6870,4910,7700,8490,9190,10100,7720,7850,8530,7970,9480,8170,9900,9190,8690,10060,10280,10930,9470,9840,11210,11240,7870,10100,11280,10970,11100,10590,10920,8850,9130,11280,10410,10530,10560,10150,11230,8580,9660,10010,10990,10560,7710,7710,9290,10680,9030,8690,9440,8860,7170,9130,10090,9080,9240,9090,8760,8070,8520,9110,9240,9110,9500,9080,7810,9090,10110,9700,10770,9580,8390,8100,7840,9530,9590,8820,9140,9580,9610,8950,7980,8180,9920,9730,9940,8990,9600,9830,9680,9840,8840,9030,9090,10470,9820,10730,9900,10470,11100,7790,10320,10060,11450,10110,10020,10170,10540,11910,11290,11040,9940,10240,9850,9610,9920,10440,10880,10290,9930,10560,10560,9590,11160,10660,10540,9800,9490,9350,9440,10260,11180,9980,9590,9240,8560,9170,9290,9370,9420,10210,9640,8780,11220,10440,9800,10500,10420,9840,8990,9410,10860,10710,13840,13700,10680,8830,11480,12140,11130,13350,11750,9780,9150,9820,11100,10890,11930,10630,10490,8880,11000,11480,12160,10660,11210,10410,9850],["y3",2000,2540,3540,3380,3190,3530,3190,2160,2520,3770,3360,3300,3130,2810,1710,2210,3490,3370,2270,3070,2870,1750,1430,2340,2210,3470,3380,3470,2150,2210,3540,3450,3280,3360,2890,2130,2250,3940,3480,3380,3470,2920,1920,1950,3600,3440,3450,3540,2940,2070,2050,3430,3610,3290,3320,2770,1880,2280,3690,3360,3490,3060,3120,2080,2220,3390,3290,3580,3330,3160,2160,2140,3290,3010,3540,3280,3060,2350,2490,3260,3430,3160,3860,2730,1890,2300,3050,2940,3150,3380,2840,1870,1940,3020,3050,3310,2960,2760,1730,2330,3610,3390,2790,2930,2840,1750,1910,2990,3190,2620,2940,2190,1580,1490,2430,2490,2350,2270,2030,1240,1510,2550,2100,1900,2290,1770,1450,1560,1790,1670,1110,2060,1530,1600,1620,2470,2760,2390,2260,2200,1690,1590,2630,2580,2500,2780,2280,1810,1970,2880,2970,2830,3030,2910,2150,2150,3090,2950,2850,3120,2540,1830,2290,3110,3210,2950,2670,2940,1800,1820,3130,3180,3690,3030,2940,1780,2080,3120,3470,3220,3240,3140,2080,2510,3300,3260,3390,3490,2970,1780,2260,3610,3280,3540,3620,3020,2110,2360,3120,3420,3440,3430,3050,2630,2670,4080,3320,2980,2400,2920,2240,2010,3290,3880,3480,3180,3750,2200,3050,3160,3590,2890,3580,3510,1790,2610,3930,3540,3660,3280,2900,2100,2580,3660,4100,3340,3590,3050,2390,2360,3880,3870,3910,3230,2690,1990,2280,3710,3540,3350,3150,2870,2290,2280,3230,3520,2990,2590,2390,1890,2170,1950,1360,2060,2650,2430,1920,1820,1400,1540,2900,3080,3560,2360,2710,3960,3900,3660,4000,3550,2930,3770,4240,4490,4760,4160,3410,2350,3210,3420,3980,4010,4000,4150,2390,3060,3830,4060,3700,3510,3530,2380,2430,3640,4550,3700,3310,3870,2130,2480,3650,3820,4180,3500,3380,1970,2640,3970,3800,3830,3400,3110,1820,2370,3860,3650,3650,3620,3270,2100,2440,3520,3290,3470,3210,3210,2020,2360,3910,3700,3650,3200,3250,2220,2420,4010,3870,3620,3620,3010,2410,2530,3820,3630,3870,3510,3190,1880,2460,3500,3750,3880,4140,3320,2260],["y4",5480,5930,10490,9460,11790,9530,9690,5500,5810,8090,9510,8830,8350,8490,5130,5550,9110,9850,5800,8930,8280,4540,4350,6630,4490,9810,9130,8680,5040,5120,9100,9520,8670,10550,8860,5140,5050,9510,10390,10290,10130,9700,4150,5270,9790,9670,9120,10030,9790,5250,5530,9280,9610,9870,9580,9410,4700,6340,10490,10390,10850,9680,8600,4920,5050,10960,10680,10500,10070,8270,5410,5730,10780,10250,10470,9690,9640,5080,5630,10050,11060,8290,9540,8070,5380,5310,9710,9750,10760,9870,9080,5030,6720,9830,10500,9190,9550,9580,6040,6360,10720,9090,10170,9570,9750,4810,5280,9420,9310,8830,9050,8400,4480,3990,7880,8890,8320,8770,7420,5210,3960,7940,7750,8310,8070,6670,4590,4500,6150,5190,3850,5940,6310,4300,4370,9240,7760,7810,7700,7790,4380,4990,8640,9060,8870,9760,8780,6250,6250,10460,10520,10970,10430,9440,5390,5270,10630,10740,10160,10030,9180,4620,5290,9080,11090,9930,10520,9910,5120,5360,9810,9170,9120,10310,8460,4200,4390,9770,9800,10000,9530,9130,4830,4820,9390,8900,8820,9390,8480,3240,4990,9510,9060,8840,9480,8970,4800,5620,9750,10350,9890,9510,9170,5790,6960,10760,9780,8790,6010,8560,5550,5710,9910,9130,9630,10250,9720,4930,6080,9760,10140,8950,10930,9040,5390,6260,9570,10320,9450,10200,8570,5630,5230,10030,10220,9690,10240,9500,5680,5970,9350,9710,9090,9760,8630,4730,5930,9900,10220,9480,8960,7940,5080,4910,9060,8490,10270,9200,7350,4800,5420,4580,3820,4200,6850,7120,5040,4870,4070,3590,7720,7710,7330,5230,5980,8450,10610,9030,9480,8870,5010,5210,10050,9270,9770,9290,9480,5280,4770,9320,10050,9310,9650,8280,4880,5350,10050,9730,9880,10130,9120,5140,5840,9820,9870,9770,8920,9010,4810,5480,10440,9540,9450,9540,9390,5380,5460,10590,9370,10240,9790,9370,5140,5630,9530,9240,9440,9760,8500,4900,4850,9890,8650,9450,9820,8880,5050,5000,9100,9690,9630,9870,8570,4840,5130,9910,9760,9930,10210,9010,4990,5580,10040,10630,10260,10610,8240,5080,4530,10140,9920,9670,10590,10600,4970],["y5",4770,4760,4910,5490,5560,5270,4900,4520,5420,5750,5640,5290,5090,5670,4290,4160,4990,5170,4380,5370,5840,4710,3600,4560,4640,5000,4660,4800,3900,6400,4150,5100,5190,5950,4670,3940,4070,4490,4750,4760,4910,4730,3780,3760,4860,4730,4960,4330,5320,4700,4390,5570,5470,4330,4250,4070,3500,3790,5020,4630,5070,3930,4360,3470,3730,4130,4910,4670,4100,4240,3660,3360,4430,4090,3860,4180,4420,3540,4120,4180,4330,4000,4450,3460,3090,3600,3720,4190,3890,3900,4340,3150,3210,3940,4150,4310,4300,3600,3380,2970,3320,3520,3570,4010,3400,3210,3130,3670,3740,3790,2910,3230,2280,3030,2770,3310,3640,3050,3090,2810,2880,3470,3120,3270,3140,2460,2950,2690,3000,2950,2430,3210,3500,2230,2620,3030,3010,3150,3110,3170,3680,3020,3380,2600,3180,3240,3690,3150,3200,2860,3320,3290,3200,3240,2760,3100,3660,3180,4120,3110,4100,2950,2360,3590,3320,3410,3220,3200,2510,2800,3490,3050,2830,3100,3000,3030,2800,3670,2890,3320,2640,2660,2410,2720,3370,3230,3070,2920,3010,2240,2510,2970,2750,2560,2700,2630,2660,2700,2890,3030,2430,3300,3700,2830,3010,2990,2850,2850,3290,2400,2890,3000,2640,2900,2970,2980,2430,2450,2960,2990,2940,2950,2900,2670,2300,2610,2670,2760,2440,2960,2740,2290,2820,2330,2690,2420,2780,2110,2180,2040,2740,2960,3230,2880,2680,2180,2380,2560,2890,2540,2660,2450,2440,2450,2590,2930,2960,3030,2380,2220,2390,2520,2650,2490,2590,2450,2200,2340,2150,2520,2140,2100,2240,2150,2770,2740,2240,2080,2480,2090,2230,2180,2390,2390,2670,2920,1960,1910,2420,2180,2860,2800,2460,2700,2360,2320,2750,2520,2690,2580,2270,2370,2190,2440,2120,2360,2110,2170,2200,2370,2110,2280,2410,2640,2240,2380,2090,2620,2570,2510,2320,2390,1970,2190,2340,2340,2310,2290,2450,1960,2140,1930,2400,1980,2290,2160,1840,1700,2110,2540,2390,2150,1800,1990,2130,2040,1910,1740,2290,2030,1820,2090,2200,2340,2010,2200,2030,2340,1630,2010,1910,1980,1970,1640,1660]],"types":{"y0":"area","y1":"area","y2":"area","y3":"area","y4":"area","y5":"area","x":"x"},"names":{"y0":"Apples","y1":"Oranges","y2":"Lemons","y3":"Apricots","y4":"Kiwi","y5":"Mango"},"colors":{"y0":"#3497ED","y1":"#2373DB","y2":"#9ED448","y3":"#5FB641","y4":"#F5BD25","y5":"#F79E39"},"percentage":true,"stacked":true};

/***/ }),

/***/ "./data/chart_data.json":
/*!******************************!*\
  !*** ./data/chart_data.json ***!
  \******************************/
/*! exports provided: 0, 1, 2, 3, 4, default */
/***/ (function(module) {

module.exports = [{"columns":[["x",1542412800000,1542499200000,1542585600000,1542672000000,1542758400000,1542844800000,1542931200000,1543017600000,1543104000000,1543190400000,1543276800000,1543363200000,1543449600000,1543536000000,1543622400000,1543708800000,1543795200000,1543881600000,1543968000000,1544054400000,1544140800000,1544227200000,1544313600000,1544400000000,1544486400000,1544572800000,1544659200000,1544745600000,1544832000000,1544918400000,1545004800000,1545091200000,1545177600000,1545264000000,1545350400000,1545436800000,1545523200000,1545609600000,1545696000000,1545782400000,1545868800000,1545955200000,1546041600000,1546128000000,1546214400000,1546300800000,1546387200000,1546473600000,1546560000000,1546646400000,1546732800000,1546819200000,1546905600000,1546992000000,1547078400000,1547164800000,1547251200000,1547337600000,1547424000000,1547510400000,1547596800000,1547683200000,1547769600000,1547856000000,1547942400000,1548028800000,1548115200000,1548201600000,1548288000000,1548374400000,1548460800000,1548547200000,1548633600000,1548720000000,1548806400000,1548892800000,1548979200000,1549065600000,1549152000000,1549238400000,1549324800000,1549411200000,1549497600000,1549584000000,1549670400000,1549756800000,1549843200000,1549929600000,1550016000000,1550102400000,1550188800000,1550275200000,1550361600000,1550448000000,1550534400000,1550620800000,1550707200000,1550793600000,1550880000000,1550966400000,1551052800000,1551139200000,1551225600000,1551312000000,1551398400000,1551484800000,1551571200000,1551657600000,1551744000000,1551830400000,1551916800000,1552003200000],["y0",37,20,32,39,32,35,19,65,36,62,113,69,120,60,51,49,71,122,149,69,57,21,33,55,92,62,47,50,56,116,63,60,55,65,76,33,45,64,54,81,180,123,106,37,60,70,46,68,46,51,33,57,75,70,95,70,50,68,63,66,53,38,52,109,121,53,36,71,96,55,58,29,31,55,52,44,126,191,73,87,255,278,219,170,129,125,126,84,65,53,154,57,71,64,75,72,39,47,52,73,89,156,86,105,88,45,33,56,142,124,114,64],["y1",22,12,30,40,33,23,18,41,45,69,57,61,70,47,31,34,40,55,27,57,48,32,40,49,54,49,34,51,51,51,66,51,94,60,64,28,44,96,49,73,30,88,63,42,56,67,52,67,35,61,40,55,63,61,105,59,51,76,63,57,47,56,51,98,103,62,54,104,48,41,41,37,30,28,26,37,65,86,70,81,54,74,70,50,74,79,85,62,36,46,68,43,66,50,28,66,39,23,63,74,83,66,40,60,29,36,27,54,89,50,73,52]],"types":{"y0":"line","y1":"line","x":"x"},"names":{"y0":"#0","y1":"#1"},"colors":{"y0":"#3DC23F","y1":"#F34C44"}},{"columns":[["x",1542412800000,1542499200000,1542585600000,1542672000000,1542758400000,1542844800000,1542931200000,1543017600000,1543104000000,1543190400000,1543276800000,1543363200000,1543449600000,1543536000000,1543622400000,1543708800000,1543795200000,1543881600000,1543968000000,1544054400000,1544140800000,1544227200000,1544313600000,1544400000000,1544486400000,1544572800000,1544659200000,1544745600000,1544832000000,1544918400000,1545004800000,1545091200000,1545177600000,1545264000000,1545350400000,1545436800000,1545523200000,1545609600000,1545696000000,1545782400000,1545868800000,1545955200000,1546041600000,1546128000000,1546214400000,1546300800000,1546387200000,1546473600000,1546560000000,1546646400000,1546732800000,1546819200000,1546905600000,1546992000000,1547078400000,1547164800000,1547251200000,1547337600000,1547424000000,1547510400000,1547596800000,1547683200000,1547769600000,1547856000000,1547942400000,1548028800000,1548115200000,1548201600000,1548288000000,1548374400000,1548460800000,1548547200000,1548633600000,1548720000000,1548806400000,1548892800000,1548979200000,1549065600000,1549152000000,1549238400000,1549324800000,1549411200000,1549497600000,1549584000000,1549670400000,1549756800000,1549843200000,1549929600000,1550016000000,1550102400000,1550188800000,1550275200000,1550361600000,1550448000000,1550534400000,1550620800000,1550707200000,1550793600000,1550880000000,1550966400000,1551052800000,1551139200000,1551225600000,1551312000000,1551398400000,1551484800000,1551571200000,1551657600000,1551744000000,1551830400000,1551916800000,1552003200000],["y0",6706,7579,7798,8307,7866,7736,7816,7630,7536,7105,7178,7619,7917,7483,5772,5700,5435,4837,4716,4890,4753,4820,4538,12162,39444,25765,18012,14421,13249,11310,10377,9399,8917,8259,7902,9442,47596,36160,23866,18500,15488,13722,12270,13413,10574,7092,7159,7880,8821,8306,7780,7963,7837,7611,7334,7413,7015,6742,6557,6593,6680,6725,6345,5988,6365,9911,28833,19694,14873,11911,10498,9708,8893,8365,7960,7694,45529,42858,31508,23289,19147,15874,14551,13124,11778,10809,10522,9918,9436,8617,8765,8194,8035,7865,7573,7422,7047,7147,6861,6669,6363,12073,32381,21390,15311,12819,11655,10696,9678,9143,8296,7852],["y1",3522,4088,4146,4477,4202,4157,4177,4203,4223,3948,3946,3898,3979,4052,3279,3229,3302,3040,3054,2982,3077,2965,2973,5148,22485,13077,9055,7446,6824,5995,5787,5367,4997,4689,4630,4785,22365,15244,10626,8666,7681,6929,6219,6367,5402,4932,4844,5146,5265,4887,4714,4722,4718,4693,4746,4819,4455,4419,4323,4407,4277,11589,6100,5076,4769,8929,14002,9756,7520,6343,5633,5415,5052,4850,4624,4480,14102,24005,14263,10845,9028,7755,7197,7001,6737,6254,6150,5922,5603,5048,5423,5003,5035,4747,4814,4661,4462,4516,4221,4111,4053,12515,15781,10499,8175,6831,6287,5990,5590,5148,4760,4809]],"types":{"y0":"line","y1":"line","x":"x"},"names":{"y0":"#0","y1":"#1"},"colors":{"y0":"#3DC23F","y1":"#F34C44"}},{"columns":[["x",1542412800000,1542499200000,1542585600000,1542672000000,1542758400000,1542844800000,1542931200000,1543017600000,1543104000000,1543190400000,1543276800000,1543363200000,1543449600000,1543536000000,1543622400000,1543708800000,1543795200000,1543881600000,1543968000000,1544054400000,1544140800000,1544227200000,1544313600000,1544400000000,1544486400000,1544572800000,1544659200000,1544745600000,1544832000000,1544918400000,1545004800000,1545091200000,1545177600000,1545264000000,1545350400000,1545436800000,1545523200000,1545609600000,1545696000000,1545782400000,1545868800000,1545955200000,1546041600000,1546128000000,1546214400000,1546300800000,1546387200000,1546473600000,1546560000000,1546646400000,1546732800000,1546819200000,1546905600000,1546992000000,1547078400000,1547164800000,1547251200000,1547337600000,1547424000000,1547510400000,1547596800000,1547683200000,1547769600000,1547856000000,1547942400000,1548028800000,1548115200000,1548201600000,1548288000000,1548374400000,1548460800000,1548547200000,1548633600000,1548720000000,1548806400000,1548892800000,1548979200000,1549065600000,1549152000000,1549238400000,1549324800000,1549411200000,1549497600000,1549584000000,1549670400000,1549756800000,1549843200000,1549929600000,1550016000000,1550102400000,1550188800000,1550275200000,1550361600000,1550448000000,1550534400000,1550620800000,1550707200000,1550793600000,1550880000000,1550966400000,1551052800000,1551139200000,1551225600000,1551312000000,1551398400000,1551484800000,1551571200000,1551657600000,1551744000000,1551830400000,1551916800000,1552003200000],["y0",4747,4849,5045,5184,5746,5400,5424,5576,6436,5337,4840,5379,4678,4736,5074,4897,4349,5089,4543,5033,5047,4871,4812,4723,4545,4723,4721,4384,4277,4682,4805,4001,4610,5241,5113,4059,4529,4673,5291,5154,5123,5535,5540,5161,5666,5584,6999,6854,5083,5361,5863,5792,5586,6106,5481,5532,5853,5809,6244,6156,5596,5426,5422,5413,4795,5113,5279,5530,4939,4983,4984,5527,5765,5001,5818,6061,5956,5288,5837,5703,5440,5238,5957,6432,6389,6064,7065,5981,5779,6567,6320,5634,6023,5702,6066,5797,6163,6182,4906,5637,7073,6679,5831,6015,6266,6128,6156,6218,6050,6140,5877,7147],["y1",4605,5036,4956,5168,5008,5069,5223,5360,5695,5209,4796,5028,4931,5123,4987,4964,4982,5037,5050,5144,5049,4971,4911,4792,4562,4597,4759,4761,4646,4543,4597,4428,4213,4270,3961,4784,4699,4711,4855,4717,4563,4923,5041,4895,4877,5001,5410,5033,5045,5184,4976,5207,5354,5205,4887,4831,5083,5148,5369,5176,5022,4880,4969,5135,4836,4764,4782,4783,4646,4755,4744,4932,5059,4851,4614,4718,5018,5034,5223,5007,4839,4763,4761,5048,5330,5106,5956,5135,5006,4919,5511,5114,5122,5314,5089,5022,4918,4986,4626,4675,4951,4921,5173,5145,5209,4967,5030,5120,5030,4946,4795,5224]],"types":{"y0":"line","y1":"line","x":"x"},"names":{"y0":"#0","y1":"#1"},"colors":{"y0":"#3DC23F","y1":"#F34C44"}},{"columns":[["x",1542412800000,1542499200000,1542585600000,1542672000000,1542758400000,1542844800000,1542931200000,1543017600000,1543104000000,1543190400000,1543276800000,1543363200000,1543449600000,1543536000000,1543622400000,1543708800000,1543795200000,1543881600000,1543968000000,1544054400000,1544140800000,1544227200000,1544313600000,1544400000000,1544486400000,1544572800000,1544659200000,1544745600000,1544832000000,1544918400000,1545004800000,1545091200000,1545177600000,1545264000000,1545350400000,1545436800000,1545523200000,1545609600000,1545696000000,1545782400000,1545868800000,1545955200000,1546041600000,1546128000000,1546214400000,1546300800000,1546387200000,1546473600000,1546560000000,1546646400000,1546732800000,1546819200000,1546905600000,1546992000000,1547078400000,1547164800000,1547251200000,1547337600000,1547424000000,1547510400000,1547596800000,1547683200000,1547769600000,1547856000000,1547942400000,1548028800000,1548115200000,1548201600000,1548288000000,1548374400000,1548460800000,1548547200000,1548633600000,1548720000000,1548806400000,1548892800000,1548979200000,1549065600000,1549152000000,1549238400000,1549324800000,1549411200000,1549497600000,1549584000000,1549670400000,1549756800000,1549843200000,1549929600000,1550016000000,1550102400000,1550188800000,1550275200000,1550361600000,1550448000000,1550534400000,1550620800000,1550707200000,1550793600000,1550880000000,1550966400000,1551052800000,1551139200000,1551225600000,1551312000000,1551398400000,1551484800000,1551571200000,1551657600000,1551744000000,1551830400000,1551916800000,1552003200000],["y0",41,31,62,65,66,79,52,26,42,68,71,86,65,54,33,70,52,68,75,92,69,28,33,84,65,56,42,44,26,34,45,49,83,83,66,31,43,55,57,55,54,45,51,64,27,19,38,38,44,49,42,50,60,73,86,65,51,54,48,61,82,83,53,52,48,64,96,103,68,73,58,42,81,80,76,106,93,65,69,104,75,79,92,73,49,63,76,79,83,70,55,47,42,111,93,74,99,107,52,65,80,82,74,154,106,39,40,77,85,66,52,25],["y1",19,10,36,41,28,39,24,16,14,40,39,37,47,28,16,32,25,29,36,45,38,11,25,37,35,22,25,30,16,20,32,34,37,26,31,10,19,32,34,23,25,22,21,18,11,18,18,23,11,18,22,19,27,27,30,25,27,23,28,30,23,31,27,16,30,21,36,33,25,34,16,24,37,33,26,24,31,21,37,32,35,31,30,27,15,17,38,40,32,34,30,17,21,28,36,30,24,25,20,24,22,42,34,47,40,29,29,31,39,30,29,18]],"types":{"y0":"line","y1":"line","x":"x"},"names":{"y0":"#0","y1":"#1"},"colors":{"y0":"#3DC23F","y1":"#F34C44"}},{"columns":[["x",1520035200000,1520121600000,1520208000000,1520294400000,1520380800000,1520467200000,1520553600000,1520640000000,1520726400000,1520812800000,1520899200000,1520985600000,1521072000000,1521158400000,1521244800000,1521331200000,1521417600000,1521504000000,1521590400000,1521676800000,1521763200000,1521849600000,1521936000000,1522022400000,1522108800000,1522195200000,1522281600000,1522368000000,1522454400000,1522540800000,1522627200000,1522713600000,1522800000000,1522886400000,1522972800000,1523059200000,1523145600000,1523232000000,1523318400000,1523404800000,1523491200000,1523577600000,1523664000000,1523750400000,1523836800000,1523923200000,1524009600000,1524096000000,1524182400000,1524268800000,1524355200000,1524441600000,1524528000000,1524614400000,1524700800000,1524787200000,1524873600000,1524960000000,1525046400000,1525132800000,1525219200000,1525305600000,1525392000000,1525478400000,1525564800000,1525651200000,1525737600000,1525824000000,1525910400000,1525996800000,1526083200000,1526169600000,1526256000000,1526342400000,1526428800000,1526515200000,1526601600000,1526688000000,1526774400000,1526860800000,1526947200000,1527033600000,1527120000000,1527206400000,1527292800000,1527379200000,1527465600000,1527552000000,1527638400000,1527724800000,1527811200000,1527897600000,1527984000000,1528070400000,1528156800000,1528243200000,1528329600000,1528416000000,1528502400000,1528588800000,1528675200000,1528761600000,1528848000000,1528934400000,1529020800000,1529107200000,1529193600000,1529280000000,1529366400000,1529452800000,1529539200000,1529625600000,1529712000000,1529798400000,1529884800000,1529971200000,1530057600000,1530144000000,1530230400000,1530316800000,1530403200000,1530489600000,1530576000000,1530662400000,1530748800000,1530835200000,1530921600000,1531008000000,1531094400000,1531180800000,1531267200000,1531353600000,1531440000000,1531526400000,1531612800000,1531699200000,1531785600000,1531872000000,1531958400000,1532044800000,1532131200000,1532217600000,1532304000000,1532390400000,1532476800000,1532563200000,1532649600000,1532736000000,1532822400000,1532908800000,1532995200000,1533081600000,1533168000000,1533254400000,1533340800000,1533427200000,1533513600000,1533600000000,1533686400000,1533772800000,1533859200000,1533945600000,1534032000000,1534118400000,1534204800000,1534291200000,1534377600000,1534464000000,1534550400000,1534636800000,1534723200000,1534809600000,1534896000000,1534982400000,1535068800000,1535155200000,1535241600000,1535328000000,1535414400000,1535500800000,1535587200000,1535673600000,1535760000000,1535846400000,1535932800000,1536019200000,1536105600000,1536192000000,1536278400000,1536364800000,1536451200000,1536537600000,1536624000000,1536710400000,1536796800000,1536883200000,1536969600000,1537056000000,1537142400000,1537228800000,1537315200000,1537401600000,1537488000000,1537574400000,1537660800000,1537747200000,1537833600000,1537920000000,1538006400000,1538092800000,1538179200000,1538265600000,1538352000000,1538438400000,1538524800000,1538611200000,1538697600000,1538784000000,1538870400000,1538956800000,1539043200000,1539129600000,1539216000000,1539302400000,1539388800000,1539475200000,1539561600000,1539648000000,1539734400000,1539820800000,1539907200000,1539993600000,1540080000000,1540166400000,1540252800000,1540339200000,1540425600000,1540512000000,1540598400000,1540684800000,1540771200000,1540857600000,1540944000000,1541030400000,1541116800000,1541203200000,1541289600000,1541376000000,1541462400000,1541548800000,1541635200000,1541721600000,1541808000000,1541894400000,1541980800000,1542067200000,1542153600000,1542240000000,1542326400000,1542412800000,1542499200000,1542585600000,1542672000000,1542758400000,1542844800000,1542931200000,1543017600000,1543104000000,1543190400000,1543276800000,1543363200000,1543449600000,1543536000000,1543622400000,1543708800000,1543795200000,1543881600000,1543968000000,1544054400000,1544140800000,1544227200000,1544313600000,1544400000000,1544486400000,1544572800000,1544659200000,1544745600000,1544832000000,1544918400000,1545004800000,1545091200000,1545177600000,1545264000000,1545350400000,1545436800000,1545523200000,1545609600000,1545696000000,1545782400000,1545868800000,1545955200000,1546041600000,1546128000000,1546214400000,1546300800000,1546387200000,1546473600000,1546560000000,1546646400000,1546732800000,1546819200000,1546905600000,1546992000000,1547078400000,1547164800000,1547251200000,1547337600000,1547424000000,1547510400000,1547596800000,1547683200000,1547769600000,1547856000000,1547942400000,1548028800000,1548115200000,1548201600000,1548288000000,1548374400000,1548460800000,1548547200000,1548633600000,1548720000000,1548806400000,1548892800000,1548979200000,1549065600000,1549152000000,1549238400000,1549324800000,1549411200000,1549497600000,1549584000000,1549670400000,1549756800000,1549843200000,1549929600000,1550016000000,1550102400000,1550188800000,1550275200000,1550361600000,1550448000000,1550534400000,1550620800000,1550707200000,1550793600000,1550880000000,1550966400000,1551052800000,1551139200000,1551225600000,1551312000000,1551398400000,1551484800000,1551571200000,1551657600000,1551744000000,1551830400000,1551916800000,1552003200000,1552089600000],["y0",2298660,2253410,2515820,2506600,2460240,2408400,2317430,2240100,2295900,2609800,2594200,2626400,2615000,2617800,2394500,2391100,2608300,2676000,2637700,2766600,3186500,3067700,2570700,2935000,2949200,2913500,2763600,3216300,2343500,2361000,2580000,2591800,2595200,2569500,2587700,2372500,2351200,2465600,2625100,2651300,2686700,2783300,2417400,2383800,2736300,2751100,2678900,2622300,2586000,2365700,2407700,2541300,2600400,2581500,2576200,2550100,2334500,2139400,2015400,2019900,2210100,2191800,2240700,2107400,2026900,2258000,2255200,2123200,2267800,2236100,2065700,2093300,2315300,2333200,2349800,2318300,2275000,2110300,2077100,2335200,2357400,2350000,2293800,2303600,2118700,2100300,2219700,2361100,2349500,2347800,2318400,2141600,2178600,2432500,2448700,2440300,2450100,2424100,2229900,2152400,2402600,2401000,2418100,2408600,2408400,2212600,2189000,2450800,2444500,2451900,2451000,2442600,2287900,2221100,2451900,2460200,2460900,2319900,2270300,2183800,2195300,2485000,2460900,2500600,2495300,2479100,2290600,2235800,2459900,2484500,2491000,2525600,2477300,2223700,2146700,2528200,2567800,2556300,2540700,2503000,2301200,2251600,2538600,2596500,2553900,2534200,2527300,2337400,2332900,2688500,2585700,2559600,2651600,2586800,2445700,2472300,2633000,2664600,2649400,2648900,2644600,2406400,2426200,2694000,2740600,2711800,2700900,2645800,2422800,2438500,2697500,2712500,2690300,2684400,2517300,2435300,2444300,2781800,2807800,2804500,2771300,2798800,2633300,2597100,2946300,2889800,2949600,2951400,2928800,2701400,2709900,3012900,3019100,2977200,3012400,2989800,2752100,2749100,3033300,3050400,3023800,3066400,3047800,2792200,2799300,3096100,3132500,3082400,3071200,3021400,2818300,2737500,3037800,3123700,3138900,3181800,3118500,2834500,2826900,3171000,3175900,3184300,3195800,3129100,2834100,2876800,3019000,3214000,3227900,3189600,3187800,2886800,2880500,3218200,3253700,3260400,3243300,3204000,2962700,2968600,3282100,3618900,3017000,3037300,3044500,2758900,2784600,3032900,3132400,3075800,3108200,3076200,2851800,2837800,3107500,3146800,3145100,3145300,3158400,2872100,2823800,3190400,3209300,3170800,3195300,3183000,2910300,2937400,3297100,3293600,3278400,3234200,3224000,3013900,2955300,3303900,3323300,3352600,3348400,3340600,3110600,3066400,3409200,3462100,3394200,3383100,3433700,3184000,3092700,3417400,4505200,3094500,3106100,3083200,3005600,2866700,2984100,2954200,3086800,3070500,3040900,2903500,3592500,3316200,2930500,2961900,3009600,3027200,2871600,2831600,2881700,3054200,3116600,3120800,3157300,2950700,2982700,3192800,3223300,3219500,3235900,3214100,3004400,2963500,3280400,3262400,3256000,3258400,3264900,3107500,3057400,3326600,3332400,3357000,3365100,3359500,3127400,3130200,3367100,3422700,3436400,3431100,3600000,3146100,3170900,3467300,3483400,3473600,3454700,3390200,3213600,3188800,3498200,3498600,3493500,3478900,3446400,3239200,3229100,3559600,3563600,3549800,3577300,3524400,3282500,3271300,3599200,3575200,3554400,3540300,3450600,2812000],["y1",1130400,1065370,1211030,1215590,1206540,1206720,1085450,1047320,1071720,1253170,1261050,1264660,1260240,1264840,1130440,1121660,1294120,1290780,1284540,1302860,1296810,1165450,1128830,1302070,1304470,1307090,1268000,1302160,1159330,1163530,1327140,1320680,1319200,1306810,1287990,1121240,1145070,1132400,1310310,1329340,1340060,1333530,1167040,1153260,1356930,1366500,1375970,1378570,1357460,1192240,1188650,1386450,1400570,1395730,1404160,1378120,1195410,1082000,1189660,1197540,1367850,1389070,1386300,1282240,1209450,1409070,1409450,1271120,1424860,1399990,1240640,1248530,1451770,1460240,1466100,1460990,1446730,1268830,1263270,1473530,1476230,1480760,1460520,1454730,1263910,1227240,1303900,1474760,1473400,1477380,1466790,1285620,1280100,1491820,1499660,1496260,1485990,1473140,1301290,1273440,1487420,1494560,1500790,1508660,1489400,1301960,1297680,1501170,1503000,1488980,1501170,1479060,1367980,1296050,1493920,1487830,1479120,1338410,1318550,1266620,1285640,1487970,1489080,1489580,1475400,1471140,1316010,1271940,1476160,1480670,1491030,1480940,1477640,1305750,1296770,1483400,1494440,1495740,1485900,1484400,1319160,1284010,1488140,1502910,1503450,1485410,1498200,1323200,1303150,1506840,1523440,1521490,1516770,1504300,1327520,1307630,1518100,1521370,1521280,1521660,1517700,1349880,1333010,1543800,1553730,1546490,1541710,1532690,1367020,1354040,1560080,1564990,1565050,1561110,1406570,1340850,1368550,1600180,1630760,1621360,1636580,1652580,1489550,1465750,1731080,1730190,1732260,1730210,1724800,1519480,1520490,1758280,1774530,1770690,1781100,1762270,1551690,1541620,1787290,1795490,1802940,1799130,1778850,1560040,1564580,1822410,1819680,1812390,1814100,1798060,1587880,1589320,1833920,1843420,1851460,1845550,1822980,1596860,1595900,1866000,1860480,1862600,1863950,1827540,1585280,1588970,1683930,1879500,1883300,1879040,1846160,1639090,1632580,1895780,1897620,1906000,1906730,1895290,1670120,1670190,1914360,1932890,1933160,1921800,1898720,1673530,1685190,1937730,1951850,1949900,1949020,1923160,1718450,1704040,1964800,1975140,2002510,1985340,1959000,1736810,1727670,2006070,2013910,2012460,1999630,1977020,1754720,1778560,2060360,2057730,2055990,2036720,2027870,1824680,1794140,2067460,2078290,2094100,2080950,2062080,1836850,1828130,2102920,2112450,2098790,2116900,2080290,1863760,1841050,2105790,2106420,2151300,2098890,2085380,1955580,1819790,1916140,1913670,2080350,2058160,2034960,1911480,1823940,2087990,1774260,1833950,1906680,1902490,1760460,1748060,1775740,1974730,2013790,2026250,2022210,1835820,1835930,2096230,2098020,2095770,2114060,2099370,1902800,1854380,2132520,2143600,2146120,2143820,2157910,1929390,1905550,2183760,2185970,2198030,2198160,2182120,1950150,1931800,2215380,2216240,2226480,2220480,2208790,1972190,1957520,2253470,2247170,2245720,2285890,2220730,1986340,1967720,2264340,2270140,2267210,2268950,2246450,2048760,1994100,2288680,2296010,2313730,2311290,2293790,2034250,2025380,2326190,2323990,2320790,2271600,2244270,1663290],["y2",820900,766050,894390,894540,887590,814490,786610,744660,770920,930330,930190,942060,933690,922280,810770,809760,952010,959070,957020,955890,948250,825710,804970,958480,959090,970200,907010,950150,825240,820890,971020,973560,967940,960360,931820,795020,753860,808740,970000,981020,979810,975840,829690,819300,992290,998040,1006540,1013790,995130,848190,851890,1024210,1032210,1032290,1027510,1010090,850110,741740,844400,850410,1006690,1018470,1011630,916990,861050,1039650,1032640,904200,1045560,1022330,888970,896300,1073460,1074860,1074820,1074880,1057340,909410,906710,1078860,1092760,1083360,1078680,1067310,903090,858360,947540,1089590,1095060,1093130,1070660,915380,916530,1108410,1109460,1097230,1094520,1074630,915520,915750,1101730,1104580,1107930,1116850,1106360,928500,928210,1110530,1103230,1099970,1106180,1096060,982050,932620,1100880,1099970,1080040,959480,951360,902160,916070,1094120,1092530,1089290,1081760,1073320,937320,900010,1084910,1082620,1080960,1074050,1077810,925090,913970,1082900,1089240,1088890,1088720,1084170,938750,904060,1091540,1093660,1104520,1085860,1091880,939720,919790,1098590,1110310,1105580,1105220,1096580,940670,923480,1102360,1102760,1102280,1108680,1109210,955490,944730,1125380,1127440,1123070,1123910,1121160,966340,946940,1141980,1146790,1147420,1132920,990870,946370,964610,1171550,1187000,1186370,1199100,1213000,1062280,1035740,1274070,1276740,1280670,1282770,1257200,1085370,1080510,1293120,1308880,1302170,1317570,1298110,1111780,1106410,1317620,1318010,1332680,1328530,1305330,1113540,1119830,1340410,1348770,1346910,1352950,1324040,1139450,1136680,1355970,1364950,1377510,1375770,1338490,1140310,1151830,1374520,1374330,1378990,1372390,1347390,1135560,1121640,1217410,1390340,1392710,1383070,1372400,1170430,1169550,1404540,1412720,1414110,1417200,1388240,1194260,1188850,1416140,1425890,1426380,1410520,1388600,1197940,1197680,1432620,1448350,1436320,1438890,1412650,1222040,1215220,1454190,1456740,1490670,1470910,1438940,1243620,1241210,1483460,1489950,1488440,1482490,1465050,1261450,1281800,1552680,1527050,1526500,1511360,1497560,1302860,1292930,1547830,1550610,1546490,1547790,1525750,1324580,1321580,1576620,1575060,1570240,1574670,1543830,1341780,1341710,1577840,1565630,1580460,1569570,1543390,1431880,1301600,1401500,1401040,1530910,1526670,1498750,1383070,1284000,1401510,1189880,1309810,1380230,1383630,1254140,1216830,1243860,1442240,1481680,1480680,1490700,1315410,1300930,1530520,1532340,1539150,1541510,1532770,1344910,1325530,1563330,1568490,1580110,1575130,1564880,1369810,1359060,1608230,1605640,1605970,1601640,1590810,1381740,1375190,1625850,1621800,1629910,1628510,1609760,1397880,1392180,1647700,1646770,1644200,1667150,1610910,1408450,1395010,1652870,1658870,1660310,1659060,1629490,1435450,1407720,1675610,1682450,1682070,1693010,1669030,1448500,1439490,1710110,1702690,1707000,1662770,1512800,1101660],["y3",409540,377260,456380,460230,452020,389350,397230,369000,382180,473570,477470,477550,478030,466150,397480,406380,494570,494680,482810,487700,475090,400520,397940,484160,487740,493260,434500,475410,398650,404690,491980,493410,485250,484740,465490,377460,353960,396390,493300,497560,495110,485260,394770,402910,500540,506260,509680,514010,494350,405360,412560,513030,521320,515730,518170,499850,394960,328510,406450,408080,501980,507800,496990,442530,414260,525770,513440,442660,526810,500190,426220,436110,546820,543480,545420,540530,527770,431050,443100,549550,551600,548120,542290,528810,435370,407250,463200,553640,554110,555820,536470,440460,447740,563330,561850,556430,550910,539440,441200,442310,563100,563760,559230,570870,555280,447750,455570,564630,562510,556050,555560,556470,484080,451320,561060,553630,540660,473500,472500,438550,447590,548670,549580,539920,541510,540380,450260,432260,535950,545160,543810,536990,539680,446570,444470,543450,549070,547840,541430,540200,450080,431800,549290,545890,556300,536500,543890,450890,440180,550850,554740,553460,553440,546420,446710,436640,553270,547750,551920,547610,545500,449220,447510,560050,561560,561560,556630,559340,461630,456300,569070,574800,575220,566180,472200,450530,462960,590290,597250,592970,604870,613050,512200,495980,649860,645070,636950,647120,630390,518820,525990,661700,659770,660650,669560,644510,529610,539520,673850,668530,673770,669480,654540,536090,548400,690100,684900,687040,685940,666360,560140,553050,696740,694490,703000,697980,674460,548230,557370,697150,700110,701170,695810,669780,543500,540170,597430,711500,699770,698520,682170,568380,572950,715580,716050,720770,720660,695220,572970,578170,722280,724280,727910,719820,699840,580870,586270,729850,733680,726590,731270,709330,593070,600500,743590,743690,767660,747140,730510,607540,610480,762440,772960,763480,758490,741090,614450,645760,831130,792100,780410,778620,761000,643620,650320,802640,805900,803960,800580,783660,648310,668150,825940,818650,816630,821000,782790,657850,671660,817660,816020,821380,816280,800240,712510,648060,711170,709110,802240,792710,772260,691490,636050,649450,566120,651310,701910,702270,627880,605290,621710,744830,762830,765640,764140,648720,642430,786580,778790,780060,789170,772600,652160,648950,795360,802250,808010,801890,793490,669240,665310,814370,810880,814580,813950,802070,670450,674250,823010,820620,821400,820760,804300,681870,681460,831580,835600,835390,840770,810700,675170,680870,832000,836790,845630,844560,821810,690310,683810,851150,848090,846480,858340,831290,696470,695540,866980,868190,861720,834530,706650,439140]],"types":{"y0":"line","y1":"line","y2":"line","y3":"line","x":"x"},"names":{"y0":"#0","y1":"#1","y2":"#2","y3":"#3"},"colors":{"y0":"#cb513a","y1":"#73c03a","y2":"#65b9ac","y3":"#4682b4"}}];

/***/ }),

/***/ "./src/animations.js":
/*!***************************!*\
  !*** ./src/animations.js ***!
  \***************************/
/*! exports provided: main, AnimatedValue, AnimatedArray */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "main", function() { return main; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AnimatedValue", function() { return AnimatedValue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AnimatedArray", function() { return AnimatedArray; });
const FREQ = 50;

function main() {

  var myValue = new AnimatedValue(3, 0.5);

  console.log(myValue);
  myValue.set(4);
  myValue.animate(6, 1);
  console.log('===========', myValue);

}

function AnimatedValue(value, duration) {
  duration = duration || 0.5;
  this.value = value;
  this.duration = duration * 1000;
  this.ease = function(t) {
    return t*(2-t);
  }
}
// AnimatedValue.prototype.set = function(newValue, now=performance.now(), animated=false) {
AnimatedValue.prototype.set = function(newValue, now, animated) {
  now = now || performance.now();
  animated = animated || false;
  // console.log('anim set', newValue);
  if (!animated) { this.value = newValue;return; }
  if (newValue === this.toValue) { return; }



  if (isNaN(this.value)) {
    return;
  }

  this.started = now;
  this.from = this.value;
  this.to = newValue;
  this.nextTick(now);
}
AnimatedValue.prototype.nextTick = function(now, name) {
  if (this.started) {
    var p = (now - this.started)/this.duration;

    // if (name) {
    //   console.log('next tick', name);
    //   console.log(this.value);
    // }

    if (p > 1) p = 1;
    if (p < 0) p = 0;
    this.value = Math.round((this.from + (this.to - this.from) * this.ease(p))*100)/100;

    if (p === 1) this.started = false;
    return true;
  }
  else {
    return false;
  }
};

function AnimatedArray(values) {
  this.values = values;
}
AnimatedArray.prototype.nextTick = function(now) {
  var res = false;
  for (var i = 0; i < this.values.length; i++) {
    if (this.values[i].nextTick(now)) {
      res = true
    }
  }
  return res;
};

// export function AnimatedValue(value, duration=0) {
//   this.value = value;
//   this.duration = duration * 1000;
//   this.isAnimate = false;
// }
//
// AnimatedValue.prototype.set = function(newValue, duration=0) {
//   this.value = newValue;
// }

// AnimatedValue.prototype.animate = function(newValue, duration) {
//   this.from = this.value;
//   this.to = newValue;
//   if (duration) this.duration = duration*1000;
//   this.isAnimate = true;
//
//   var i = 0;
//   var interval = setInterval(() => {
//     if (this.value === this.to) {
//       clearInterval(interval);
//       // if (this.cb) this.cb();
//       this.isAnimate = false;
//       return;
//     }
//     i++;
//     var p = i / (this.duration / FREQ);
//     if (p > 1) p = 1;
//     // TODO Easing here
//     this.value = this.from + (this.to - this.from) * p;
//     // console.log(this.value);
//   }, FREQ);
// }
// export function createAnimationStack() {
//   return {
//     anims: [],
//     add: function(from, to, duration=1, cb) {
//       var a = createAnimation(from, to, duration);
//       a.cb = function() {
//         this.remove(a);
//       }.bind(this);
//       this.anims.push(a);
//     },
//     remove: function(a) {
//       if (this.anims.indexOf(a) !== -1) {
//         this.anims.splice(this.anims.indexOf(a), 1);
//       }
//     },
//     play: function() {
//       for (var i = 0; i < this.anims.length; i++) {
//         this.anims[i].play();
//       }
//     }
//   };
// }

// AnimatedValue.prototype.animate = function(newValue, duration) {
//   this.from = this.value;
//   this.to = newValue;
//   if (duration) this.duration = duration*1000;
//   this.isAnimate = true;
//
//   var start = performance.now();
//
//   function update() {
//     var p = (performance.now() - start) / this.duration;
//     if (p > 1) p = 1;
//     //TODO Eading here
//     this.value = this.from + (this.to - this.from) * p;
//     // console.log(this.value);
//     if (p < 1) requestAnimationFrame(update.bind(this));
//   };
//   requestAnimationFrame(update.bind(this));
// }

// function animateArray(fromA, toA, duration, cb, onFinishCb) {
//   var start = performance.now();
//
//   var A = fromA;
//   function update() {
//     var p = (performance.now() - start) / (duration*1000);
//     if (p > 1) p = 1;
//     A = fromA.map((a, i) => a + (toA[i]-a)*p);
//     cb(A);
//     if (p === 1) {
//       if (onFinishCb) onFinishCb();
//       return;
//     }
//     requestAnimationFrame(update);
//   }
//   requestAnimationFrame(update);
// }


/***/ }),

/***/ "./src/charts/bar-chart.js":
/*!*********************************!*\
  !*** ./src/charts/bar-chart.js ***!
  \*********************************/
/*! exports provided: barChart, BarChart */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "barChart", function() { return barChart; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BarChart", function() { return BarChart; });
/* harmony import */ var _chart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chart */ "./src/charts/chart.js");
/* harmony import */ var _animations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../animations */ "./src/animations.js");
/* harmony import */ var _point_info__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./point-info */ "./src/charts/point-info.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ "./src/utils.js");
/* harmony import */ var _consts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../consts */ "./src/consts.js");






function barChart(container, data, name) {
  var chart = new BarChart(container, data, name);
  return chart;
}

function BarChart(container, data) {
  console.log(data);
  _chart__WEBPACK_IMPORTED_MODULE_0__["ChartBase"].apply(this, arguments);
  this.L++;
  this.init();
}

BarChart.prototype = Object.create(_chart__WEBPACK_IMPORTED_MODULE_0__["ChartBase"].prototype);
BarChart.prototype.constructor = BarChart;

BarChart.prototype.updateDateRange = function () {
  _chart__WEBPACK_IMPORTED_MODULE_0__["ChartBase"].prototype.updateDateRange.call(this, this.startInd, this.endInd-1)
}

BarChart.prototype.initData = function() {
  _chart__WEBPACK_IMPORTED_MODULE_0__["ChartBase"].prototype.initData.call(this, 150);
}

BarChart.prototype.calculateOxLabelsOffsetX = function () {
  this.oxLabelsOffsetX = this.offsetX + this.barWidth/2 - this.labelWidthHalf;
};

BarChart.prototype.calculateValuesMaxY = function() {
  return Object(_utils__WEBPACK_IMPORTED_MODULE_3__["getMax"])(this.columns[0].values.slice(Math.max(0, this.startInd-1), this.endInd+1));
}

BarChart.prototype.drawPreview = function() {
  this.ctx.clearRect(this.previewChartX, this.previewChartY, this.previewChartWidth, this.previewChartHeight);

  this.ctx.beginPath();
  this.ctx.globalAlpha = 1; // FIXME Alpha to const
  this.ctx.fillStyle = this.columns[0].color;

  var X = [];
  for (var i = 0; i < this.oxLabels.length; i++) {
    X.push(Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getScreenXByInd"])(i, this.previewChartStep, this.previewChartX));
  }
  var max = Object(_utils__WEBPACK_IMPORTED_MODULE_3__["getMax"])(this.columns[0].values);
  var Y = Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getYCoords"])(this.previewChartHeight, this.columns[0].values, max).map(y => this.previewChartY + y);

  var barWidth = X[1] - X[0];
  for (var i = 0; i < X.length; i++) {
    this.ctx.rect(X[i], Y[i], barWidth, this.h - Y[i]);
  }
  this.ctx.fill();
}

BarChart.prototype.drawSequence = function () {
  this.drawChartContent();
  this.drawBg();
  this.drawSelected();
};

BarChart.prototype.initButtons = function () {};

BarChart.prototype.drawChartContent = function() {
  this.ctx.beginPath();
  this.ctx.globalAlpha = (this.selectedInd > -1) ? 0.6 : 1; // FIXME Alpha to const
  var barW = Math.round(this.barWidth*this.round)/this.round;
  var sI = Math.max(this.startInd - this.drawIndOffset, 0);
  var eI = Math.min(this.endInd + this.drawIndOffset, this.L);

  var X = [];
  for (var i = sI; i < eI+1; i++) {
    X.push(Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getScreenXByInd"])(i, barW, this.offsetX));
  }

  var Y = Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getYCoords"])(this.bottomY, this.columns[0].values.slice(sI, eI+1), this.gridMaxY.value);
  for (var i = 0; i < X.length; i++) {
    if (i !== this.selectedInd - sI) {
      this.ctx.rect(X[i], Y[i], barW, this.bottomY - Y[i]);
    }
  }
  this.ctx.fillStyle = this.columns[0].color;
  this.ctx.fill();

  if (this.selectedInd > -1) {
    this.drawSelectedChartContent();
  }
}

BarChart.prototype.getIndByScreenX = function (x, step=this.barWidth, offset=this.offsetX) {
  return Math.floor((x - offset)/step);
}

BarChart.prototype.drawSelected = function() {
  if (this.selectedInd >= 0) {
    // this.drawSelectedChartContent();

    this.info.style.left = Math.max(this.selectedScreenX - this.info.offsetWidth - 30, 0) + 'px'; // FIXME this.info margin
    this.info.style.top = Math.max(this.selectedScreenY - this.info.offsetHeight, 0) + 'px';
    this.info.appear();
  }
  else {
    this.info.disappear()
  }
}

BarChart.prototype.drawSelectedChartContent = function () {
  var barW = Math.round(this.barWidth*this.round)/this.round;

  var selectedIndX = this.getScreenXByInd(this.selectedInd);
  var selectedIndY = Math.floor(Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getScreenY"])(this.bottomY, this.columns[0].values[this.selectedInd], this.gridMaxY.value));

  this.ctx.beginPath();
  this.ctx.globalAlpha = 1;
  this.ctx.fillStyle = this.columns[0].color;
  this.ctx.rect(selectedIndX, selectedIndY, barW, this.bottomY - selectedIndY);
  this.ctx.fill();
}


/***/ }),

/***/ "./src/charts/button.js":
/*!******************************!*\
  !*** ./src/charts/button.js ***!
  \******************************/
/*! exports provided: createButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createButton", function() { return createButton; });
function createButton(color, text, onClick) {
  var button = document.createElement('button');
  button.name = text;
  button.isOn = true;
  button.classList.add('chart-button');
  button.classList.add('checkmark');
  button.style.backgroundColor = color;

  var i = document.createElement('img');
  i.setAttribute('src', 'check.svg');
  button.append(i)
  button.append(document.createTextNode(text));

  button.onclick = function() {
    button.isOn = !button.isOn;
    if (!button.isOn) {
      // button.style.borderWidth = '0px';
    }
    if (onClick) onClick(button.name, button.isOn);
  };

  return button;
}


/***/ }),

/***/ "./src/charts/chart.js":
/*!*****************************!*\
  !*** ./src/charts/chart.js ***!
  \*****************************/
/*! exports provided: ChartBase, calculateOffsetX, getScreenXByInd, getIndByScreenX, getYCoords, getScreenY */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChartBase", function() { return ChartBase; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "calculateOffsetX", function() { return calculateOffsetX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getScreenXByInd", function() { return getScreenXByInd; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getIndByScreenX", function() { return getIndByScreenX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getYCoords", function() { return getYCoords; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getScreenY", function() { return getScreenY; });
/* harmony import */ var _preview_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./preview-ui */ "./src/charts/preview-ui.js");
/* harmony import */ var _point_info__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./point-info */ "./src/charts/point-info.js");
/* harmony import */ var _button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./button */ "./src/charts/button.js");
/* harmony import */ var _animations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../animations */ "./src/animations.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils */ "./src/utils.js");
/* harmony import */ var _consts__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../consts */ "./src/consts.js");







function ChartBase(container, data, name) {
  this.container = container;
  this.chartContainer = document.createElement('div');
  this.chartContainer.classList.add('chart');

  this.pixelRatio = window.devicePixelRatio;

  this.w = Math.min(container.getBoundingClientRect().width, _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_MAX_WIDTH"]);
  this.h = 400;

  this.name = name;
  this.chartContainer.style.width = this.w + 'px';
  this.chartContainer.style.position = 'relative';

  this.initHeader();
  this.initCanvas();
  this.initPreviewUI();

  this.previewUILeftX = 0.8; // FIXME Move to chart initial data
  this.previewUIRightX = 1; // FIXME Move to chart initial data

  this.data = data;

  this.info;
  this.round = 1000;

  this.initData();
  this.L = this.oxLabels.length - 1; // FIXME Rename

  this.addListeners();

  container.append(this.chartContainer);
}

ChartBase.prototype.addListeners = function () {
  window.addEventListener('resize', Object(_utils__WEBPACK_IMPORTED_MODULE_4__["debounce"])(this.onResize, 20).bind(this));
}

ChartBase.prototype.switchMode = function (isDay=true) {
  if (isDay) {
    this.previewUI.switchTheme(_consts__WEBPACK_IMPORTED_MODULE_5__["PREVIEW_DAY_THEME"]);
    this.initColors(_consts__WEBPACK_IMPORTED_MODULE_5__["CHART_DAY_THEME"]);
    this.header.style.color = _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_DAY_THEME"].chartTitleColor;
    this.info.style.backgroundColor = _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_DAY_THEME"].infoBackgroundColor;
    this.info.style.color = _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_DAY_THEME"].infoTextColor;
  }
  else {
    this.previewUI.switchTheme(_consts__WEBPACK_IMPORTED_MODULE_5__["PREVIEW_NIGHT_THEME"]);
    this.initColors(_consts__WEBPACK_IMPORTED_MODULE_5__["CHART_NIGHT_THEME"]);
    this.header.style.color = _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_NIGHT_THEME"].chartTitleColor;
    this.info.style.backgroundColor = _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_NIGHT_THEME"].infoBackgroundColor;
    this.info.style.color = _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_NIGHT_THEME"].infoTextColor;
  }
  this.draw();
}

ChartBase.prototype.initColors = function (theme) {
  this.gridLinesColor = theme.gridLinesColor;
  this.gridTextsColor = theme.gridTextsColor;
  this.chartTitleColor = theme.chartTitleColor;
};

ChartBase.prototype.initCanvas = function () {
  this.canvas = document.createElement('canvas');
  this.canvas.width = this.w * this.pixelRatio;
  this.canvas.height = this.h * this.pixelRatio;
  this.canvas.style.width = this.w + 'px';
  this.canvas.style.height = this.h + 'px';

  this.canvas.onmouseenter = this.onMouseEnter.bind(this);
  this.chartContainer.append(this.canvas);
  this.ctx = this.canvas.getContext('2d');
  this.ctx.scale(this.pixelRatio, this.pixelRatio);
}

ChartBase.prototype.onActionUpdate = function(action) {
  this.previewUIState = action;
  this.startUpdate();
}

ChartBase.prototype.initPreviewUI = function () {
  this.previewUI = Object(_preview_ui__WEBPACK_IMPORTED_MODULE_0__["preview"])(this.w - _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"]*2, _consts__WEBPACK_IMPORTED_MODULE_5__["PREVIEW_HEIGHT"], this.pixelRatio, this.onActionUpdate.bind(this));
  this.previewUI.style.position = 'absolute';
  this.previewUI.style.top = this.h - _consts__WEBPACK_IMPORTED_MODULE_5__["PREVIEW_INNER_MARGIN_TOP"] + 'px';
  this.previewUI.style.left = _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"] + 'px';

  this.previewUIState = null;

  this.chartContainer.append(this.previewUI);
}

ChartBase.prototype.updateWidth = function() {
  this.canvas.width = this.w * this.pixelRatio;
  this.canvas.height = this.h * this.pixelRatio;
  this.canvas.style.width = this.w + 'px'
  this.ctx.scale(this.pixelRatio, this.pixelRatio);

  this.previewUI.updateWidth(this.w - _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"]*2, this.pixelRatio);

  this.header.style.width = this.w - _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"]*2 + 'px';
  this.gridWidth = this.w - _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"]*2;
  this.countOnScreen = this.w/this.oxLabelWidth;
  this.previewChartWidth = this.w - _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"]*2;
  this.previewChartStep = Math.round((this.previewChartWidth/(this.L))*this.round)/this.round;
  if (this.buttonsContainer) {
    this.buttonsContainer.style.width = this.w - _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"]*2 + 'px';
  }

  this.needDrawPreview = true;
  this.update();
}

ChartBase.prototype.updateHeight = function () {
  this.previewUI.style.top = this.h - _consts__WEBPACK_IMPORTED_MODULE_5__["PREVIEW_CHART_HEIGHT"] - _consts__WEBPACK_IMPORTED_MODULE_5__["PREVIEW_INNER_MARGIN_TOP"] + 'px';
  this.canvas.height = this.h;

  this.bottomY = this.h - _consts__WEBPACK_IMPORTED_MODULE_5__["OXLABELS_HEIGHT"] - _consts__WEBPACK_IMPORTED_MODULE_5__["PREVIEW_CHART_HEIGHT"] - _consts__WEBPACK_IMPORTED_MODULE_5__["PREVIEW_CHART_MARGIN"];
  this.oxLabelsBottomY = this.h - _consts__WEBPACK_IMPORTED_MODULE_5__["PREVIEW_CHART_HEIGHT"] - _consts__WEBPACK_IMPORTED_MODULE_5__["PREVIEW_CHART_MARGIN"];
  this.previewChartY = this.h - _consts__WEBPACK_IMPORTED_MODULE_5__["PREVIEW_CHART_HEIGHT"] + 1;
};

ChartBase.prototype.onResize = function(e) {
  var newWidth = this.container.getBoundingClientRect().width;
  var newHeight = this.container.getBoundingClientRect().height;

  newWidth = Math.min(newWidth, _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_MAX_WIDTH"]);
  newHeight = Math.min(newHeight, _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_MAX_HEIGHT"]);
  newHeight = Math.max(newHeight, _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_MIN_HEIGHT"]);

  if (newWidth !== this.w || this.pixelRatio !== window.devicePixelRatio) {
    this.pixelRatio = window.devicePixelRatio;
    this.w = newWidth;
    this.updateWidth();
  }

  if (newHeight !== this.h) { }

};

ChartBase.prototype.initHeader = function () {
  this.header = document.createElement('div');
  this.header.classList.add('chart-header');
  this.header.style.width = this.w - _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"]*2 + 'px';
  this.header.style.height = _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_HEADER_HEIGHT"] + 'px';
  // header.style.marginLeft = CHART_GRID_PADDING + 'px';
  this.header.style.margin = '0 0 ' + _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_HEADER_MARGIN_BOTTOM"] + 'px ' + _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"] + 'px';

  var title = document.createElement('h4');
  title.innerHTML = this.name + ' ' + this.pixelRatio;
  this.header.append(title);

  this.dateRange = document.createElement('h5');
  // this.dateRange.id = this.name + 'date-range';
  this.dateRange.innerHTML = 'Sat, 11 Apr 2020 - Mon, 12 Mar 2021'; // FIXME Init with initial data
  this.header.append(this.dateRange);

  this.chartContainer.append(this.header);
}

ChartBase.prototype.updateDateRange = function (sI=this.startInd, eI=this.endInd) {
  this.dateRange.innerHTML = Object(_utils__WEBPACK_IMPORTED_MODULE_4__["createLabelFromDate"])(this.dateColumn[sI], true) + ' - ' + Object(_utils__WEBPACK_IMPORTED_MODULE_4__["createLabelFromDate"])(this.dateColumn[eI], true);
}

ChartBase.prototype.initData = function(dataLength=Number.POSITIVE_INFINITY) {
  this.dateColumn = Object(_utils__WEBPACK_IMPORTED_MODULE_4__["getDataColumnByName"])('x', this.data.columns);
  this.oxLabels = this.dateColumn.slice(0, dataLength).map(date => Object(_utils__WEBPACK_IMPORTED_MODULE_4__["createLabelFromDate"])(date));

  this.columnNames = Object.keys(this.data.names); // FIXME Remove
  this.columns = [];
  for (var i = 0; i < this.columnNames.length; i++) {
    this.columns.push({
      id: this.columnNames[i],
      name: this.data.names[this.columnNames[i]],
      isOn: true,
      color: this.data.colors[this.columnNames[i]],
      alpha: new _animations__WEBPACK_IMPORTED_MODULE_3__["AnimatedValue"](1, _consts__WEBPACK_IMPORTED_MODULE_5__["Y_ANIMATION_TIME"]),
      values: Object(_utils__WEBPACK_IMPORTED_MODULE_4__["getDataColumnByName"])(this.columnNames[i], this.data.columns).slice(0, dataLength)
    });
  }
}

ChartBase.prototype.init = function() {
  this.initDrawProps();
  this.initOxProps();
  this.initOyProps();
  this.initPreviewChartProps();

  // this.drawpreview();
  this.initInfo();
  this.initButtons();
  this.update();
}

ChartBase.prototype.initDrawProps = function() {
  this.initColors(_consts__WEBPACK_IMPORTED_MODULE_5__["CHART_DAY_THEME"]);

  this.mouseX = null;
  this.mouseY = null;

  this.drawIndOffset = 10;

  this.bottomY = this.h - _consts__WEBPACK_IMPORTED_MODULE_5__["OXLABELS_HEIGHT"] - _consts__WEBPACK_IMPORTED_MODULE_5__["PREVIEW_CHART_HEIGHT"] - _consts__WEBPACK_IMPORTED_MODULE_5__["PREVIEW_CHART_MARGIN"]; // FIXME rename to mainChartY
  this.oxLabelsBottomY = this.h - _consts__WEBPACK_IMPORTED_MODULE_5__["PREVIEW_CHART_HEIGHT"] - _consts__WEBPACK_IMPORTED_MODULE_5__["PREVIEW_CHART_MARGIN"]; // FIXME rename to oxLabelsY

  this.needRedraw = true;
  this.needDrawPreview = true;

  this.gridWidth = this.w - _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"]*2;

  this.barWidth = 0; // FIXME rename to step
  this.offsetX = 0;

  this.oldRangeX = 0;
  this.currRangeX = 1;

  this.startInd = 0;
  this.endInd = 0;
  this.selectedInd = -1;
  this.selectedScreenX = 0;
  this.selectedScreenY = 0;
}

ChartBase.prototype.initOxProps = function() {
  this.oxLabelWidth = 50;
  this.labelWidthHalf = 15; // FIXME Rename
  this.oxLabelsOffsetX = 0;

  this.countOnScreen = this.w/this.oxLabelWidth;
  this.currOxLabelsStep = 1;
  this.staticOxLabels = { step: 1, lastInd: 0, alpha: new _animations__WEBPACK_IMPORTED_MODULE_3__["AnimatedValue"](1, _consts__WEBPACK_IMPORTED_MODULE_5__["OX_LABELS_ANIMATION_DURATION"]) };
  this.dynamicOxLabels = { step: 1, lastInd: 0, alpha: new _animations__WEBPACK_IMPORTED_MODULE_3__["AnimatedValue"](1, _consts__WEBPACK_IMPORTED_MODULE_5__["OX_LABELS_ANIMATION_DURATION"]) };
}

ChartBase.prototype.initOyProps = function() {
  this.gridStepY = 0;
  this.gridMaxY = new _animations__WEBPACK_IMPORTED_MODULE_3__["AnimatedValue"](0, _consts__WEBPACK_IMPORTED_MODULE_5__["Y_ANIMATION_TIME"]);

  this.gridLinesHeight = Math.round(this.bottomY / _consts__WEBPACK_IMPORTED_MODULE_5__["GRID_LINES_COUNT"]);
  this.oldOyLabels = {
    alpha: new _animations__WEBPACK_IMPORTED_MODULE_3__["AnimatedValue"](0, _consts__WEBPACK_IMPORTED_MODULE_5__["Y_ANIMATION_TIME"]),
    offsetY: this.gridLinesHeight/2,
    labels: [0, 1, 2, 3, 4, 5, 6]
  };
  this.newOyLabels = {
    alpha: new _animations__WEBPACK_IMPORTED_MODULE_3__["AnimatedValue"](1, _consts__WEBPACK_IMPORTED_MODULE_5__["Y_ANIMATION_TIME"]),
    offsetY: -this.gridLinesHeight/2,
    labels: [0, 1, 2, 3, 4, 5]
  };
}

ChartBase.prototype.initPreviewChartProps = function() {
  this.previewChartX = _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"];
  this.previewChartY = this.h - _consts__WEBPACK_IMPORTED_MODULE_5__["PREVIEW_CHART_HEIGHT"] + 1;
  this.previewChartWidth = this.w - _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"]*2;
  this.previewChartHeight = _consts__WEBPACK_IMPORTED_MODULE_5__["PREVIEW_CHART_HEIGHT"];
  this.previewChartStep = Math.round((this.previewChartWidth/(this.L))*this.round)/this.round;
}

ChartBase.prototype.initInfo = function() {
  this.info = Object(_point_info__WEBPACK_IMPORTED_MODULE_1__["createInfo"])();
  for (var i = 0; i < this.columns.length; i++) {
    this.info.addRow(this.columns[i].name, 0, this.columns[i].color);
  }
  this.chartContainer.append(this.info);
}

ChartBase.prototype.select = function(x, y) {
  this.selectedScreenX = x;
  this.selectedScreenY = y;
  this.selectedInd = this.getIndByScreenX(x);
  this.info.setTitle(Object(_utils__WEBPACK_IMPORTED_MODULE_4__["createLabelFromDate"])(this.dateColumn[this.selectedInd], true));
  this.columns.filter(c => c.isOn).forEach(c => {
    this.info.setRowValue(c.name, c.values[this.selectedInd]);
  });
}

ChartBase.prototype.drawBg = function() {
  this.drawOxLabels(this.staticOxLabels, this.oxLabels.length - 1);
  this.drawOxLabels(this.dynamicOxLabels, this.oxLabels.length - 1 - Math.floor(this.dynamicOxLabels.step/2)); //  -
  this.drawOyLabels(this.oldOyLabels);
  this.drawOyLabels(this.newOyLabels);
  this.drawZeroLine();
}

ChartBase.prototype.drawZeroLine = function () {
  this.ctx.beginPath();
  this.ctx.globalAlpha = 1;
  this.ctx.fillText(0, _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"], this.bottomY + _consts__WEBPACK_IMPORTED_MODULE_5__["OY_LABELS_MARGIN_TOP"]);
  this.ctx.moveTo(_consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"], this.bottomY + 0.5);
  this.ctx.lineTo(this.w - _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"], this.bottomY + 0.5);
  this.ctx.stroke();
};

ChartBase.prototype.calculateOxLabelsOffsetX = function () {
  this.oxLabelsOffsetX = this.offsetX - this.labelWidthHalf;
};

ChartBase.prototype.drawOxLabels = function(oxLabelsProps, lastInd) {
  if (oxLabelsProps.alpha.value <= 0) return;

  while(lastInd > this.endInd) lastInd -= oxLabelsProps.step;

  this.ctx.beginPath();
  this.ctx.globalAlpha = oxLabelsProps.alpha.value;
  this.ctx.fillStyle = this.gridTextsColor;

  for (var i = lastInd; i >= this.startInd; i-=oxLabelsProps.step) {
    this.ctx.fillText(this.oxLabels[i], Math.floor(i * this.barWidth + this.oxLabelsOffsetX), this.oxLabelsBottomY - _consts__WEBPACK_IMPORTED_MODULE_5__["OXLABELS_HEIGHT"]/2);
  }
}

ChartBase.prototype.updateOxLabels = function() {
  var step = Math.max(1, (this.endInd - this.startInd + 1) / this.countOnScreen); // FIXME  range  ,     
  var p = 1;
  while (step > p) p *= 2;
  step = p;

  if (step === this.currOxLabelsStep) return false;

  var now = performance.now();

  if (step > this.currOxLabelsStep) {
    this.currOxLabelsStep *= 2;
    this.dynamicOxLabels.alpha.set(1);
    this.dynamicOxLabels.alpha.set(0, now, true);
    this.staticOxLabels.step = this.currOxLabelsStep;
    this.dynamicOxLabels.step = this.currOxLabelsStep;
  }
  else if (step < this.currOxLabelsStep) {
    this.dynamicOxLabels.alpha.set(0);
    this.dynamicOxLabels.alpha.set(1, now, true);
    this.staticOxLabels.step = this.currOxLabelsStep;
    this.dynamicOxLabels.step = this.currOxLabelsStep;
    this.currOxLabelsStep /= 2;
  }

  return true;
}

ChartBase.prototype.drawOyLabels = function(oyLabels) {
  if (oyLabels.alpha.value <= 0) return;
  this.ctx.globalAlpha = oyLabels.alpha.value;
  this.ctx.strokeStyle = this.gridLinesColor;
  this.ctx.fillStyle = this.gridTextsColor;
  this.ctx.lineWidth = 1;
  this.ctx.beginPath();

  var offset = Math.round(
    oyLabels.labels.length * this.gridLinesHeight + oyLabels.offsetY*(1-oyLabels.alpha.value)
  );

  for (var i = 1; i < oyLabels.labels.length; i++) {
    var y = offset - i * this.gridLinesHeight;

    this.ctx.fillText(
      oyLabels.labels[i],
      _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"],
      y + _consts__WEBPACK_IMPORTED_MODULE_5__["OY_LABELS_MARGIN_TOP"]
    );
    y -= 0.5;
    this.ctx.moveTo(_consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"], y);
    this.ctx.lineTo(this.w - _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"], y);
  }
  this.ctx.stroke();
}

ChartBase.prototype.initButtons = function() {
  this.buttonsContainer = document.createElement('div');
  this.buttonsContainer.style.width = this.w - _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"]*2 + 'px';
  this.buttonsContainer.style.marginLeft = _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"] + 'px';
  this.buttonsContainer.classList.add('buttons-container');

  for (var i = 0; i < this.columns.length; i++) {
    var b = Object(_button__WEBPACK_IMPORTED_MODULE_2__["createButton"])(this.columns[i].color, this.columns[i].name, function(name, isOn) {
      this.buttonClicked(name, isOn);
    }.bind(this));
    this.buttonsContainer.append(b);
  }

  this.chartContainer.append(this.buttonsContainer);
}

ChartBase.prototype.buttonClicked = function() {}

ChartBase.prototype.drawFrame = function() {
  // this.ctx.beginPath();
  // this.ctx.strokeStyle = '#000000'
  // this.ctx.rect(0, 0, this.w, this.bottomY);
  // this.ctx.stroke()
}

ChartBase.prototype.drawSequence = function() {
  this.drawBg();
  this.drawChartContent();
  this.drawSelected();
}


ChartBase.prototype.drawSelectedChartContent = function () {}

ChartBase.prototype.drawSelected = function() {
  if (this.selectedInd >= 0) {
    this.drawSelectedChartContent();

    this.info.style.left = Math.max(this.selectedScreenX - this.info.offsetWidth - 30, 0) + 'px'; // FIXME this.info margin
    this.info.style.top = Math.max(this.selectedScreenY - this.info.offsetHeight, 0) + 'px';
    this.info.appear();
  }
  else {
    this.info.disappear()
  }
}

ChartBase.prototype.checkRedrawBg = function(now) {
  if (this.gridMaxY.nextTick(now)) this.needRedraw = true;
  if (this.oldOyLabels.alpha.nextTick(now)) this.needRedraw = true;
  if (this.newOyLabels.alpha.nextTick(now)) this.needRedraw = true;
  if (this.dynamicOxLabels.alpha.nextTick(now)) this.needRedraw = true;
}

ChartBase.prototype.checkRedrawChartsContent = function(now) {
  for (var i = 0; i < this.columns.length; i++) {
    if (this.columns[i].alpha.nextTick(now)) {
      this.needRedraw = this.needDrawPreview = true;
    }
  }
}

ChartBase.prototype.drawChartContent = function() {}

ChartBase.prototype.clearDrawPreview = function() {
  this.ctx.clearRect(this.previewChartX-2, this.previewChartY, this.previewChartWidth+4, this.previewChartY);
}

ChartBase.prototype.calculateValuesMaxY = function() {
  var t = Object(_utils__WEBPACK_IMPORTED_MODULE_4__["getMatrixMax"])(this.columns.filter(c => c.isOn).map(c => c.values.slice(this.startInd, this.endInd+1)));
  return Object(_utils__WEBPACK_IMPORTED_MODULE_4__["getMatrixMax"])(this.columns.filter(c => c.isOn).map(c => c.values.slice(this.startInd, this.endInd+1)));
}

ChartBase.prototype.updateY = function () {
  var maxY = this.calculateValuesMaxY();
  var newGridStepY = Object(_utils__WEBPACK_IMPORTED_MODULE_4__["getStepForGridValues"])(maxY);

  if (this.gridStepY !== newGridStepY) {
    var now = performance.now();

    this.gridMaxY.set(newGridStepY*6, now, true);

    if (
      (this.oldOyLabels.offsetY > 0 && this.gridStepY > newGridStepY) ||
      (this.oldOyLabels.offsetY < 0 && this.gridStepY < newGridStepY)
    ) {
      this.oldOyLabels.offsetY *= -1;
      this.newOyLabels.offsetY *= -1;
    }

    this.gridStepY = newGridStepY;

    this.oldOyLabels.alpha.set(1);
    this.oldOyLabels.alpha.set(0, now, true);
    this.newOyLabels.alpha.set(0);
    this.newOyLabels.alpha.set(1, now, true);

    this.oldOyLabels.labels = this.newOyLabels.labels;
    this.newOyLabels.labels = [0, 1, 2, 3, 4, 5].map(n => n*newGridStepY);
  }
};

ChartBase.prototype.onMouseEnter = function(e) {
  this.canvas.onmousemove = this.onMouseMove.bind(this);
  this.canvas.onmouseleave = this.onMouseLeave.bind(this);
}

ChartBase.prototype.onMouseMove = function (e) {
  if (e.layerY <= this.bottomY) {
    if (e.layerX > _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"] && e.layerX < this.w - _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"]) {
      this.mouseX = e.layerX;
      this.mouseY = e.layerY;
    }
  }
  else {
    this.selectedInd = -1;
  }

  if (this.previewUIState < 1) {
    this.startUpdate();
  }
}

ChartBase.prototype.onMouseLeave = function () {
  this.selectedInd = -1;
  this.canvas.onmousemove = null;
  this.canvas.onmouseleave = null;

  this.mouseX = null;
  this.mouseY = null;

  if (this.previewUIState < 1) {
    this.startUpdate();
  }
}

ChartBase.prototype.getScreenXByInd = function (i, step=this.barWidth, offset=this.offsetX) {
  return i*step + offset;
};

ChartBase.prototype.getIndByScreenX = function (x, step=this.barWidth, offset=this.offsetX) {
  return Math.round((x - offset)/step);
};

ChartBase.prototype.update = function() {
  requestAnimationFrame(function() {

  if (this.previewUIState > 0) {
    var state = this.previewUI.update();

    if (this.previewUILeftX !== state.left || this.previewUIRightX !== state.right) {
      this.previewUILeftX = state.left;
      this.previewUIRightX = state.right;
    }
  }

  this.startInd = Math.max(Math.ceil(this.previewUILeftX * this.L) - 1, 0);
  this.endInd = Math.ceil(this.previewUIRightX * this.L);
  this.barWidth = this.gridWidth/(this.L*(this.previewUIRightX-this.previewUILeftX));
  this.offsetX = calculateOffsetX(this.gridWidth, _consts__WEBPACK_IMPORTED_MODULE_5__["CHART_GRID_PADDING"], this.previewUILeftX, this.previewUIRightX);

  this.updateDateRange();
  this.calculateOxLabelsOffsetX();
  this.updateY();

  if (this.mouseX) { // FIXME Move to drawSelected
    this.select(this.mouseX, this.mouseY)
  }

  // ------------------- DRAW -------------------

  this.ctx.clearRect(0, 0, this.w, this.previewChartY);

  var now = performance.now();
  this.needRedraw = false;

  if (this.updateOxLabels()) this.needRedraw = true;
  this.checkRedrawBg(now);
  this.checkRedrawChartsContent(now);

  this.drawSequence();

  if (this.needDrawPreview) {
    this.needDrawPreview = false;
    this.drawPreview();
  }

  if (this.needRedraw || this.previewUIState > 0) {
    this.update();
  }

  }.bind(this));
}

ChartBase.prototype.startUpdate = function () {
  if (!this.needRedraw) {
    this.needRedraw = true;
    this.update();
  }
};

function calculateOffsetX(w, padding, left, right) {
  return w + padding - right*w/(right-left);
}

function getScreenXByInd(i, step, offset=0) {
  return i*step + offset;
}

function getIndByScreenX(x, step, offset=0) {
  return Math.round((x - offset)/step);
}

function getYCoords(height, Y, max) {
  var coords = []
  for (var i = 0; i < Y.length; i++) {
    coords.push(Math.floor(height - (Y[i]/max) * height));
  }
  return coords;
}

function getScreenY(height, y, max) {
  var screenY = height - y*height/max;
  return Math.floor(screenY);
}


/***/ }),

/***/ "./src/charts/line-chart.js":
/*!**********************************!*\
  !*** ./src/charts/line-chart.js ***!
  \**********************************/
/*! exports provided: lineChart, LineChart */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lineChart", function() { return lineChart; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LineChart", function() { return LineChart; });
/* harmony import */ var _chart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chart */ "./src/charts/chart.js");
/* harmony import */ var _animations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../animations */ "./src/animations.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ "./src/utils.js");
/* harmony import */ var _consts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../consts */ "./src/consts.js");





function lineChart(container, data, name) {
  var chart = new LineChart(container, data, name);
  return chart;
}

function LineChart(container, data) {
  console.log(data);
  _chart__WEBPACK_IMPORTED_MODULE_0__["ChartBase"].apply(this, arguments);
  this.init();
}

LineChart.prototype = Object.create(_chart__WEBPACK_IMPORTED_MODULE_0__["ChartBase"].prototype);
LineChart.prototype.constructor = LineChart;

LineChart.prototype.initData = function() {
  _chart__WEBPACK_IMPORTED_MODULE_0__["ChartBase"].prototype.initData.call(this);
}

LineChart.prototype.initOyProps = function() {
  _chart__WEBPACK_IMPORTED_MODULE_0__["ChartBase"].prototype.initOyProps.apply(this);

  this.gridPreviewMaxY = new _animations__WEBPACK_IMPORTED_MODULE_1__["AnimatedValue"](0, _consts__WEBPACK_IMPORTED_MODULE_3__["Y_ANIMATION_TIME"]);
  this.gridPreviewMaxY.set(this.calculateGridPreviewMaxY(), performance.now(), true);
}

LineChart.prototype.calculateGridPreviewMaxY = function () {
  return Object(_utils__WEBPACK_IMPORTED_MODULE_2__["getMatrixMax"])(this.columns.filter(c => c.isOn).map(c => c.values));
}

LineChart.prototype.buttonClicked = function(name, isOn) {
  var now = performance.now();
  for (var i = 0; i < this.columns.length; i++) {
    if (this.columns[i].name === name) {
      if (isOn) {
        this.columns[i].alpha.set(1, now, true);
        this.info.enableRow(this.columns[i].name);
      }
      else {
        this.columns[i].alpha.set(0, now, true);
        this.info.disableRow(this.columns[i].name);
      }
      this.columns[i].isOn = isOn;

      this.gridPreviewMaxY.set(Math.max(this.calculateGridPreviewMaxY(), 0), now, true);

      this.update();
    }
  }
}

LineChart.prototype.checkRedrawChartsContent = function(now) {
  _chart__WEBPACK_IMPORTED_MODULE_0__["ChartBase"].prototype.checkRedrawChartsContent.call(this, now);

  if (this.gridPreviewMaxY.nextTick(now)) this.needDrawPreview = true;
}

LineChart.prototype.drawChartContent = function() {
  var barW = Math.round(this.barWidth*this.round)/this.round;
  var sI = Math.max(this.startInd - this.drawIndOffset, 0);
  var eI = Math.min(this.endInd + this.drawIndOffset, this.L);

  // var sI = Math.max(this.startInd - 1, 0);
  // var eI = Math.min(this.endInd + 1, this.L);

  var X = [];
  for (var i = sI; i < eI+1; i++) {
    X.push(Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getScreenXByInd"])(i, barW, this.offsetX));
  }

  for (var i = 0; i < this.columns.length; i++) {
    var Y = Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getYCoords"])(this.bottomY, this.columns[i].values.slice(sI, eI+1), this.getGridMaxForColumn(this.columns[i]));
    this.drawLine(X, Y, this.columns[i].color, this.columns[i].alpha.value);
  }
}

LineChart.prototype.getGridMaxForColumn = function(column) {
  return this.gridMaxY.value;
};

LineChart.prototype.drawLine = function(X, Y, color, alpha, lineWidth) {
  if (alpha > 0) {
    alpha = alpha || 1;
    lineWidth = lineWidth || 2;
    this.ctx.beginPath();
    this.ctx.globalAlpha = alpha;
    this.ctx.strokeStyle = color;
    this.ctx.lineCap = 'round';
    this.ctx.lineJoin = 'round';
    this.ctx.lineWidth = lineWidth;

    this.ctx.moveTo(X[0], Y[0]);
    for (let i=1; i < X.length; i++) {
      this.ctx.lineTo(X[i], Y[i]);
    }
    this.ctx.stroke();
  }
}

LineChart.prototype.drawSelectedChartContent = function() {
  // if (this.selectedInd > 0) {

    var barW = Math.round(this.barWidth*this.round)/this.round;
    var selectedIndX = Math.floor(this.getScreenXByInd(this.selectedInd, barW));
    var maxScreenY = 0;

    // console.log('selected');

    var ind = this.selectedInd - this.startInd;
    var filteredColumns = this.columns.filter(c => c.isOn);

    this.ctx.beginPath();
    this.ctx.globalAlpha = 1;
    this.ctx.strokeStyle = this.gridLinesColor;
    this.ctx.lineWidth = 1;
    this.ctx.moveTo(this.selectedScreenX + 0.5, 0);
    this.ctx.lineTo(this.selectedScreenX + 0.5, this.bottomY);
    this.ctx.stroke();

    this.ctx.beginPath();
    this.ctx.fillStyle = '#FFFFFF'; // FIXME Color
    filteredColumns.forEach(c => {
      var y = Math.floor(Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getScreenY"])(this.bottomY, c.values[this.selectedInd], this.getGridMaxForColumn(c)));
      if (y > maxScreenY) maxScreenY = y;

      this.ctx.arc(
        selectedIndX,
        y,
        5.5, // FIXME Radius to const
        0,
        2 * Math.PI
      );
    });
    this.ctx.fill();

    filteredColumns.forEach(c => {
      this.ctx.beginPath();
      this.ctx.lineWidth = 2;
      this.ctx.strokeStyle = this.data.colors[c.id];
      this.ctx.arc(
        selectedIndX,
        Math.floor(Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getScreenY"])(this.bottomY, c.values[this.selectedInd], this.getGridMaxForColumn(c))),
        5.5,
        0,
        2 * Math.PI
      );
      this.ctx.stroke();
      this.ctx.closePath();
    });
}

LineChart.prototype.getGridMaxForColumnPreview = function(column) {
  return this.gridPreviewMaxY.value;
};

LineChart.prototype.drawPreview = function() {
  this.clearDrawPreview();

  var X = [];
  for (var i = 0; i < this.oxLabels.length; i++) {
    X.push(Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getScreenXByInd"])(i, this.previewChartStep, this.previewChartX));
  }
  X[0] += 1
  X[X.length-1] -= 1;

  this.ctx.beginPath();
  for (var i = 0; i < this.columns.length; i++) {
    var Y = Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getYCoords"])(this.previewChartHeight, this.columns[i].values, this.getGridMaxForColumnPreview(this.columns[i]))
    // .map(y => this.previewChartY + y);
    .map(y => Math.max(this.previewChartY + y, this.previewChartY));

    this.drawLine(X, Y, this.columns[i].color, this.columns[i].alpha.value, 1);
  }
}


/***/ }),

/***/ "./src/charts/point-info.js":
/*!**********************************!*\
  !*** ./src/charts/point-info.js ***!
  \**********************************/
/*! exports provided: createInfo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createInfo", function() { return createInfo; });
const INFO_ANIMATION_TIME = 0.3;

function createInfo(name) {
  var container = document.createElement('div');
  // container.style.position = 'absolute';
  container.classList.add('point-info');
  container.style.transition = 'opacity ' + INFO_ANIMATION_TIME + 's';
  container.style.opacity = 0;
  container.style.display = 'none';
  container.isOn = false;

  // container.style.backgroundColor = 'red';

  var title = document.createElement('h4');
  title.classList.add('point-info-title');
  title.innerHTML = 'Title';

  container.appear = function() {
    container.isOn = true;
    container.style.display = 'block';

    setTimeout(function() {
      container.style.opacity = 1;
    }, 0)
  }

  container.disappear = function() {
    if (container.isOn) {
      container.isOn = false;
      container.style.opacity = 0;
      setTimeout(function() {
        container.style.display = 'none';
      }, INFO_ANIMATION_TIME * 1000)
    }
  }

  container.setTitle = function(text) {
    title.innerHTML = text;
  }

  // container.getWidth = function() {
  //   return conatinergetCli
  // }
  var rows = {};

  container.addRow = function(text, value, color='black') {
    var newRow = document.createElement('div');
    newRow.id = 'row' + text;
    newRow.classList.add('point-info-row')

    var textSpan = document.createElement('span');
    textSpan.innerHTML = text;

    var valueSpan = document.createElement('span');
    valueSpan.classList.add('point-info-row-value')
    valueSpan.id = text;
    valueSpan.style.color = color;
    valueSpan.innerHTML = value;

    rows[text] = valueSpan;

    newRow.append(textSpan);
    newRow.append(valueSpan);
    container.append(newRow);
  }

  container.enableRow = function(text) {
    var e = document.getElementById('row' + text);
    if (e) {
      e.style.display = 'flex';
    }
  }

  container.disableRow = function(text) {
    var e = document.getElementById('row' + text);
    if (e) {
      e.style.display = 'none';
    }
  }

  container.setRowValue = function(key, value) {
    rows[key].innerHTML = value;
  }

  container.append(title);
  return container;
}


/***/ }),

/***/ "./src/charts/preview-ui.js":
/*!**********************************!*\
  !*** ./src/charts/preview-ui.js ***!
  \**********************************/
/*! exports provided: preview */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "preview", function() { return preview; });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./src/utils.js");
/* harmony import */ var _consts_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../consts.js */ "./src/consts.js");



const PREVIEW_RESIZE_AREA_WIDTH = 10;
const PREVIEW_MIN_WIDTH = 30;

const PREVIEW_BORDERS_WIDTH = 10;
const PREVIEW_BORDER_RADIUS = 5;

const PREVIEW_ACTIONS = {
  None: 0,
  ResizeLeft: 1,
  Move: 2,
  ResizeRight: 3,
};

// export function preview(w, h, pixelRatio) {
function preview(w, h, pixelRatio, onActionUpdate) {
  var canvas = document.createElement('canvas');
  var ctx = canvas.getContext('2d');

  var currW = w;
  var currH = h;

  canvas.width = currW * pixelRatio;
  canvas.height = currH * pixelRatio;
  canvas.style.width = currW + 'px';
  canvas.style.height = currH + 'px';
  ctx.scale(pixelRatio, pixelRatio);

  var previewMaskColor = '#000000';
  var previewMaskAlpha = '#000000';
  var previewBorderColor = '#000000';
  var previewCornersFillColor = '#000000';

  var previewHeight = currH - _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"] * 2;

  var leftX = (1 - _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INIT_W"]) * currW;
  var rightX = 1 * currW;

  var state = { action: PREVIEW_ACTIONS.None, left: 1 - _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INIT_W"], right: 1 };
  function updateState() {
    state.left = leftX/currW;
    state.right = rightX/currW;
  }
  updateState();

  function updateAction(action) {
    state.action = action || PREVIEW_ACTIONS.None;

    if (onActionUpdate) {
      onActionUpdate(state.action);
    }
  }

  canvas.updateWidth = function(w, pixelRatio) { //FIXME Rename
    currW = w;

    canvas.width = currW * pixelRatio;
    canvas.height = currH * pixelRatio;
    canvas.style.width = currW + 'px';
    ctx.scale(pixelRatio, pixelRatio);

    leftX = state.left * currW
    rightX = state.right * currW;

    canvas.draw();
  }

  canvas.switchTheme = function(theme) {
    setTheme(theme);
    canvas.draw();
  }

  function setTheme(theme) {
    previewMaskColor = theme.previewMaskColor;
    previewMaskAlpha = theme.previewMaskAlpha;
    previewBorderColor = theme.previewBorderColor;
    previewCornersFillColor = theme.previewCornersFillColor;
  }
  setTheme(_consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_DAY_THEME"]);

  function leftZoneUpdate(x) {
    if (leftX > rightX - PREVIEW_MIN_WIDTH) leftX = rightX - PREVIEW_MIN_WIDTH;
    else if (leftX < 0) leftX = 0;
  }

  function centralZoneUpdate(currWidth) {
    if (leftX < 0) leftX = 0;
    if (leftX > currW - currWidth) leftX = currW - currWidth;
    rightX = leftX + currWidth;
  }

  function rightZoneUpdate(x) {
    if (rightX < leftX + PREVIEW_MIN_WIDTH) rightX = leftX + PREVIEW_MIN_WIDTH;
    else if (rightX > currW) rightX = currW;
  }

  var mouseX = null;

  var offsetLeftX = null;
  var currWidth = null;
  var offsetRightX = null;

  function checkAction(e) {
    mouseX = e.clientX;
    if (isLeftZone(e.clientX - canvas.getBoundingClientRect().x)) {
      offsetLeftX = leftX - e.clientX;
      updateAction(PREVIEW_ACTIONS.ResizeLeft)
    }
    else if (isCentralZone(e.clientX - canvas.getBoundingClientRect().x)) {
      offsetLeftX = leftX - e.clientX;
      currWidth = rightX - leftX;

      updateAction(PREVIEW_ACTIONS.Move)
    }
    else if (isRightZone(e.clientX - canvas.getBoundingClientRect().x)) {
      offsetRightX = rightX - e.clientX;
      updateAction(PREVIEW_ACTIONS.ResizeRight)
    }
  }

  canvas.onmousedown = function(e) {
    console.log('mouse down', e);

    checkAction(e);
    onmousemove = onMouseMove;

    onmouseup = function(e) {
      onmousemove = null;
      onmouseup = null;
      updateAction(PREVIEW_ACTIONS.None);
    }

    return false;
  }

  canvas.ontouchstart = function(e) {
    checkAction(e.touches[0]);
    ontouchmove = onTouchMove;

    ontouchend = function(e) {
      ontouchmove = null;
      ontouchend = null;
      updateAction(PREVIEW_ACTIONS.None);
    }

    return false;
  }

  var onMouseMove = function(e) {
    mouseX = e.clientX;
  }

  var onTouchMove = function(e) {
    mouseX = e.touches[0].clientX;
  }

  canvas.update = function() {
    if (state.action > 0) {
      if (state.action === PREVIEW_ACTIONS.ResizeLeft) {
        leftX = mouseX + offsetLeftX;
        leftZoneUpdate();
      }
      if (state.action === PREVIEW_ACTIONS.Move) {
        leftX = mouseX + offsetLeftX;
        centralZoneUpdate(currWidth);
      }
      if (state.action === PREVIEW_ACTIONS.ResizeRight) {
        rightX = mouseX + offsetRightX;
        rightZoneUpdate();
      }

      updateState();
      canvas.draw();
    }

    return state;
  }

  var offX = 1;
  var maskOverlayX = 4;

  canvas.draw = function() {
    ctx.clearRect(0, 0, currW, currH);

    ctx.beginPath();
    ctx.fillStyle = previewMaskColor;
    ctx.globalAlpha = previewMaskAlpha;

    var left = leftX;
    var right = rightX;
    ctx.rect(0, _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"], left + maskOverlayX, previewHeight);
    ctx.rect(right - maskOverlayX, _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"], currW - right + maskOverlayX, previewHeight);
    ctx.fill();


    ctx.globalAlpha = 1;
    ctx.fillStyle = previewCornersFillColor;

    ctx.beginPath();
    ctx.arc(
      PREVIEW_BORDER_RADIUS,
      PREVIEW_BORDER_RADIUS + _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"],
      PREVIEW_BORDER_RADIUS,
      1*Math.PI,
      1.5*Math.PI
    );
    ctx.moveTo(PREVIEW_BORDER_RADIUS, _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"]);
    ctx.lineTo(0, _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"]);
    ctx.lineTo(0, PREVIEW_BORDER_RADIUS + _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"]);
    ctx.fill();

    ctx.beginPath();
    ctx.arc(
      currW - PREVIEW_BORDER_RADIUS,
      PREVIEW_BORDER_RADIUS + _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"],
      PREVIEW_BORDER_RADIUS,
      1.5*Math.PI,
      0*Math.PI
    );
    ctx.moveTo(currW, PREVIEW_BORDER_RADIUS + _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"]);
    ctx.lineTo(currW, _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"]);
    ctx.lineTo(currW - PREVIEW_BORDER_RADIUS, _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"]);
    ctx.fill();

    ctx.beginPath();
    ctx.arc(
      currW - PREVIEW_BORDER_RADIUS,
      currH - PREVIEW_BORDER_RADIUS - _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"],
      PREVIEW_BORDER_RADIUS,
      0*Math.PI,
      0.5*Math.PI
    );
    ctx.moveTo(currW - PREVIEW_BORDER_RADIUS, currH - _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"]);
    ctx.lineTo(currW, currH - _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"]);
    ctx.lineTo(currW, currH - PREVIEW_BORDER_RADIUS - _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"]);
    ctx.fill();

    ctx.beginPath();
    ctx.arc(
      PREVIEW_BORDER_RADIUS,
      currH - PREVIEW_BORDER_RADIUS - _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"],
      PREVIEW_BORDER_RADIUS,
      0.5*Math.PI,
      1*Math.PI
    );
    ctx.moveTo(0, currH - PREVIEW_BORDER_RADIUS - _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"]);
    ctx.lineTo(0, currH - _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"]);
    ctx.lineTo(PREVIEW_BORDER_RADIUS, currH - _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"]);
    ctx.fill();

    ctx.strokeStyle = previewBorderColor;
    ctx.lineWidth = 1 + offX;
    ctx.globalAlpha = 1;
    roundRect(
      ctx,
      left+offX,
      _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"],
      right - left - offX*2,
      previewHeight,
      [PREVIEW_BORDER_RADIUS, PREVIEW_BORDER_RADIUS, PREVIEW_BORDER_RADIUS, PREVIEW_BORDER_RADIUS]
    );

    ctx.fillStyle = previewBorderColor;
    roundRect(
      ctx,
      left + offX,
      _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"],
      8,
      previewHeight,
      [PREVIEW_BORDER_RADIUS, 0, 0, PREVIEW_BORDER_RADIUS],
      true
    );
    roundRect(
      ctx,
      right - 8 - offX,
      _consts_js__WEBPACK_IMPORTED_MODULE_1__["PREVIEW_INNER_MARGIN_TOP"],
      8,
      previewHeight,
      [0, PREVIEW_BORDER_RADIUS, PREVIEW_BORDER_RADIUS, 0],
      true
    );
  }
  canvas.draw();

  function isLeftZone(x) {
    return Math.abs(x - leftX) < PREVIEW_RESIZE_AREA_WIDTH;
  }

  function isRightZone(x) {
    return Math.abs(x - rightX) < PREVIEW_RESIZE_AREA_WIDTH;
  }

  function isCentralZone(x) {
    return x > leftX + PREVIEW_RESIZE_AREA_WIDTH && x < rightX - PREVIEW_RESIZE_AREA_WIDTH;
  }

  // requestAnimationFrame(draw);
  return canvas;
}

function roundRect(ctx, x, y, width, height, radius, fill, stroke) {
  if (typeof stroke == 'undefined') {
    stroke = true;
  }
  if (typeof radius === 'undefined') {
    radius = 5;
  }
  if (typeof radius === 'number') {
    radius = {tl: radius, tr: radius, br: radius, bl: radius};
  }
  if (typeof radius === 'object') {
    radius = {tl: radius[0], tr: radius[1], br: radius[2], bl: radius[3]};
  } else {
    var defaultRadius = {tl: 0, tr: 0, br: 0, bl: 0};
    for (var side in defaultRadius) {
      radius[side] = radius[side] || defaultRadius[side];
    }
  }
  ctx.beginPath();
  ctx.moveTo(x + radius.tl, y);
  ctx.lineTo(x + width - radius.tr, y);
  ctx.quadraticCurveTo(x + width, y, x + width, y + radius.tr);
  ctx.lineTo(x + width, y + height - radius.br);
  ctx.quadraticCurveTo(x + width, y + height, x + width - radius.br, y + height);
  ctx.lineTo(x + radius.bl, y + height);
  ctx.quadraticCurveTo(x, y + height, x, y + height - radius.bl);
  ctx.lineTo(x, y + radius.tl);
  ctx.quadraticCurveTo(x, y, x + radius.tl, y);
  ctx.closePath();
  if (fill) {
    ctx.fill();
  }
  else if (stroke) {
    ctx.stroke();
  }

}


/***/ }),

/***/ "./src/charts/stacked-area-chart.js":
/*!******************************************!*\
  !*** ./src/charts/stacked-area-chart.js ***!
  \******************************************/
/*! exports provided: percentageStackedAreaChart, PercentageStackedAreaChart */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "percentageStackedAreaChart", function() { return percentageStackedAreaChart; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PercentageStackedAreaChart", function() { return PercentageStackedAreaChart; });
/* harmony import */ var _chart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chart */ "./src/charts/chart.js");
/* harmony import */ var _animations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../animations */ "./src/animations.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ "./src/utils.js");
/* harmony import */ var _consts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../consts */ "./src/consts.js");





function percentageStackedAreaChart(container, data, name) {
  var chart = new PercentageStackedAreaChart(container, data, name);
  return chart;
}

function PercentageStackedAreaChart(container, data) {
  console.log(data);
  _chart__WEBPACK_IMPORTED_MODULE_0__["ChartBase"].apply(this, arguments);
  this.init();
}

PercentageStackedAreaChart.prototype = Object.create(_chart__WEBPACK_IMPORTED_MODULE_0__["ChartBase"].prototype);
PercentageStackedAreaChart.prototype.constructor = PercentageStackedAreaChart;

PercentageStackedAreaChart.prototype.initData = function() {
  _chart__WEBPACK_IMPORTED_MODULE_0__["ChartBase"].prototype.initData.call(this);

  this.percents = this.columns[0].values.map(v => this.columns.map(c => new _animations__WEBPACK_IMPORTED_MODULE_1__["AnimatedValue"](0, _consts__WEBPACK_IMPORTED_MODULE_3__["Y_ANIMATION_TIME"])))
  this.updatePercents();
}

PercentageStackedAreaChart.prototype.updateY = function() {}

PercentageStackedAreaChart.prototype.initOyProps = function() {
  _chart__WEBPACK_IMPORTED_MODULE_0__["ChartBase"].prototype.initOyProps.apply(this);

  this.marginTop = 20;

  this.percentageLabels = {
    alpha: { value: 1},
    offsetY: 0,
    labels: [0, 25, 50, 75, 100]
  };
  this.gridLinesHeight = Math.round((this.bottomY - this.marginTop) / 4); // move to const

  this.gridOyTextsColor = '#25252990'; // 50%
}


PercentageStackedAreaChart.prototype.drawOyLabels = function(oyLabels) {
  // if (oyLabels.alpha.value <= 0) return;
  this.ctx.globalAlpha = oyLabels.alpha.value;
  this.ctx.strokeStyle = this.gridLinesColor; // FIXME color to const
  this.ctx.fillStyle = this.gridOyTextsColor; // FIXME color to const
  this.ctx.lineWidth = 1;
  this.ctx.beginPath();

  // var offset = Math.round(this.gridLinesHeight * (oyLabels.labels.length - 1));

  for (var i = 1; i < oyLabels.labels.length; i++) {
    var y = this.bottomY - i * this.gridLinesHeight;
    this.ctx.fillText(
      oyLabels.labels[i],
      _consts__WEBPACK_IMPORTED_MODULE_3__["CHART_GRID_PADDING"],
      y + _consts__WEBPACK_IMPORTED_MODULE_3__["OY_LABELS_MARGIN_TOP"]
    );
    y -= 0.5;
    this.ctx.moveTo(_consts__WEBPACK_IMPORTED_MODULE_3__["CHART_GRID_PADDING"], y);
    this.ctx.lineTo(this.w - _consts__WEBPACK_IMPORTED_MODULE_3__["CHART_GRID_PADDING"], y);
  }
  this.ctx.stroke();
}

PercentageStackedAreaChart.prototype.updatePercents = function () {
  // this.percents = getStackedPercents(this.columns.filter(c => c.isOn).map(c => c.values));
  var now = performance.now();

  var stackedPercents = Object(_utils__WEBPACK_IMPORTED_MODULE_2__["getStackedPercents"])(this.columns.map(c => {
    if (!c.isOn) {
      return c.values.map(v => 0)
    }
    return c.values;
  }));

  for (var i = 0; i < stackedPercents.length; i++) {
    for (var j = 0; j < stackedPercents[i].length; j++) {
      this.percents[i][j].set(Math.min(100, stackedPercents[i][j]), now, true);
    }
  }
};

PercentageStackedAreaChart.prototype.drawBg = function() {
  this.drawOxLabels(this.staticOxLabels, this.oxLabels.length - 1);
  this.drawOxLabels(this.dynamicOxLabels, this.oxLabels.length - 1 - this.dynamicOxLabels.step/2);
}

// PercentageStackedAreaChart.prototype.drawOyLabels = function(oyLabels) {
//   console.log('draw oy');
// }


PercentageStackedAreaChart.prototype.checkRedrawChartsContent = function(now) {
  // console.log('check redraw');
  for (var i = 0; i < this.percents.length; i++) {
    for (var j = 0; j < this.percents[i].length; j++) {
      if (this.percents[i][j].nextTick(now)) {
        this.needRedraw = this.needDrawPreview = true;
      }
    }
  }
}

PercentageStackedAreaChart.prototype.buttonClicked = function(name, isOn) {
  var now = performance.now();
  for (var i = 0; i < this.columns.length; i++) {
    if (this.columns[i].name === name) {
      // if (isOn) this.columns[i].alpha.set(1, now, true)
      // else this.columns[i].alpha.set(0, now, true)
      this.columns[i].isOn = isOn;
      this.updatePercents();

      // this.gridPreviewMaxY.set(Math.max(this.calculateGridPreviewMaxY(), 0), now, true);

      this.update();
    }
  }
}

PercentageStackedAreaChart.prototype.drawChartContent = function() {
  var barW = Math.round(this.barWidth*this.round)/this.round;
  var sI = Math.max(this.startInd - this.drawIndOffset, 0);
  var eI = Math.min(this.endInd + this.drawIndOffset, this.L);

  var X = [];
  for (var i = sI; i < eI+1; i++) {
    X.push(Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getScreenXByInd"])(i, barW, this.offsetX));
  }

  var mins = Object(_utils__WEBPACK_IMPORTED_MODULE_2__["transpose"])(this.percents).map(c => Object(_utils__WEBPACK_IMPORTED_MODULE_2__["getMin"])(c.map(v => v.value)));

  X = X.concat(X[X.length-1], X[0]);
  for (var i = this.columns.length - 1; i >= 0 ; i--) {
    var values = this.percents.map(p => p[i]).slice(sI, eI+1);
    var Y = values.map(v => Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getScreenY"])(this.bottomY - this.marginTop, v.value, 100) + this.marginTop);

    var m = Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getScreenY"])(this.bottomY - this.marginTop, (mins[i-1]) ? mins[i-1] : 0, 100) + this.marginTop;
    Y = Y.concat(m, m);
    this.drawArea(X, Y, this.columns[i].color);
  }

  this.drawOyLabels(this.percentageLabels);
  this.drawZeroLine();
}

PercentageStackedAreaChart.prototype.drawArea = function (X, Y, color, alpha=1) {
  // if (alpha > 0) {
    this.ctx.beginPath();
    this.ctx.globalAlpha = alpha;
    this.ctx.fillStyle = color;
    this.ctx.lineWidth = 1;

    this.ctx.moveTo(X[0], Y[0]);
    for (let i=1; i < X.length; i++) {
      this.ctx.lineTo(X[i], Y[i]);
    }
    this.ctx.fill();
  // }
}

PercentageStackedAreaChart.prototype.drawPreview = function() {
  this.clearDrawPreview();

  var X = [];
  for (var i = 0; i < this.oxLabels.length; i++) {
    X.push(Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getScreenXByInd"])(i, this.previewChartStep, this.previewChartX));
  }
  X[0] = Math.ceil(X[0]);
  X[X.length-1] = Math.floor(X[X.length-1]);
  X = X.concat(X[X.length-1], X[0]);

  var mins = Object(_utils__WEBPACK_IMPORTED_MODULE_2__["transpose"])(this.percents).map(c => Object(_utils__WEBPACK_IMPORTED_MODULE_2__["getMin"])(c.map(v => v.value))); //  ,      

  for (var i = this.columns.length - 1; i >= 0 ; i--) {
    var values = this.percents.map(p => p[i]);
    var Y = values.map(v => Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getScreenY"])(this.previewChartHeight, v.value, 100));
    var m = Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getScreenY"])(this.previewChartHeight, (mins[i-1]) ? mins[i-1] : 0, 100);
    Y = Y.concat(m, m).map(y => Math.max(this.previewChartY + y, this.previewChartY));

    this.drawArea(X, Y, this.columns[i].color);
  }
}

PercentageStackedAreaChart.prototype.drawSelectedChartContent = function() {
  // if (this.selectedInd > 0) {

    this.ctx.beginPath();
    this.ctx.strokeStyle = this.gridLinesColor;
    this.ctx.lineWidth = 1;
    this.ctx.moveTo(this.selectedScreenX + 0.5, 0);
    this.ctx.lineTo(this.selectedScreenX + 0.5, this.bottomY);
    this.ctx.stroke();

  //   this.info.style.left = this.selectedScreenX - this.info.offsetWidth - 30 + 'px'; // FIXME this.info margin
  //   this.info.style.top = this.selectedScreenY - this.info.offsetHeight/2 + 'px'; // FIXME this.info margin
  //   this.info.appear();
  // }
  // else {
  //   this.info.disappear()
  // }
}


/***/ }),

/***/ "./src/charts/stacked-bar-chart.js":
/*!*****************************************!*\
  !*** ./src/charts/stacked-bar-chart.js ***!
  \*****************************************/
/*! exports provided: stackedBarChart */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stackedBarChart", function() { return stackedBarChart; });
/* harmony import */ var _chart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chart */ "./src/charts/chart.js");
/* harmony import */ var _bar_chart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./bar-chart */ "./src/charts/bar-chart.js");
/* harmony import */ var _animations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../animations */ "./src/animations.js");
/* harmony import */ var _point_info__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./point-info */ "./src/charts/point-info.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils */ "./src/utils.js");
/* harmony import */ var _consts__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../consts */ "./src/consts.js");







// const OX_LABELS_ANIMATION_DURATION = 0.25;
//
// const PREVIEW_CHART_HEIGHT = 50;
// const PREVIEW_CHART_MARGIN = 30


function stackedBarChart(container, data, name) {
  var chart = new StackedBarChart(container, data, name);
  return chart;
}

function StackedBarChart(container, data) {
  // console.log(data);
  _bar_chart__WEBPACK_IMPORTED_MODULE_1__["BarChart"].apply(this, arguments);
  // this.L++;
  // this.init();

}

StackedBarChart.prototype = Object.create(_bar_chart__WEBPACK_IMPORTED_MODULE_1__["BarChart"].prototype);
StackedBarChart.prototype.constructor = StackedBarChart;

StackedBarChart.prototype.initData = function() {
  _chart__WEBPACK_IMPORTED_MODULE_0__["ChartBase"].prototype.initData.call(this);

  this.stackedColumns = this.columns.map(c => c.values.map(
    v => 0
  ));

  this.stackedColumnsAnimated = this.columns.map(c => c.values.map(
    v => new _animations__WEBPACK_IMPORTED_MODULE_2__["AnimatedValue"](0, _consts__WEBPACK_IMPORTED_MODULE_5__["Y_ANIMATION_TIME"])
  ));

  this.updateStackedColumns();
}

StackedBarChart.prototype.initInfo = function() {
  _chart__WEBPACK_IMPORTED_MODULE_0__["ChartBase"].prototype.initInfo.apply(this);
  // this.info = createInfo();
  // for (var i = 0; i < this.columns.length; i++) {
  //   this.info.addRow(this.columns[i].name, 0, this.columns[i].color);
  // }
  // this.chartContainer.append(this.info);
  this.info.addRow('All', 0, '#000000');
}

StackedBarChart.prototype.updateStackedColumns = function() {
  var sums = Object(_utils__WEBPACK_IMPORTED_MODULE_4__["getStackedArraySums"])(
    this.columns.map(c => (
      (!c.isOn) ? c.values.map(v => 0) : c.values
    ))
  );

  var now = performance.now();
  for (var i = 0; i < sums.length; i++) {
    for (var j = 0; j < sums[i].length; j++) {
      this.stackedColumns[i][j] = sums[i][j];
      this.stackedColumnsAnimated[i][j].set(sums[i][j], now, true);
    }
  }
}

StackedBarChart.prototype.initOyProps = function() {
  _chart__WEBPACK_IMPORTED_MODULE_0__["ChartBase"].prototype.initOyProps.apply(this);

  this.gridPreviewMaxY = new _animations__WEBPACK_IMPORTED_MODULE_2__["AnimatedValue"](0, _consts__WEBPACK_IMPORTED_MODULE_5__["Y_ANIMATION_TIME"]);
  this.gridPreviewMaxY.set(this.calculateGridPreviewMaxY(), performance.now(), true);
}

StackedBarChart.prototype.calculateGridPreviewMaxY = function () {
  var arr = this.stackedColumns[this.stackedColumns.length-1];
  return Object(_utils__WEBPACK_IMPORTED_MODULE_4__["getMax"])(arr);
};

StackedBarChart.prototype.initButtons = _chart__WEBPACK_IMPORTED_MODULE_0__["ChartBase"].prototype.initButtons;

StackedBarChart.prototype.buttonClicked = function(name, isOn) {
  var now = performance.now();
  for (var i = 0; i < this.columns.length; i++) {
    if (this.columns[i].name === name) {
      this.columns[i].isOn = isOn;
      if (isOn) this.info.enableRow(this.columns[i].name);
      else this.info.disableRow(this.columns[i].name);
      this.updateStackedColumns();

      if (this.columns.filter(c => c.isOn).length < 1) {
        this.info.disableRow('All')
      }
      else {
        this.info.enableRow('All')
      }

      this.gridPreviewMaxY.set(Math.max(this.calculateGridPreviewMaxY(), 0), now, true);
      this.update();
    }
  }
}

StackedBarChart.prototype.calculateValuesMaxY = function() {
  var arr = this.stackedColumns[this.stackedColumns.length-1]
  .slice(this.startInd, this.endInd+1);

  return Object(_utils__WEBPACK_IMPORTED_MODULE_4__["getMax"])(arr);
}

StackedBarChart.prototype.checkRedrawChartsContent = function(now) {
  for (var i = 0; i < this.stackedColumnsAnimated.length; i++) {
    for (var j = 0; j < this.stackedColumnsAnimated[i].length; j++) {
      if (this.stackedColumnsAnimated[i][j].nextTick(now)) {
        this.needRedraw = this.needDrawPreview = true;
      }
    }
  }
  if (this.gridPreviewMaxY.nextTick(now)) this.needDrawPreview = true;
}

StackedBarChart.prototype.drawChartContent = function() {
  var barW = Math.round(this.barWidth*this.round)/this.round;
  var sI = Math.max(this.startInd - this.drawIndOffset, 0);
  var eI = Math.min(this.endInd + this.drawIndOffset, this.L);

  var X = [];
  for (var i = sI; i < eI+1; i++) {
    X.push(Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getScreenXByInd"])(i, barW, this.offsetX));
  }

  var YCoords = this.stackedColumnsAnimated.map(c => c.slice(sI, eI+1))
    .map(c => Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getYCoords"])(this.bottomY, c.map(v => v.value), this.gridMaxY.value));
  YCoords.splice(0, 0, YCoords[1].map(c => this.bottomY));

  this.ctx.globalAlpha = (this.selectedInd > -1) ? 0.6 : 1; // FIXME Alpha to const

  for (var i = this.columns.length-1; i >= 0; i--) {
    this.ctx.beginPath();

    for (var j = 0; j < X.length; j++) {
      if (j !== this.selectedInd - sI) {
        this.ctx.rect(X[j], YCoords[i+1][j], barW, YCoords[i][j] - YCoords[i+1][j]);
      }
    }

    this.ctx.fillStyle = this.columns[i].color;
    this.ctx.fill();
  }

  if (this.selectedInd > -1) {
    this.drawSelectedChartContent();
  }

}

StackedBarChart.prototype.select = function(x, y) {
  this.selectedScreenX = x;
  this.selectedScreenY = y;
  this.selectedInd = this.getIndByScreenX(x);
  this.info.setTitle(Object(_utils__WEBPACK_IMPORTED_MODULE_4__["createLabelFromDate"])(this.dateColumn[this.selectedInd], true));
  this.columns.filter(c => c.isOn).forEach(c => {
    this.info.setRowValue(c.name, c.values[this.selectedInd]);
    this.info.setRowValue('All', this.stackedColumns[this.stackedColumns.length-1][this.selectedInd]);
  });
}

StackedBarChart.prototype.drawSelectedChartContent = function () {
  var barW = Math.round(this.barWidth*this.round)/this.round;
  var selectedIndX = this.getScreenXByInd(this.selectedInd);

  this.ctx.globalAlpha = 1;

  for (var i = this.columns.length-1; i >= 0; i--) {
    var y = Math.floor(Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getScreenY"])(this.bottomY, this.stackedColumnsAnimated[i][this.selectedInd].value, this.gridMaxY.value))
    this.ctx.beginPath();
    this.ctx.fillStyle = this.columns[i].color;
    this.ctx.rect(selectedIndX, y, barW, this.bottomY - y);
    this.ctx.fill();
  }
}

StackedBarChart.prototype.drawPreview = function() {
  this.clearDrawPreview();

  var X = [];
  for (var i = 0; i < this.oxLabels.length; i++) {
    X.push(Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getScreenXByInd"])(i, this.previewChartStep, this.previewChartX));
  }
  var barWidth = X[1] - X[0];

  var YCoords = this.stackedColumnsAnimated.map(
    c => Object(_chart__WEBPACK_IMPORTED_MODULE_0__["getYCoords"])(this.previewChartHeight, c.map(v => v.value), this.gridPreviewMaxY.value).map(y => this.previewChartY + y)
  );
  YCoords.splice(0, 0, YCoords[1].map(c => this.h));

  for (var i = this.columns.length-1; i >= 0; i--) {

    this.ctx.beginPath();
    this.ctx.globalAlpha = 1; // FIXME Alpha to const

    for (var j = 0; j < X.length; j++) {
      this.ctx.rect(X[j], YCoords[i+1][j], barWidth, YCoords[i][j] - YCoords[i+1][j]);
    }

    this.ctx.fillStyle = this.columns[i].color;
    this.ctx.fill();
  }
}


/***/ }),

/***/ "./src/charts/two-axes-line-chart.js":
/*!*******************************************!*\
  !*** ./src/charts/two-axes-line-chart.js ***!
  \*******************************************/
/*! exports provided: twoAxesLineChart */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "twoAxesLineChart", function() { return twoAxesLineChart; });
/* harmony import */ var _chart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chart */ "./src/charts/chart.js");
/* harmony import */ var _line_chart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./line-chart */ "./src/charts/line-chart.js");
/* harmony import */ var _animations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../animations */ "./src/animations.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ "./src/utils.js");
/* harmony import */ var _consts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../consts */ "./src/consts.js");






function twoAxesLineChart(container, data, name) {
  var chart = new TwoAxesLineChart(container, data, name);
  return chart;
}

function TwoAxesLineChart(container, data) {
  // console.log(data);
  _line_chart__WEBPACK_IMPORTED_MODULE_1__["LineChart"].apply(this, arguments);
  // this.init();
}

TwoAxesLineChart.prototype = Object.create(_line_chart__WEBPACK_IMPORTED_MODULE_1__["LineChart"].prototype);
TwoAxesLineChart.prototype.constructor = TwoAxesLineChart;

TwoAxesLineChart.prototype.initOyProps = function() {
  _line_chart__WEBPACK_IMPORTED_MODULE_1__["LineChart"].prototype.initOyProps.apply(this);

  this.gridStepYRight = 0;
  this.gridMaxYRight = new _animations__WEBPACK_IMPORTED_MODULE_2__["AnimatedValue"](0, _consts__WEBPACK_IMPORTED_MODULE_4__["Y_ANIMATION_TIME"]);
  this.gridPreviewMaxYRight = new _animations__WEBPACK_IMPORTED_MODULE_2__["AnimatedValue"](0, _consts__WEBPACK_IMPORTED_MODULE_4__["Y_ANIMATION_TIME"]);
  this.gridPreviewMaxYRight.set(Object(_utils__WEBPACK_IMPORTED_MODULE_3__["getMax"])(this.columns[1].values), performance.now(), true);

  this.oldOyLabels.alphaRight = new _animations__WEBPACK_IMPORTED_MODULE_2__["AnimatedValue"](0, _consts__WEBPACK_IMPORTED_MODULE_4__["Y_ANIMATION_TIME"]);
  this.oldOyLabels.labelsRight = [0, 1, 2, 3, 4, 5, 6];

  this.newOyLabels.alphaRight = new _animations__WEBPACK_IMPORTED_MODULE_2__["AnimatedValue"](0, _consts__WEBPACK_IMPORTED_MODULE_4__["Y_ANIMATION_TIME"]);
  this.newOyLabels.labelsRight = [0, 1, 2, 3, 4, 5, 6];
}

TwoAxesLineChart.prototype.checkRedrawChartsContent = function(now) {
  _line_chart__WEBPACK_IMPORTED_MODULE_1__["LineChart"].prototype.checkRedrawChartsContent.call(this, now);

  if (this.gridPreviewMaxYRight.nextTick(now)) this.needDrawPreview = true;
}

TwoAxesLineChart.prototype.drawZeroLine = function () {
  this.ctx.beginPath();
  this.ctx.globalAlpha = 1;

  this.ctx.fillStyle = this.columns[0].color;
  this.ctx.fillText(0, _consts__WEBPACK_IMPORTED_MODULE_4__["CHART_GRID_PADDING"], this.bottomY + _consts__WEBPACK_IMPORTED_MODULE_4__["OY_LABELS_MARGIN_TOP"]);
  this.ctx.fillStyle = this.columns[1].color;
  this.ctx.fillText(
    0,
    _consts__WEBPACK_IMPORTED_MODULE_4__["CHART_GRID_PADDING"] + this.gridWidth - this.ctx.measureText(0).width,
    this.bottomY + _consts__WEBPACK_IMPORTED_MODULE_4__["OY_LABELS_MARGIN_TOP"]
  );
  this.ctx.moveTo(_consts__WEBPACK_IMPORTED_MODULE_4__["CHART_GRID_PADDING"], this.bottomY + 0.5);
  this.ctx.lineTo(this.w - _consts__WEBPACK_IMPORTED_MODULE_4__["CHART_GRID_PADDING"], this.bottomY + 0.5);
  this.ctx.stroke();
};

TwoAxesLineChart.prototype.drawOyLabels = function(oyLabels) {
  // if (oyLabels.alpha.value <= 0 && oyLabels.alphaRight.value <= 0) return;
  if (oyLabels.alpha.value > 0) {
    this.ctx.fillStyle = this.columns[0].color;
    this.ctx.globalAlpha = oyLabels.alpha.value;
    var offset = Math.round(
      oyLabels.labels.length * this.gridLinesHeight + oyLabels.offsetY*(1-oyLabels.alpha.value)
    );

    for (var i = 1; i < oyLabels.labels.length; i++) {
      var y = offset - i * this.gridLinesHeight;

      this.ctx.fillText(
        oyLabels.labels[i],
        _consts__WEBPACK_IMPORTED_MODULE_4__["CHART_GRID_PADDING"],
        y + _consts__WEBPACK_IMPORTED_MODULE_4__["OY_LABELS_MARGIN_TOP"]
      );
    }
  }

  this.ctx.beginPath();
  this.ctx.globalAlpha = 1;
  this.ctx.lineWidth = 1;
  this.ctx.strokeStyle = this.gridLinesColor;
  for (var i = 1; i < 6; i++) {
    var y = (oyLabels.labels.length - i) * this.gridLinesHeight;

    y -= 0.5;
    this.ctx.moveTo(_consts__WEBPACK_IMPORTED_MODULE_4__["CHART_GRID_PADDING"], y);
    this.ctx.lineTo(this.w - _consts__WEBPACK_IMPORTED_MODULE_4__["CHART_GRID_PADDING"], y);
  }
  this.ctx.stroke();

  if (oyLabels.alphaRight.value > 0) {
    this.ctx.fillStyle = this.columns[1].color;
    this.ctx.globalAlpha = oyLabels.alphaRight.value;
    var offset = Math.round(
      oyLabels.labelsRight.length * this.gridLinesHeight + oyLabels.offsetY*(1-oyLabels.alphaRight.value)
    );

    for (var i = 1; i < oyLabels.labelsRight.length; i++) {
      var y = offset - i * this.gridLinesHeight;

      this.ctx.fillText(
        oyLabels.labelsRight[i],
        _consts__WEBPACK_IMPORTED_MODULE_4__["CHART_GRID_PADDING"] + this.gridWidth - this.ctx.measureText(oyLabels.labelsRight[i]).width,
        y + _consts__WEBPACK_IMPORTED_MODULE_4__["OY_LABELS_MARGIN_TOP"]
      );
    }
  }
}

TwoAxesLineChart.prototype.checkRedrawBg = function(now) {
  _line_chart__WEBPACK_IMPORTED_MODULE_1__["LineChart"].prototype.checkRedrawBg.call(this, now);

  if (this.gridMaxYRight.nextTick(now)) this.needRedraw = true;
  if (this.oldOyLabels.alphaRight.nextTick(now)) this.needRedraw = true;
  if (this.newOyLabels.alphaRight.nextTick(now)) this.needRedraw = true;
}

TwoAxesLineChart.prototype.updateY = function () {
  var maxY = (this.columns[0].isOn) ? Object(_utils__WEBPACK_IMPORTED_MODULE_3__["getMax"])(this.columns[0].values.slice(this.startInd, this.endInd+1)) : 0;
  var maxYRight = (this.columns[1].isOn) ? Object(_utils__WEBPACK_IMPORTED_MODULE_3__["getMax"])(this.columns[1].values.slice(this.startInd, this.endInd+1)) : 0;
  var newGridStepY = Object(_utils__WEBPACK_IMPORTED_MODULE_3__["getStepForGridValues"])(maxY);
  var newGridStepYRight = Object(_utils__WEBPACK_IMPORTED_MODULE_3__["getStepForGridValues"])(maxYRight);

  if (this.gridStepY !== newGridStepY) {
    var now = performance.now();

    this.gridMaxY.set(newGridStepY*6, now, true);

    if (
      (this.oldOyLabels.offsetY > 0 && this.gridStepY > newGridStepY) ||
      (this.oldOyLabels.offsetY < 0 && this.gridStepY < newGridStepY)
    ) {
      this.oldOyLabels.offsetY *= -1;
      this.newOyLabels.offsetY *= -1;
    }

    this.gridStepY = newGridStepY;

    this.oldOyLabels.alpha.set(1);
    this.oldOyLabels.alpha.set(0, now, true);
    this.newOyLabels.alpha.set(0);
    this.newOyLabels.alpha.set(1, now, true);

    this.oldOyLabels.labels = this.newOyLabels.labels;
    this.newOyLabels.labels = (maxY !== 0) ? [0, 1, 2, 3, 4, 5].map(n => n*newGridStepY) : 0;
  }

  if (this.gridStepYRight !== newGridStepYRight) {
    var now = performance.now();

    this.gridMaxYRight.set(newGridStepYRight*6, now, true);
    this.gridStepYRight = newGridStepYRight;

    this.oldOyLabels.alphaRight.set(1);
    this.oldOyLabels.alphaRight.set(0, now, true);
    this.newOyLabels.alphaRight.set(0);
    this.newOyLabels.alphaRight.set(1, now, true);

    this.oldOyLabels.labelsRight = this.newOyLabels.labelsRight;
    this.newOyLabels.labelsRight = (maxYRight !== 0) ? [0, 1, 2, 3, 4, 5].map(n => n*newGridStepYRight) : [0];
  }
}

TwoAxesLineChart.prototype.getGridMaxForColumn = function(column) {
  return (this.columns[0].id === column.id) ? this.gridMaxY.value : this.gridMaxYRight.value;
}

TwoAxesLineChart.prototype.getGridMaxForColumnPreview = function(column) {
  return (this.columns[0].id === column.id) ? this.gridPreviewMaxY.value : this.gridPreviewMaxYRight.value;
}


/***/ }),

/***/ "./src/consts.js":
/*!***********************!*\
  !*** ./src/consts.js ***!
  \***********************/
/*! exports provided: PREVIEW_HEIGHT, PREVIEW_INNER_MARGIN_TOP, PREVIEW_INIT_W, PREVIEW_CHART_HEIGHT, PREVIEW_CHART_MARGIN, CHART_GRID_PADDING, GRID_LINES_COUNT, OXLABELS_HEIGHT, OX_LABELS_ANIMATION_DURATION, CHART_HEADER_HEIGHT, CHART_HEADER_MARGIN_BOTTOM, CHART_MAX_WIDTH, CHART_MIN_HEIGHT, CHART_MAX_HEIGHT, Y_ANIMATION_TIME, OY_LABELS_MARGIN_TOP, CHART_DAY_THEME, CHART_NIGHT_THEME, PREVIEW_DAY_THEME, PREVIEW_NIGHT_THEME */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PREVIEW_HEIGHT", function() { return PREVIEW_HEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PREVIEW_INNER_MARGIN_TOP", function() { return PREVIEW_INNER_MARGIN_TOP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PREVIEW_INIT_W", function() { return PREVIEW_INIT_W; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PREVIEW_CHART_HEIGHT", function() { return PREVIEW_CHART_HEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PREVIEW_CHART_MARGIN", function() { return PREVIEW_CHART_MARGIN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHART_GRID_PADDING", function() { return CHART_GRID_PADDING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GRID_LINES_COUNT", function() { return GRID_LINES_COUNT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OXLABELS_HEIGHT", function() { return OXLABELS_HEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OX_LABELS_ANIMATION_DURATION", function() { return OX_LABELS_ANIMATION_DURATION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHART_HEADER_HEIGHT", function() { return CHART_HEADER_HEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHART_HEADER_MARGIN_BOTTOM", function() { return CHART_HEADER_MARGIN_BOTTOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHART_MAX_WIDTH", function() { return CHART_MAX_WIDTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHART_MIN_HEIGHT", function() { return CHART_MIN_HEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHART_MAX_HEIGHT", function() { return CHART_MAX_HEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Y_ANIMATION_TIME", function() { return Y_ANIMATION_TIME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OY_LABELS_MARGIN_TOP", function() { return OY_LABELS_MARGIN_TOP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHART_DAY_THEME", function() { return CHART_DAY_THEME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHART_NIGHT_THEME", function() { return CHART_NIGHT_THEME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PREVIEW_DAY_THEME", function() { return PREVIEW_DAY_THEME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PREVIEW_NIGHT_THEME", function() { return PREVIEW_NIGHT_THEME; });
const PREVIEW_HEIGHT = 44;
const PREVIEW_INNER_MARGIN_TOP = 2;
const PREVIEW_INIT_W = 0.2;

const PREVIEW_CHART_HEIGHT = 40;
const PREVIEW_CHART_MARGIN = 30;

const CHART_GRID_PADDING = 10;
const GRID_LINES_COUNT = 6;
const OXLABELS_HEIGHT = 30;
const OX_LABELS_ANIMATION_DURATION = 0.25;

const CHART_HEADER_HEIGHT = 20;
const CHART_HEADER_MARGIN_BOTTOM = 20;

const CHART_MAX_WIDTH = 500;
const CHART_MIN_HEIGHT = 150 + CHART_HEADER_HEIGHT + CHART_HEADER_MARGIN_BOTTOM + 80;
const CHART_MAX_HEIGHT = 400 + CHART_HEADER_HEIGHT + CHART_HEADER_MARGIN_BOTTOM + 80;

const Y_ANIMATION_TIME = .3;
const OY_LABELS_MARGIN_TOP = -5;

const CHART_DAY_THEME = {
  gridLinesColor: '#182D3B1A',
  gridTextsColor: '#8E8E93',
  chartTitleColor: '#000000',
  infoBackgroundColor: '#FFFFFF',
  infoTextColor: '#000000',
};

const CHART_NIGHT_THEME = {
  gridLinesColor: '#FFFFFF1A',
  gridTextsColor: '#A3B1C299',
  chartTitleColor: '#FFFFFF',
  infoBackgroundColor: '#242F3E',
  infoTextColor: '#FFFFFF',
};

const PREVIEW_DAY_THEME = {
  previewMaskColor: '#E2EEF9',
  previewMaskAlpha: .6,
  previewBorderColor: '#C0D1E1',
  previewCornersFillColor: '#FFFFFF'
};

const PREVIEW_NIGHT_THEME = {
  previewMaskColor: '#304259',
  previewMaskAlpha: .6,
  previewBorderColor: '#56626D',
  previewCornersFillColor: '#242F3E'
};


/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _data_chart1_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data/chart1.json */ "./data/chart1.json");
var _data_chart1_json__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../data/chart1.json */ "./data/chart1.json", 1);
/* harmony import */ var _data_chart2_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../data/chart2.json */ "./data/chart2.json");
var _data_chart2_json__WEBPACK_IMPORTED_MODULE_1___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../data/chart2.json */ "./data/chart2.json", 1);
/* harmony import */ var _data_chart3_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../data/chart3.json */ "./data/chart3.json");
var _data_chart3_json__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../data/chart3.json */ "./data/chart3.json", 1);
/* harmony import */ var _data_chart4_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../data/chart4.json */ "./data/chart4.json");
var _data_chart4_json__WEBPACK_IMPORTED_MODULE_3___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../data/chart4.json */ "./data/chart4.json", 1);
/* harmony import */ var _data_chart5_json__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../data/chart5.json */ "./data/chart5.json");
var _data_chart5_json__WEBPACK_IMPORTED_MODULE_4___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../data/chart5.json */ "./data/chart5.json", 1);
/* harmony import */ var _data_chart_data_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../data/chart_data.json */ "./data/chart_data.json");
var _data_chart_data_json__WEBPACK_IMPORTED_MODULE_5___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../data/chart_data.json */ "./data/chart_data.json", 1);
/* harmony import */ var _charts_line_chart__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./charts/line-chart */ "./src/charts/line-chart.js");
/* harmony import */ var _charts_two_axes_line_chart__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./charts/two-axes-line-chart */ "./src/charts/two-axes-line-chart.js");
/* harmony import */ var _charts_stacked_bar_chart__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./charts/stacked-bar-chart */ "./src/charts/stacked-bar-chart.js");
/* harmony import */ var _charts_bar_chart__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./charts/bar-chart */ "./src/charts/bar-chart.js");
/* harmony import */ var _charts_stacked_area_chart__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./charts/stacked-area-chart */ "./src/charts/stacked-area-chart.js");







// import { createChart } from './charts/chart';






function main() {
  var appContainer = document.getElementById('app-container');

  var charts = [];

  // testCanvas();


  // console.log(chart_data_old_contest);

  // charts.push(lineChart(appContainer, chart_data_old_contest[0], 'Line chart'));
  charts.push(Object(_charts_line_chart__WEBPACK_IMPORTED_MODULE_6__["lineChart"])(appContainer, _data_chart1_json__WEBPACK_IMPORTED_MODULE_0__, 'Line chart'));
  charts.push(Object(_charts_two_axes_line_chart__WEBPACK_IMPORTED_MODULE_7__["twoAxesLineChart"])(appContainer, _data_chart2_json__WEBPACK_IMPORTED_MODULE_1__, 'Two axes line chart'));
  charts.push(Object(_charts_stacked_bar_chart__WEBPACK_IMPORTED_MODULE_8__["stackedBarChart"])(appContainer, _data_chart3_json__WEBPACK_IMPORTED_MODULE_2__, 'Stacked bar chart'));
  charts.push(Object(_charts_bar_chart__WEBPACK_IMPORTED_MODULE_9__["barChart"])(appContainer, _data_chart4_json__WEBPACK_IMPORTED_MODULE_3__, 'Bar chart'));
  charts.push(Object(_charts_stacked_area_chart__WEBPACK_IMPORTED_MODULE_10__["percentageStackedAreaChart"])(appContainer, _data_chart5_json__WEBPACK_IMPORTED_MODULE_4__, 'Stacked area chart'));

  var isDayMode = true;
  var button = document.getElementById('mode');
  button.addEventListener('click', function() {
    isDayMode = !isDayMode;

    for (var i = 0; i < charts.length; i++) {
      charts[i].switchMode(isDayMode);
    }

    if (isDayMode) {
      button.innerHTML = 'Switch to Night Mode';
      document.body.classList.remove('night-theme');
    }
    else {
      button.innerHTML = 'Switch to Day Mode';
      document.body.classList.add('night-theme');
    }

  });

  // testCanvas();
}


window.onload = function() {
  main();
  // testCanvas();
  // test();
}

function test() {

}

function testCanvas() {
  var size = 400;
  var canvas = document.createElement('canvas');
  canvas.width = size;
  canvas.height = size;
  var ctx = canvas.getContext('2d');

  function draw() {
    requestAnimationFrame(function() {
      ctx.clearRect(0, 0, size, size)

      var x = Math.floor(Math.random() * size - size/2);
      var y = Math.floor(Math.random() * size - size/2);

      ctx.beginPath();
      ctx.strokeStyle = '#FF0000';
      ctx.rect(x, y, 100, 100)
      ctx.stroke();

      draw();
    });
  }
  draw();

  document.body.append(canvas);
}


/***/ }),

/***/ "./src/utils.js":
/*!**********************!*\
  !*** ./src/utils.js ***!
  \**********************/
/*! exports provided: createLabelFromDate, getMatrixMin, getMatrixMax, getMin, getMax, debounce, throttle, getGridValuesByMax, getStepForGridValues, getDataColumnByName, transpose, round, sum, getPercents, getStackedPercents, getStackedArraySums */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createLabelFromDate", function() { return createLabelFromDate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMatrixMin", function() { return getMatrixMin; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMatrixMax", function() { return getMatrixMax; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMin", function() { return getMin; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMax", function() { return getMax; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "debounce", function() { return debounce; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "throttle", function() { return throttle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getGridValuesByMax", function() { return getGridValuesByMax; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getStepForGridValues", function() { return getStepForGridValues; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDataColumnByName", function() { return getDataColumnByName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transpose", function() { return transpose; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "round", function() { return round; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sum", function() { return sum; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getPercents", function() { return getPercents; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getStackedPercents", function() { return getStackedPercents; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getStackedArraySums", function() { return getStackedArraySums; });
function createLabelFromDate(date, withYear=false) {
  const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
  var l = new Date(date).getDate() + ' ' + months[new Date(date).getMonth()];
  if (withYear) {
    l = l + ' ' + new Date(date).getFullYear();
  }
  return l;
}

function getMatrixMin(m) {
  return Math.min.apply(
    null,
    m.map(
      row => Math.min.apply(null, row)
    )
  );
}

function getMatrixMax(m) {
  return Math.max.apply(
    null,
    m.map(
      row => Math.max.apply(null, row)
    )
  );
}

function getMin(arr) {
  return Math.min.apply(null, arr);
}

function getMax(arr) {
  return Math.max.apply(null, arr);
}

function debounce(func, wait, immediate) {
	var timeout;
	return function() {
		var context = this, args = arguments;
		var later = function() {
			timeout = null;
			if (!immediate) func.apply(context, args);
		};
		var callNow = immediate && !timeout;
		clearTimeout(timeout);
		timeout = setTimeout(later, wait);
		if (callNow) func.apply(context, args);
	};
}

function throttle(func, limit) {
  var timer = null;
  var context = null;
  var args = null;

  var invoke = function() {
    func.apply(context, args);
    timer = null;
  }

  return function() {
    context = this;
    args = arguments;

    if (!timer) {
      timer = setTimeout(invoke, limit);
    }
  }
}

function getGridValuesByMax(max) { // FIXME   6
  const k = getStepForGridValues(max);
  return [0, 1, 2, 3, 4, 5, 6].map(i => i*k/5);
}

function getStepForGridValues(max, k=1) { // FIXME   6
  if (max == Number.POSITIVE_INFINITY || max == Number.NEGATIVE_INFINITY || max === 0) return 0;

  if (max > 100) return getStepForGridValues(max/10, k*10);
  if (max < 1) return getStepForGridValues(max*10, k/10);

  if (max % 5 == 0) return k*max/5;
  const a = max*5/6;
  if (a % 5 == 0) return k*a/5;

  const ds = [5, 4, 2, 1];
  return s(a, max, ds);

  function s(a, b, ds) {
    let d = ds.shift();
    for (let i=Math.floor(b);i>=Math.ceil(a);i--) {
      if (i % d == 0) return k*i/5;
    }
    return s(a, b, ds);
  }
}

function getDataColumnByName(name, data) {
  for (var i = 0; i < data.length; i++) {
    if (data[i][0] === name) {
      return data[i].slice(1);
    }
  }
  return [];
}

function transpose(arr) {
  return arr[0].map((col, i) => arr.map(row => row[i]));
}

function round(n, c=0) {
  return Math.round(n*Math.pow(10, c))/Math.pow(10, c);
}

function sum(array) {
  return array.reduce((a, c) => a + c);
}

function getPercents(values) {
  return values[0].map((_, i) => {
    var sum = values.map(c => c[i]).reduce((a, c) => a+c);
    if (sum === 0) return values.map(c => 0);
    return values.map(c => {
      return Math.round(10000*c[i]/sum)/100;
    });
  });
}

function getStackedPercents(values) {
  return getPercents(values).map((row, i) => {
    return row.map((p, i) => {
      return round(sum(row.slice(0, i+1)), 2)
    })
  })
}

function getStackedArraySums(values) {
  return transpose(transpose(values).map((row, i) => {
    return row.map((p, i) => {
      return round(sum(row.slice(0, i+1)), 2)
    })
  }))
}


/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FuaW1hdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0cy9iYXItY2hhcnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0cy9idXR0b24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0cy9jaGFydC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnRzL2xpbmUtY2hhcnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0cy9wb2ludC1pbmZvLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydHMvcHJldmlldy11aS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnRzL3N0YWNrZWQtYXJlYS1jaGFydC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnRzL3N0YWNrZWQtYmFyLWNoYXJ0LmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydHMvdHdvLWF4ZXMtbGluZS1jaGFydC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29uc3RzLmpzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0RBQTBDLGdDQUFnQztBQUMxRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdFQUF3RCxrQkFBa0I7QUFDMUU7QUFDQSx5REFBaUQsY0FBYztBQUMvRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQXlDLGlDQUFpQztBQUMxRSx3SEFB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Ozs7O0FDMUZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7O0FBRU87QUFDUDtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU8sa0NBQWtDO0FBQ3pDO0FBQ0E7QUFDQTs7QUFFTyx5Q0FBeUM7QUFDaEQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNkJBQTZCLGdCQUFnQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1AsaUJBQWlCLGlCQUFpQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBOztBQUVPO0FBQ1A7QUFDQTs7QUFFTztBQUNQO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBcIi4vc3JjL2luZGV4LmpzXCIpO1xuIiwiY29uc3QgRlJFUSA9IDUwO1xuXG5leHBvcnQgZnVuY3Rpb24gbWFpbigpIHtcblxuICB2YXIgbXlWYWx1ZSA9IG5ldyBBbmltYXRlZFZhbHVlKDMsIDAuNSk7XG5cbiAgY29uc29sZS5sb2cobXlWYWx1ZSk7XG4gIG15VmFsdWUuc2V0KDQpO1xuICBteVZhbHVlLmFuaW1hdGUoNiwgMSk7XG4gIGNvbnNvbGUubG9nKCc9PT09PT09PT09PScsIG15VmFsdWUpO1xuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBBbmltYXRlZFZhbHVlKHZhbHVlLCBkdXJhdGlvbikge1xuICBkdXJhdGlvbiA9IGR1cmF0aW9uIHx8IDAuNTtcbiAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb24gKiAxMDAwO1xuICB0aGlzLmVhc2UgPSBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIHQqKDItdCk7XG4gIH1cbn1cbi8vIEFuaW1hdGVkVmFsdWUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBub3c9cGVyZm9ybWFuY2Uubm93KCksIGFuaW1hdGVkPWZhbHNlKSB7XG5BbmltYXRlZFZhbHVlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihuZXdWYWx1ZSwgbm93LCBhbmltYXRlZCkge1xuICBub3cgPSBub3cgfHwgcGVyZm9ybWFuY2Uubm93KCk7XG4gIGFuaW1hdGVkID0gYW5pbWF0ZWQgfHwgZmFsc2U7XG4gIC8vIGNvbnNvbGUubG9nKCdhbmltIHNldCcsIG5ld1ZhbHVlKTtcbiAgaWYgKCFhbmltYXRlZCkgeyB0aGlzLnZhbHVlID0gbmV3VmFsdWU7cmV0dXJuOyB9XG4gIGlmIChuZXdWYWx1ZSA9PT0gdGhpcy50b1ZhbHVlKSB7IHJldHVybjsgfVxuXG5cblxuICBpZiAoaXNOYU4odGhpcy52YWx1ZSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLnN0YXJ0ZWQgPSBub3c7XG4gIHRoaXMuZnJvbSA9IHRoaXMudmFsdWU7XG4gIHRoaXMudG8gPSBuZXdWYWx1ZTtcbiAgdGhpcy5uZXh0VGljayhub3cpO1xufVxuQW5pbWF0ZWRWYWx1ZS5wcm90b3R5cGUubmV4dFRpY2sgPSBmdW5jdGlvbihub3csIG5hbWUpIHtcbiAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgIHZhciBwID0gKG5vdyAtIHRoaXMuc3RhcnRlZCkvdGhpcy5kdXJhdGlvbjtcblxuICAgIC8vIGlmIChuYW1lKSB7XG4gICAgLy8gICBjb25zb2xlLmxvZygnbmV4dCB0aWNrJywgbmFtZSk7XG4gICAgLy8gICBjb25zb2xlLmxvZyh0aGlzLnZhbHVlKTtcbiAgICAvLyB9XG5cbiAgICBpZiAocCA+IDEpIHAgPSAxO1xuICAgIGlmIChwIDwgMCkgcCA9IDA7XG4gICAgdGhpcy52YWx1ZSA9IE1hdGgucm91bmQoKHRoaXMuZnJvbSArICh0aGlzLnRvIC0gdGhpcy5mcm9tKSAqIHRoaXMuZWFzZShwKSkqMTAwKS8xMDA7XG5cbiAgICBpZiAocCA9PT0gMSkgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gQW5pbWF0ZWRBcnJheSh2YWx1ZXMpIHtcbiAgdGhpcy52YWx1ZXMgPSB2YWx1ZXM7XG59XG5BbmltYXRlZEFycmF5LnByb3RvdHlwZS5uZXh0VGljayA9IGZ1bmN0aW9uKG5vdykge1xuICB2YXIgcmVzID0gZmFsc2U7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy52YWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAodGhpcy52YWx1ZXNbaV0ubmV4dFRpY2sobm93KSkge1xuICAgICAgcmVzID0gdHJ1ZVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufTtcblxuLy8gZXhwb3J0IGZ1bmN0aW9uIEFuaW1hdGVkVmFsdWUodmFsdWUsIGR1cmF0aW9uPTApIHtcbi8vICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuLy8gICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb24gKiAxMDAwO1xuLy8gICB0aGlzLmlzQW5pbWF0ZSA9IGZhbHNlO1xuLy8gfVxuLy9cbi8vIEFuaW1hdGVkVmFsdWUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBkdXJhdGlvbj0wKSB7XG4vLyAgIHRoaXMudmFsdWUgPSBuZXdWYWx1ZTtcbi8vIH1cblxuLy8gQW5pbWF0ZWRWYWx1ZS5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBkdXJhdGlvbikge1xuLy8gICB0aGlzLmZyb20gPSB0aGlzLnZhbHVlO1xuLy8gICB0aGlzLnRvID0gbmV3VmFsdWU7XG4vLyAgIGlmIChkdXJhdGlvbikgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uKjEwMDA7XG4vLyAgIHRoaXMuaXNBbmltYXRlID0gdHJ1ZTtcbi8vXG4vLyAgIHZhciBpID0gMDtcbi8vICAgdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuLy8gICAgIGlmICh0aGlzLnZhbHVlID09PSB0aGlzLnRvKSB7XG4vLyAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbi8vICAgICAgIC8vIGlmICh0aGlzLmNiKSB0aGlzLmNiKCk7XG4vLyAgICAgICB0aGlzLmlzQW5pbWF0ZSA9IGZhbHNlO1xuLy8gICAgICAgcmV0dXJuO1xuLy8gICAgIH1cbi8vICAgICBpKys7XG4vLyAgICAgdmFyIHAgPSBpIC8gKHRoaXMuZHVyYXRpb24gLyBGUkVRKTtcbi8vICAgICBpZiAocCA+IDEpIHAgPSAxO1xuLy8gICAgIC8vIFRPRE8gRWFzaW5nIGhlcmVcbi8vICAgICB0aGlzLnZhbHVlID0gdGhpcy5mcm9tICsgKHRoaXMudG8gLSB0aGlzLmZyb20pICogcDtcbi8vICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnZhbHVlKTtcbi8vICAgfSwgRlJFUSk7XG4vLyB9XG4vLyBleHBvcnQgZnVuY3Rpb24gY3JlYXRlQW5pbWF0aW9uU3RhY2soKSB7XG4vLyAgIHJldHVybiB7XG4vLyAgICAgYW5pbXM6IFtdLFxuLy8gICAgIGFkZDogZnVuY3Rpb24oZnJvbSwgdG8sIGR1cmF0aW9uPTEsIGNiKSB7XG4vLyAgICAgICB2YXIgYSA9IGNyZWF0ZUFuaW1hdGlvbihmcm9tLCB0bywgZHVyYXRpb24pO1xuLy8gICAgICAgYS5jYiA9IGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICB0aGlzLnJlbW92ZShhKTtcbi8vICAgICAgIH0uYmluZCh0aGlzKTtcbi8vICAgICAgIHRoaXMuYW5pbXMucHVzaChhKTtcbi8vICAgICB9LFxuLy8gICAgIHJlbW92ZTogZnVuY3Rpb24oYSkge1xuLy8gICAgICAgaWYgKHRoaXMuYW5pbXMuaW5kZXhPZihhKSAhPT0gLTEpIHtcbi8vICAgICAgICAgdGhpcy5hbmltcy5zcGxpY2UodGhpcy5hbmltcy5pbmRleE9mKGEpLCAxKTtcbi8vICAgICAgIH1cbi8vICAgICB9LFxuLy8gICAgIHBsYXk6IGZ1bmN0aW9uKCkge1xuLy8gICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmFuaW1zLmxlbmd0aDsgaSsrKSB7XG4vLyAgICAgICAgIHRoaXMuYW5pbXNbaV0ucGxheSgpO1xuLy8gICAgICAgfVxuLy8gICAgIH1cbi8vICAgfTtcbi8vIH1cblxuLy8gQW5pbWF0ZWRWYWx1ZS5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBkdXJhdGlvbikge1xuLy8gICB0aGlzLmZyb20gPSB0aGlzLnZhbHVlO1xuLy8gICB0aGlzLnRvID0gbmV3VmFsdWU7XG4vLyAgIGlmIChkdXJhdGlvbikgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uKjEwMDA7XG4vLyAgIHRoaXMuaXNBbmltYXRlID0gdHJ1ZTtcbi8vXG4vLyAgIHZhciBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuLy9cbi8vICAgZnVuY3Rpb24gdXBkYXRlKCkge1xuLy8gICAgIHZhciBwID0gKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnQpIC8gdGhpcy5kdXJhdGlvbjtcbi8vICAgICBpZiAocCA+IDEpIHAgPSAxO1xuLy8gICAgIC8vVE9ETyBFYWRpbmcgaGVyZVxuLy8gICAgIHRoaXMudmFsdWUgPSB0aGlzLmZyb20gKyAodGhpcy50byAtIHRoaXMuZnJvbSkgKiBwO1xuLy8gICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudmFsdWUpO1xuLy8gICAgIGlmIChwIDwgMSkgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZS5iaW5kKHRoaXMpKTtcbi8vICAgfTtcbi8vICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZS5iaW5kKHRoaXMpKTtcbi8vIH1cblxuLy8gZnVuY3Rpb24gYW5pbWF0ZUFycmF5KGZyb21BLCB0b0EsIGR1cmF0aW9uLCBjYiwgb25GaW5pc2hDYikge1xuLy8gICB2YXIgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbi8vXG4vLyAgIHZhciBBID0gZnJvbUE7XG4vLyAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbi8vICAgICB2YXIgcCA9IChwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0KSAvIChkdXJhdGlvbioxMDAwKTtcbi8vICAgICBpZiAocCA+IDEpIHAgPSAxO1xuLy8gICAgIEEgPSBmcm9tQS5tYXAoKGEsIGkpID0+IGEgKyAodG9BW2ldLWEpKnApO1xuLy8gICAgIGNiKEEpO1xuLy8gICAgIGlmIChwID09PSAxKSB7XG4vLyAgICAgICBpZiAob25GaW5pc2hDYikgb25GaW5pc2hDYigpO1xuLy8gICAgICAgcmV0dXJuO1xuLy8gICAgIH1cbi8vICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlKTtcbi8vICAgfVxuLy8gICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlKTtcbi8vIH1cbiIsImltcG9ydCB7IENoYXJ0QmFzZSwgZ2V0U2NyZWVuWEJ5SW5kLCBnZXRZQ29vcmRzLCBnZXRTY3JlZW5ZIH0gZnJvbSAnLi9jaGFydCc7XG5pbXBvcnQgeyBBbmltYXRlZFZhbHVlLCBBbmltYXRlZEFycmF5LCBtYWluIH0gZnJvbSAnLi4vYW5pbWF0aW9ucyc7XG5pbXBvcnQgeyBjcmVhdGVJbmZvIH0gZnJvbSAnLi9wb2ludC1pbmZvJztcbmltcG9ydCB7XG4gIGNyZWF0ZUxhYmVsRnJvbURhdGUsXG4gIGdldE1pbiwgZ2V0TWF4LFxuICBkZWJvdW5jZSwgZ2V0R3JpZFZhbHVlc0J5TWF4XG59IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7XG4gIENIQVJUX0dSSURfUEFERElORyxcbiAgQ0hBUlRfSEVBREVSX0hFSUdIVCxcbiAgQ0hBUlRfSEVBREVSX01BUkdJTl9CT1RUT00sXG4gIENIQVJUX01BWF9XSURUSCxcbiAgQ0hBUlRfTUlOX0hFSUdIVCxcbiAgQ0hBUlRfTUFYX0hFSUdIVCxcbiAgWV9BTklNQVRJT05fVElNRSxcbiAgT1lfTEFCRUxTX01BUkdJTl9UT1Bcbn0gZnJvbSAnLi4vY29uc3RzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGJhckNoYXJ0KGNvbnRhaW5lciwgZGF0YSwgbmFtZSkge1xuICB2YXIgY2hhcnQgPSBuZXcgQmFyQ2hhcnQoY29udGFpbmVyLCBkYXRhLCBuYW1lKTtcbiAgcmV0dXJuIGNoYXJ0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQmFyQ2hhcnQoY29udGFpbmVyLCBkYXRhKSB7XG4gIGNvbnNvbGUubG9nKGRhdGEpO1xuICBDaGFydEJhc2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgdGhpcy5MKys7XG4gIHRoaXMuaW5pdCgpO1xufVxuXG5CYXJDaGFydC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENoYXJ0QmFzZS5wcm90b3R5cGUpO1xuQmFyQ2hhcnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmFyQ2hhcnQ7XG5cbkJhckNoYXJ0LnByb3RvdHlwZS51cGRhdGVEYXRlUmFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gIENoYXJ0QmFzZS5wcm90b3R5cGUudXBkYXRlRGF0ZVJhbmdlLmNhbGwodGhpcywgdGhpcy5zdGFydEluZCwgdGhpcy5lbmRJbmQtMSlcbn1cblxuQmFyQ2hhcnQucHJvdG90eXBlLmluaXREYXRhID0gZnVuY3Rpb24oKSB7XG4gIENoYXJ0QmFzZS5wcm90b3R5cGUuaW5pdERhdGEuY2FsbCh0aGlzLCAxNTApO1xufVxuXG5CYXJDaGFydC5wcm90b3R5cGUuY2FsY3VsYXRlT3hMYWJlbHNPZmZzZXRYID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLm94TGFiZWxzT2Zmc2V0WCA9IHRoaXMub2Zmc2V0WCArIHRoaXMuYmFyV2lkdGgvMiAtIHRoaXMubGFiZWxXaWR0aEhhbGY7XG59O1xuXG5CYXJDaGFydC5wcm90b3R5cGUuY2FsY3VsYXRlVmFsdWVzTWF4WSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gZ2V0TWF4KHRoaXMuY29sdW1uc1swXS52YWx1ZXMuc2xpY2UoTWF0aC5tYXgoMCwgdGhpcy5zdGFydEluZC0xKSwgdGhpcy5lbmRJbmQrMSkpO1xufVxuXG5CYXJDaGFydC5wcm90b3R5cGUuZHJhd1ByZXZpZXcgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5jdHguY2xlYXJSZWN0KHRoaXMucHJldmlld0NoYXJ0WCwgdGhpcy5wcmV2aWV3Q2hhcnRZLCB0aGlzLnByZXZpZXdDaGFydFdpZHRoLCB0aGlzLnByZXZpZXdDaGFydEhlaWdodCk7XG5cbiAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gIHRoaXMuY3R4Lmdsb2JhbEFscGhhID0gMTsgLy8gRklYTUUgQWxwaGEgdG8gY29uc3RcbiAgdGhpcy5jdHguZmlsbFN0eWxlID0gdGhpcy5jb2x1bW5zWzBdLmNvbG9yO1xuXG4gIHZhciBYID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5veExhYmVscy5sZW5ndGg7IGkrKykge1xuICAgIFgucHVzaChnZXRTY3JlZW5YQnlJbmQoaSwgdGhpcy5wcmV2aWV3Q2hhcnRTdGVwLCB0aGlzLnByZXZpZXdDaGFydFgpKTtcbiAgfVxuICB2YXIgbWF4ID0gZ2V0TWF4KHRoaXMuY29sdW1uc1swXS52YWx1ZXMpO1xuICB2YXIgWSA9IGdldFlDb29yZHModGhpcy5wcmV2aWV3Q2hhcnRIZWlnaHQsIHRoaXMuY29sdW1uc1swXS52YWx1ZXMsIG1heCkubWFwKHkgPT4gdGhpcy5wcmV2aWV3Q2hhcnRZICsgeSk7XG5cbiAgdmFyIGJhcldpZHRoID0gWFsxXSAtIFhbMF07XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgWC5sZW5ndGg7IGkrKykge1xuICAgIHRoaXMuY3R4LnJlY3QoWFtpXSwgWVtpXSwgYmFyV2lkdGgsIHRoaXMuaCAtIFlbaV0pO1xuICB9XG4gIHRoaXMuY3R4LmZpbGwoKTtcbn1cblxuQmFyQ2hhcnQucHJvdG90eXBlLmRyYXdTZXF1ZW5jZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5kcmF3Q2hhcnRDb250ZW50KCk7XG4gIHRoaXMuZHJhd0JnKCk7XG4gIHRoaXMuZHJhd1NlbGVjdGVkKCk7XG59O1xuXG5CYXJDaGFydC5wcm90b3R5cGUuaW5pdEJ1dHRvbnMgPSBmdW5jdGlvbiAoKSB7fTtcblxuQmFyQ2hhcnQucHJvdG90eXBlLmRyYXdDaGFydENvbnRlbnQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gIHRoaXMuY3R4Lmdsb2JhbEFscGhhID0gKHRoaXMuc2VsZWN0ZWRJbmQgPiAtMSkgPyAwLjYgOiAxOyAvLyBGSVhNRSBBbHBoYSB0byBjb25zdFxuICB2YXIgYmFyVyA9IE1hdGgucm91bmQodGhpcy5iYXJXaWR0aCp0aGlzLnJvdW5kKS90aGlzLnJvdW5kO1xuICB2YXIgc0kgPSBNYXRoLm1heCh0aGlzLnN0YXJ0SW5kIC0gdGhpcy5kcmF3SW5kT2Zmc2V0LCAwKTtcbiAgdmFyIGVJID0gTWF0aC5taW4odGhpcy5lbmRJbmQgKyB0aGlzLmRyYXdJbmRPZmZzZXQsIHRoaXMuTCk7XG5cbiAgdmFyIFggPSBbXTtcbiAgZm9yICh2YXIgaSA9IHNJOyBpIDwgZUkrMTsgaSsrKSB7XG4gICAgWC5wdXNoKGdldFNjcmVlblhCeUluZChpLCBiYXJXLCB0aGlzLm9mZnNldFgpKTtcbiAgfVxuXG4gIHZhciBZID0gZ2V0WUNvb3Jkcyh0aGlzLmJvdHRvbVksIHRoaXMuY29sdW1uc1swXS52YWx1ZXMuc2xpY2Uoc0ksIGVJKzEpLCB0aGlzLmdyaWRNYXhZLnZhbHVlKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBYLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGkgIT09IHRoaXMuc2VsZWN0ZWRJbmQgLSBzSSkge1xuICAgICAgdGhpcy5jdHgucmVjdChYW2ldLCBZW2ldLCBiYXJXLCB0aGlzLmJvdHRvbVkgLSBZW2ldKTtcbiAgICB9XG4gIH1cbiAgdGhpcy5jdHguZmlsbFN0eWxlID0gdGhpcy5jb2x1bW5zWzBdLmNvbG9yO1xuICB0aGlzLmN0eC5maWxsKCk7XG5cbiAgaWYgKHRoaXMuc2VsZWN0ZWRJbmQgPiAtMSkge1xuICAgIHRoaXMuZHJhd1NlbGVjdGVkQ2hhcnRDb250ZW50KCk7XG4gIH1cbn1cblxuQmFyQ2hhcnQucHJvdG90eXBlLmdldEluZEJ5U2NyZWVuWCA9IGZ1bmN0aW9uICh4LCBzdGVwPXRoaXMuYmFyV2lkdGgsIG9mZnNldD10aGlzLm9mZnNldFgpIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoKHggLSBvZmZzZXQpL3N0ZXApO1xufVxuXG5CYXJDaGFydC5wcm90b3R5cGUuZHJhd1NlbGVjdGVkID0gZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLnNlbGVjdGVkSW5kID49IDApIHtcbiAgICAvLyB0aGlzLmRyYXdTZWxlY3RlZENoYXJ0Q29udGVudCgpO1xuXG4gICAgdGhpcy5pbmZvLnN0eWxlLmxlZnQgPSBNYXRoLm1heCh0aGlzLnNlbGVjdGVkU2NyZWVuWCAtIHRoaXMuaW5mby5vZmZzZXRXaWR0aCAtIDMwLCAwKSArICdweCc7IC8vIEZJWE1FIHRoaXMuaW5mbyBtYXJnaW5cbiAgICB0aGlzLmluZm8uc3R5bGUudG9wID0gTWF0aC5tYXgodGhpcy5zZWxlY3RlZFNjcmVlblkgLSB0aGlzLmluZm8ub2Zmc2V0SGVpZ2h0LCAwKSArICdweCc7XG4gICAgdGhpcy5pbmZvLmFwcGVhcigpO1xuICB9XG4gIGVsc2Uge1xuICAgIHRoaXMuaW5mby5kaXNhcHBlYXIoKVxuICB9XG59XG5cbkJhckNoYXJ0LnByb3RvdHlwZS5kcmF3U2VsZWN0ZWRDaGFydENvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBiYXJXID0gTWF0aC5yb3VuZCh0aGlzLmJhcldpZHRoKnRoaXMucm91bmQpL3RoaXMucm91bmQ7XG5cbiAgdmFyIHNlbGVjdGVkSW5kWCA9IHRoaXMuZ2V0U2NyZWVuWEJ5SW5kKHRoaXMuc2VsZWN0ZWRJbmQpO1xuICB2YXIgc2VsZWN0ZWRJbmRZID0gTWF0aC5mbG9vcihnZXRTY3JlZW5ZKHRoaXMuYm90dG9tWSwgdGhpcy5jb2x1bW5zWzBdLnZhbHVlc1t0aGlzLnNlbGVjdGVkSW5kXSwgdGhpcy5ncmlkTWF4WS52YWx1ZSkpO1xuXG4gIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICB0aGlzLmN0eC5nbG9iYWxBbHBoYSA9IDE7XG4gIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29sdW1uc1swXS5jb2xvcjtcbiAgdGhpcy5jdHgucmVjdChzZWxlY3RlZEluZFgsIHNlbGVjdGVkSW5kWSwgYmFyVywgdGhpcy5ib3R0b21ZIC0gc2VsZWN0ZWRJbmRZKTtcbiAgdGhpcy5jdHguZmlsbCgpO1xufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUJ1dHRvbihjb2xvciwgdGV4dCwgb25DbGljaykge1xuICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIGJ1dHRvbi5uYW1lID0gdGV4dDtcbiAgYnV0dG9uLmlzT24gPSB0cnVlO1xuICBidXR0b24uY2xhc3NMaXN0LmFkZCgnY2hhcnQtYnV0dG9uJyk7XG4gIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjaGVja21hcmsnKTtcbiAgYnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yO1xuXG4gIHZhciBpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gIGkuc2V0QXR0cmlidXRlKCdzcmMnLCAnY2hlY2suc3ZnJyk7XG4gIGJ1dHRvbi5hcHBlbmQoaSlcbiAgYnV0dG9uLmFwcGVuZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0KSk7XG5cbiAgYnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICBidXR0b24uaXNPbiA9ICFidXR0b24uaXNPbjtcbiAgICBpZiAoIWJ1dHRvbi5pc09uKSB7XG4gICAgICAvLyBidXR0b24uc3R5bGUuYm9yZGVyV2lkdGggPSAnMHB4JztcbiAgICB9XG4gICAgaWYgKG9uQ2xpY2spIG9uQ2xpY2soYnV0dG9uLm5hbWUsIGJ1dHRvbi5pc09uKTtcbiAgfTtcblxuICByZXR1cm4gYnV0dG9uO1xufVxuIiwiaW1wb3J0IHsgcHJldmlldyB9IGZyb20gJy4vcHJldmlldy11aSc7XG5pbXBvcnQgeyBjcmVhdGVJbmZvIH0gZnJvbSAnLi9wb2ludC1pbmZvJztcbmltcG9ydCB7IGNyZWF0ZUJ1dHRvbiB9IGZyb20gJy4vYnV0dG9uJztcbmltcG9ydCB7IEFuaW1hdGVkVmFsdWUgfSBmcm9tICcuLi9hbmltYXRpb25zJztcbmltcG9ydCB7XG4gIGNyZWF0ZUxhYmVsRnJvbURhdGUsXG4gIGdldE1hdHJpeE1heCxcbiAgZ2V0U3RlcEZvckdyaWRWYWx1ZXMsXG4gIGdldERhdGFDb2x1bW5CeU5hbWUsXG4gIGRlYm91bmNlXG59IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7XG4gIE9YTEFCRUxTX0hFSUdIVCxcbiAgQ0hBUlRfR1JJRF9QQURESU5HLFxuICBHUklEX0xJTkVTX0NPVU5ULFxuICBQUkVWSUVXX0hFSUdIVCxcbiAgUFJFVklFV19JTk5FUl9NQVJHSU5fVE9QLFxuICBDSEFSVF9IRUFERVJfSEVJR0hULFxuICBDSEFSVF9IRUFERVJfTUFSR0lOX0JPVFRPTSxcbiAgQ0hBUlRfTUFYX1dJRFRILFxuICBDSEFSVF9NSU5fSEVJR0hULFxuICBDSEFSVF9NQVhfSEVJR0hULFxuICBZX0FOSU1BVElPTl9USU1FLFxuICBPWV9MQUJFTFNfTUFSR0lOX1RPUCxcbiAgUFJFVklFV19EQVlfVEhFTUUsXG4gIFBSRVZJRVdfTklHSFRfVEhFTUUsXG4gIENIQVJUX0RBWV9USEVNRSxcbiAgQ0hBUlRfTklHSFRfVEhFTUUsXG4gIE9YX0xBQkVMU19BTklNQVRJT05fRFVSQVRJT04sXG4gIFBSRVZJRVdfQ0hBUlRfSEVJR0hULFxuICBQUkVWSUVXX0NIQVJUX01BUkdJTixcbn0gZnJvbSAnLi4vY29uc3RzJztcblxuZXhwb3J0IGZ1bmN0aW9uIENoYXJ0QmFzZShjb250YWluZXIsIGRhdGEsIG5hbWUpIHtcbiAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gIHRoaXMuY2hhcnRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgdGhpcy5jaGFydENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjaGFydCcpO1xuXG4gIHRoaXMucGl4ZWxSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuXG4gIHRoaXMudyA9IE1hdGgubWluKGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCwgQ0hBUlRfTUFYX1dJRFRIKTtcbiAgdGhpcy5oID0gNDAwO1xuXG4gIHRoaXMubmFtZSA9IG5hbWU7XG4gIHRoaXMuY2hhcnRDb250YWluZXIuc3R5bGUud2lkdGggPSB0aGlzLncgKyAncHgnO1xuICB0aGlzLmNoYXJ0Q29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcblxuICB0aGlzLmluaXRIZWFkZXIoKTtcbiAgdGhpcy5pbml0Q2FudmFzKCk7XG4gIHRoaXMuaW5pdFByZXZpZXdVSSgpO1xuXG4gIHRoaXMucHJldmlld1VJTGVmdFggPSAwLjg7IC8vIEZJWE1FIE1vdmUgdG8gY2hhcnQgaW5pdGlhbCBkYXRhXG4gIHRoaXMucHJldmlld1VJUmlnaHRYID0gMTsgLy8gRklYTUUgTW92ZSB0byBjaGFydCBpbml0aWFsIGRhdGFcblxuICB0aGlzLmRhdGEgPSBkYXRhO1xuXG4gIHRoaXMuaW5mbztcbiAgdGhpcy5yb3VuZCA9IDEwMDA7XG5cbiAgdGhpcy5pbml0RGF0YSgpO1xuICB0aGlzLkwgPSB0aGlzLm94TGFiZWxzLmxlbmd0aCAtIDE7IC8vIEZJWE1FIFJlbmFtZVxuXG4gIHRoaXMuYWRkTGlzdGVuZXJzKCk7XG5cbiAgY29udGFpbmVyLmFwcGVuZCh0aGlzLmNoYXJ0Q29udGFpbmVyKTtcbn1cblxuQ2hhcnRCYXNlLnByb3RvdHlwZS5hZGRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBkZWJvdW5jZSh0aGlzLm9uUmVzaXplLCAyMCkuYmluZCh0aGlzKSk7XG59XG5cbkNoYXJ0QmFzZS5wcm90b3R5cGUuc3dpdGNoTW9kZSA9IGZ1bmN0aW9uIChpc0RheT10cnVlKSB7XG4gIGlmIChpc0RheSkge1xuICAgIHRoaXMucHJldmlld1VJLnN3aXRjaFRoZW1lKFBSRVZJRVdfREFZX1RIRU1FKTtcbiAgICB0aGlzLmluaXRDb2xvcnMoQ0hBUlRfREFZX1RIRU1FKTtcbiAgICB0aGlzLmhlYWRlci5zdHlsZS5jb2xvciA9IENIQVJUX0RBWV9USEVNRS5jaGFydFRpdGxlQ29sb3I7XG4gICAgdGhpcy5pbmZvLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IENIQVJUX0RBWV9USEVNRS5pbmZvQmFja2dyb3VuZENvbG9yO1xuICAgIHRoaXMuaW5mby5zdHlsZS5jb2xvciA9IENIQVJUX0RBWV9USEVNRS5pbmZvVGV4dENvbG9yO1xuICB9XG4gIGVsc2Uge1xuICAgIHRoaXMucHJldmlld1VJLnN3aXRjaFRoZW1lKFBSRVZJRVdfTklHSFRfVEhFTUUpO1xuICAgIHRoaXMuaW5pdENvbG9ycyhDSEFSVF9OSUdIVF9USEVNRSk7XG4gICAgdGhpcy5oZWFkZXIuc3R5bGUuY29sb3IgPSBDSEFSVF9OSUdIVF9USEVNRS5jaGFydFRpdGxlQ29sb3I7XG4gICAgdGhpcy5pbmZvLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IENIQVJUX05JR0hUX1RIRU1FLmluZm9CYWNrZ3JvdW5kQ29sb3I7XG4gICAgdGhpcy5pbmZvLnN0eWxlLmNvbG9yID0gQ0hBUlRfTklHSFRfVEhFTUUuaW5mb1RleHRDb2xvcjtcbiAgfVxuICB0aGlzLmRyYXcoKTtcbn1cblxuQ2hhcnRCYXNlLnByb3RvdHlwZS5pbml0Q29sb3JzID0gZnVuY3Rpb24gKHRoZW1lKSB7XG4gIHRoaXMuZ3JpZExpbmVzQ29sb3IgPSB0aGVtZS5ncmlkTGluZXNDb2xvcjtcbiAgdGhpcy5ncmlkVGV4dHNDb2xvciA9IHRoZW1lLmdyaWRUZXh0c0NvbG9yO1xuICB0aGlzLmNoYXJ0VGl0bGVDb2xvciA9IHRoZW1lLmNoYXJ0VGl0bGVDb2xvcjtcbn07XG5cbkNoYXJ0QmFzZS5wcm90b3R5cGUuaW5pdENhbnZhcyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLncgKiB0aGlzLnBpeGVsUmF0aW87XG4gIHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMuaCAqIHRoaXMucGl4ZWxSYXRpbztcbiAgdGhpcy5jYW52YXMuc3R5bGUud2lkdGggPSB0aGlzLncgKyAncHgnO1xuICB0aGlzLmNhbnZhcy5zdHlsZS5oZWlnaHQgPSB0aGlzLmggKyAncHgnO1xuXG4gIHRoaXMuY2FudmFzLm9ubW91c2VlbnRlciA9IHRoaXMub25Nb3VzZUVudGVyLmJpbmQodGhpcyk7XG4gIHRoaXMuY2hhcnRDb250YWluZXIuYXBwZW5kKHRoaXMuY2FudmFzKTtcbiAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICB0aGlzLmN0eC5zY2FsZSh0aGlzLnBpeGVsUmF0aW8sIHRoaXMucGl4ZWxSYXRpbyk7XG59XG5cbkNoYXJ0QmFzZS5wcm90b3R5cGUub25BY3Rpb25VcGRhdGUgPSBmdW5jdGlvbihhY3Rpb24pIHtcbiAgdGhpcy5wcmV2aWV3VUlTdGF0ZSA9IGFjdGlvbjtcbiAgdGhpcy5zdGFydFVwZGF0ZSgpO1xufVxuXG5DaGFydEJhc2UucHJvdG90eXBlLmluaXRQcmV2aWV3VUkgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMucHJldmlld1VJID0gcHJldmlldyh0aGlzLncgLSBDSEFSVF9HUklEX1BBRERJTkcqMiwgUFJFVklFV19IRUlHSFQsIHRoaXMucGl4ZWxSYXRpbywgdGhpcy5vbkFjdGlvblVwZGF0ZS5iaW5kKHRoaXMpKTtcbiAgdGhpcy5wcmV2aWV3VUkuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICB0aGlzLnByZXZpZXdVSS5zdHlsZS50b3AgPSB0aGlzLmggLSBQUkVWSUVXX0lOTkVSX01BUkdJTl9UT1AgKyAncHgnO1xuICB0aGlzLnByZXZpZXdVSS5zdHlsZS5sZWZ0ID0gQ0hBUlRfR1JJRF9QQURESU5HICsgJ3B4JztcblxuICB0aGlzLnByZXZpZXdVSVN0YXRlID0gbnVsbDtcblxuICB0aGlzLmNoYXJ0Q29udGFpbmVyLmFwcGVuZCh0aGlzLnByZXZpZXdVSSk7XG59XG5cbkNoYXJ0QmFzZS5wcm90b3R5cGUudXBkYXRlV2lkdGggPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLncgKiB0aGlzLnBpeGVsUmF0aW87XG4gIHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMuaCAqIHRoaXMucGl4ZWxSYXRpbztcbiAgdGhpcy5jYW52YXMuc3R5bGUud2lkdGggPSB0aGlzLncgKyAncHgnXG4gIHRoaXMuY3R4LnNjYWxlKHRoaXMucGl4ZWxSYXRpbywgdGhpcy5waXhlbFJhdGlvKTtcblxuICB0aGlzLnByZXZpZXdVSS51cGRhdGVXaWR0aCh0aGlzLncgLSBDSEFSVF9HUklEX1BBRERJTkcqMiwgdGhpcy5waXhlbFJhdGlvKTtcblxuICB0aGlzLmhlYWRlci5zdHlsZS53aWR0aCA9IHRoaXMudyAtIENIQVJUX0dSSURfUEFERElORyoyICsgJ3B4JztcbiAgdGhpcy5ncmlkV2lkdGggPSB0aGlzLncgLSBDSEFSVF9HUklEX1BBRERJTkcqMjtcbiAgdGhpcy5jb3VudE9uU2NyZWVuID0gdGhpcy53L3RoaXMub3hMYWJlbFdpZHRoO1xuICB0aGlzLnByZXZpZXdDaGFydFdpZHRoID0gdGhpcy53IC0gQ0hBUlRfR1JJRF9QQURESU5HKjI7XG4gIHRoaXMucHJldmlld0NoYXJ0U3RlcCA9IE1hdGgucm91bmQoKHRoaXMucHJldmlld0NoYXJ0V2lkdGgvKHRoaXMuTCkpKnRoaXMucm91bmQpL3RoaXMucm91bmQ7XG4gIGlmICh0aGlzLmJ1dHRvbnNDb250YWluZXIpIHtcbiAgICB0aGlzLmJ1dHRvbnNDb250YWluZXIuc3R5bGUud2lkdGggPSB0aGlzLncgLSBDSEFSVF9HUklEX1BBRERJTkcqMiArICdweCc7XG4gIH1cblxuICB0aGlzLm5lZWREcmF3UHJldmlldyA9IHRydWU7XG4gIHRoaXMudXBkYXRlKCk7XG59XG5cbkNoYXJ0QmFzZS5wcm90b3R5cGUudXBkYXRlSGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnByZXZpZXdVSS5zdHlsZS50b3AgPSB0aGlzLmggLSBQUkVWSUVXX0NIQVJUX0hFSUdIVCAtIFBSRVZJRVdfSU5ORVJfTUFSR0lOX1RPUCArICdweCc7XG4gIHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMuaDtcblxuICB0aGlzLmJvdHRvbVkgPSB0aGlzLmggLSBPWExBQkVMU19IRUlHSFQgLSBQUkVWSUVXX0NIQVJUX0hFSUdIVCAtIFBSRVZJRVdfQ0hBUlRfTUFSR0lOO1xuICB0aGlzLm94TGFiZWxzQm90dG9tWSA9IHRoaXMuaCAtIFBSRVZJRVdfQ0hBUlRfSEVJR0hUIC0gUFJFVklFV19DSEFSVF9NQVJHSU47XG4gIHRoaXMucHJldmlld0NoYXJ0WSA9IHRoaXMuaCAtIFBSRVZJRVdfQ0hBUlRfSEVJR0hUICsgMTtcbn07XG5cbkNoYXJ0QmFzZS5wcm90b3R5cGUub25SZXNpemUgPSBmdW5jdGlvbihlKSB7XG4gIHZhciBuZXdXaWR0aCA9IHRoaXMuY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICB2YXIgbmV3SGVpZ2h0ID0gdGhpcy5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuXG4gIG5ld1dpZHRoID0gTWF0aC5taW4obmV3V2lkdGgsIENIQVJUX01BWF9XSURUSCk7XG4gIG5ld0hlaWdodCA9IE1hdGgubWluKG5ld0hlaWdodCwgQ0hBUlRfTUFYX0hFSUdIVCk7XG4gIG5ld0hlaWdodCA9IE1hdGgubWF4KG5ld0hlaWdodCwgQ0hBUlRfTUlOX0hFSUdIVCk7XG5cbiAgaWYgKG5ld1dpZHRoICE9PSB0aGlzLncgfHwgdGhpcy5waXhlbFJhdGlvICE9PSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbykge1xuICAgIHRoaXMucGl4ZWxSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgIHRoaXMudyA9IG5ld1dpZHRoO1xuICAgIHRoaXMudXBkYXRlV2lkdGgoKTtcbiAgfVxuXG4gIGlmIChuZXdIZWlnaHQgIT09IHRoaXMuaCkgeyB9XG5cbn07XG5cbkNoYXJ0QmFzZS5wcm90b3R5cGUuaW5pdEhlYWRlciA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5oZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgdGhpcy5oZWFkZXIuY2xhc3NMaXN0LmFkZCgnY2hhcnQtaGVhZGVyJyk7XG4gIHRoaXMuaGVhZGVyLnN0eWxlLndpZHRoID0gdGhpcy53IC0gQ0hBUlRfR1JJRF9QQURESU5HKjIgKyAncHgnO1xuICB0aGlzLmhlYWRlci5zdHlsZS5oZWlnaHQgPSBDSEFSVF9IRUFERVJfSEVJR0hUICsgJ3B4JztcbiAgLy8gaGVhZGVyLnN0eWxlLm1hcmdpbkxlZnQgPSBDSEFSVF9HUklEX1BBRERJTkcgKyAncHgnO1xuICB0aGlzLmhlYWRlci5zdHlsZS5tYXJnaW4gPSAnMCAwICcgKyBDSEFSVF9IRUFERVJfTUFSR0lOX0JPVFRPTSArICdweCAnICsgQ0hBUlRfR1JJRF9QQURESU5HICsgJ3B4JztcblxuICB2YXIgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoNCcpO1xuICB0aXRsZS5pbm5lckhUTUwgPSB0aGlzLm5hbWUgKyAnICcgKyB0aGlzLnBpeGVsUmF0aW87XG4gIHRoaXMuaGVhZGVyLmFwcGVuZCh0aXRsZSk7XG5cbiAgdGhpcy5kYXRlUmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoNScpO1xuICAvLyB0aGlzLmRhdGVSYW5nZS5pZCA9IHRoaXMubmFtZSArICdkYXRlLXJhbmdlJztcbiAgdGhpcy5kYXRlUmFuZ2UuaW5uZXJIVE1MID0gJ1NhdCwgMTEgQXByIDIwMjAgLSBNb24sIDEyIE1hciAyMDIxJzsgLy8gRklYTUUgSW5pdCB3aXRoIGluaXRpYWwgZGF0YVxuICB0aGlzLmhlYWRlci5hcHBlbmQodGhpcy5kYXRlUmFuZ2UpO1xuXG4gIHRoaXMuY2hhcnRDb250YWluZXIuYXBwZW5kKHRoaXMuaGVhZGVyKTtcbn1cblxuQ2hhcnRCYXNlLnByb3RvdHlwZS51cGRhdGVEYXRlUmFuZ2UgPSBmdW5jdGlvbiAoc0k9dGhpcy5zdGFydEluZCwgZUk9dGhpcy5lbmRJbmQpIHtcbiAgdGhpcy5kYXRlUmFuZ2UuaW5uZXJIVE1MID0gY3JlYXRlTGFiZWxGcm9tRGF0ZSh0aGlzLmRhdGVDb2x1bW5bc0ldLCB0cnVlKSArICcgLSAnICsgY3JlYXRlTGFiZWxGcm9tRGF0ZSh0aGlzLmRhdGVDb2x1bW5bZUldLCB0cnVlKTtcbn1cblxuQ2hhcnRCYXNlLnByb3RvdHlwZS5pbml0RGF0YSA9IGZ1bmN0aW9uKGRhdGFMZW5ndGg9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSB7XG4gIHRoaXMuZGF0ZUNvbHVtbiA9IGdldERhdGFDb2x1bW5CeU5hbWUoJ3gnLCB0aGlzLmRhdGEuY29sdW1ucyk7XG4gIHRoaXMub3hMYWJlbHMgPSB0aGlzLmRhdGVDb2x1bW4uc2xpY2UoMCwgZGF0YUxlbmd0aCkubWFwKGRhdGUgPT4gY3JlYXRlTGFiZWxGcm9tRGF0ZShkYXRlKSk7XG5cbiAgdGhpcy5jb2x1bW5OYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMuZGF0YS5uYW1lcyk7IC8vIEZJWE1FIFJlbW92ZVxuICB0aGlzLmNvbHVtbnMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbHVtbk5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdGhpcy5jb2x1bW5zLnB1c2goe1xuICAgICAgaWQ6IHRoaXMuY29sdW1uTmFtZXNbaV0sXG4gICAgICBuYW1lOiB0aGlzLmRhdGEubmFtZXNbdGhpcy5jb2x1bW5OYW1lc1tpXV0sXG4gICAgICBpc09uOiB0cnVlLFxuICAgICAgY29sb3I6IHRoaXMuZGF0YS5jb2xvcnNbdGhpcy5jb2x1bW5OYW1lc1tpXV0sXG4gICAgICBhbHBoYTogbmV3IEFuaW1hdGVkVmFsdWUoMSwgWV9BTklNQVRJT05fVElNRSksXG4gICAgICB2YWx1ZXM6IGdldERhdGFDb2x1bW5CeU5hbWUodGhpcy5jb2x1bW5OYW1lc1tpXSwgdGhpcy5kYXRhLmNvbHVtbnMpLnNsaWNlKDAsIGRhdGFMZW5ndGgpXG4gICAgfSk7XG4gIH1cbn1cblxuQ2hhcnRCYXNlLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuaW5pdERyYXdQcm9wcygpO1xuICB0aGlzLmluaXRPeFByb3BzKCk7XG4gIHRoaXMuaW5pdE95UHJvcHMoKTtcbiAgdGhpcy5pbml0UHJldmlld0NoYXJ0UHJvcHMoKTtcblxuICAvLyB0aGlzLmRyYXdwcmV2aWV3KCk7XG4gIHRoaXMuaW5pdEluZm8oKTtcbiAgdGhpcy5pbml0QnV0dG9ucygpO1xuICB0aGlzLnVwZGF0ZSgpO1xufVxuXG5DaGFydEJhc2UucHJvdG90eXBlLmluaXREcmF3UHJvcHMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5pbml0Q29sb3JzKENIQVJUX0RBWV9USEVNRSk7XG5cbiAgdGhpcy5tb3VzZVggPSBudWxsO1xuICB0aGlzLm1vdXNlWSA9IG51bGw7XG5cbiAgdGhpcy5kcmF3SW5kT2Zmc2V0ID0gMTA7XG5cbiAgdGhpcy5ib3R0b21ZID0gdGhpcy5oIC0gT1hMQUJFTFNfSEVJR0hUIC0gUFJFVklFV19DSEFSVF9IRUlHSFQgLSBQUkVWSUVXX0NIQVJUX01BUkdJTjsgLy8gRklYTUUgcmVuYW1lIHRvIG1haW5DaGFydFlcbiAgdGhpcy5veExhYmVsc0JvdHRvbVkgPSB0aGlzLmggLSBQUkVWSUVXX0NIQVJUX0hFSUdIVCAtIFBSRVZJRVdfQ0hBUlRfTUFSR0lOOyAvLyBGSVhNRSByZW5hbWUgdG8gb3hMYWJlbHNZXG5cbiAgdGhpcy5uZWVkUmVkcmF3ID0gdHJ1ZTtcbiAgdGhpcy5uZWVkRHJhd1ByZXZpZXcgPSB0cnVlO1xuXG4gIHRoaXMuZ3JpZFdpZHRoID0gdGhpcy53IC0gQ0hBUlRfR1JJRF9QQURESU5HKjI7XG5cbiAgdGhpcy5iYXJXaWR0aCA9IDA7IC8vIEZJWE1FIHJlbmFtZSB0byBzdGVwXG4gIHRoaXMub2Zmc2V0WCA9IDA7XG5cbiAgdGhpcy5vbGRSYW5nZVggPSAwO1xuICB0aGlzLmN1cnJSYW5nZVggPSAxO1xuXG4gIHRoaXMuc3RhcnRJbmQgPSAwO1xuICB0aGlzLmVuZEluZCA9IDA7XG4gIHRoaXMuc2VsZWN0ZWRJbmQgPSAtMTtcbiAgdGhpcy5zZWxlY3RlZFNjcmVlblggPSAwO1xuICB0aGlzLnNlbGVjdGVkU2NyZWVuWSA9IDA7XG59XG5cbkNoYXJ0QmFzZS5wcm90b3R5cGUuaW5pdE94UHJvcHMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5veExhYmVsV2lkdGggPSA1MDtcbiAgdGhpcy5sYWJlbFdpZHRoSGFsZiA9IDE1OyAvLyBGSVhNRSBSZW5hbWVcbiAgdGhpcy5veExhYmVsc09mZnNldFggPSAwO1xuXG4gIHRoaXMuY291bnRPblNjcmVlbiA9IHRoaXMudy90aGlzLm94TGFiZWxXaWR0aDtcbiAgdGhpcy5jdXJyT3hMYWJlbHNTdGVwID0gMTtcbiAgdGhpcy5zdGF0aWNPeExhYmVscyA9IHsgc3RlcDogMSwgbGFzdEluZDogMCwgYWxwaGE6IG5ldyBBbmltYXRlZFZhbHVlKDEsIE9YX0xBQkVMU19BTklNQVRJT05fRFVSQVRJT04pIH07XG4gIHRoaXMuZHluYW1pY094TGFiZWxzID0geyBzdGVwOiAxLCBsYXN0SW5kOiAwLCBhbHBoYTogbmV3IEFuaW1hdGVkVmFsdWUoMSwgT1hfTEFCRUxTX0FOSU1BVElPTl9EVVJBVElPTikgfTtcbn1cblxuQ2hhcnRCYXNlLnByb3RvdHlwZS5pbml0T3lQcm9wcyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmdyaWRTdGVwWSA9IDA7XG4gIHRoaXMuZ3JpZE1heFkgPSBuZXcgQW5pbWF0ZWRWYWx1ZSgwLCBZX0FOSU1BVElPTl9USU1FKTtcblxuICB0aGlzLmdyaWRMaW5lc0hlaWdodCA9IE1hdGgucm91bmQodGhpcy5ib3R0b21ZIC8gR1JJRF9MSU5FU19DT1VOVCk7XG4gIHRoaXMub2xkT3lMYWJlbHMgPSB7XG4gICAgYWxwaGE6IG5ldyBBbmltYXRlZFZhbHVlKDAsIFlfQU5JTUFUSU9OX1RJTUUpLFxuICAgIG9mZnNldFk6IHRoaXMuZ3JpZExpbmVzSGVpZ2h0LzIsXG4gICAgbGFiZWxzOiBbMCwgMSwgMiwgMywgNCwgNSwgNl1cbiAgfTtcbiAgdGhpcy5uZXdPeUxhYmVscyA9IHtcbiAgICBhbHBoYTogbmV3IEFuaW1hdGVkVmFsdWUoMSwgWV9BTklNQVRJT05fVElNRSksXG4gICAgb2Zmc2V0WTogLXRoaXMuZ3JpZExpbmVzSGVpZ2h0LzIsXG4gICAgbGFiZWxzOiBbMCwgMSwgMiwgMywgNCwgNV1cbiAgfTtcbn1cblxuQ2hhcnRCYXNlLnByb3RvdHlwZS5pbml0UHJldmlld0NoYXJ0UHJvcHMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5wcmV2aWV3Q2hhcnRYID0gQ0hBUlRfR1JJRF9QQURESU5HO1xuICB0aGlzLnByZXZpZXdDaGFydFkgPSB0aGlzLmggLSBQUkVWSUVXX0NIQVJUX0hFSUdIVCArIDE7XG4gIHRoaXMucHJldmlld0NoYXJ0V2lkdGggPSB0aGlzLncgLSBDSEFSVF9HUklEX1BBRERJTkcqMjtcbiAgdGhpcy5wcmV2aWV3Q2hhcnRIZWlnaHQgPSBQUkVWSUVXX0NIQVJUX0hFSUdIVDtcbiAgdGhpcy5wcmV2aWV3Q2hhcnRTdGVwID0gTWF0aC5yb3VuZCgodGhpcy5wcmV2aWV3Q2hhcnRXaWR0aC8odGhpcy5MKSkqdGhpcy5yb3VuZCkvdGhpcy5yb3VuZDtcbn1cblxuQ2hhcnRCYXNlLnByb3RvdHlwZS5pbml0SW5mbyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmluZm8gPSBjcmVhdGVJbmZvKCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgdGhpcy5pbmZvLmFkZFJvdyh0aGlzLmNvbHVtbnNbaV0ubmFtZSwgMCwgdGhpcy5jb2x1bW5zW2ldLmNvbG9yKTtcbiAgfVxuICB0aGlzLmNoYXJ0Q29udGFpbmVyLmFwcGVuZCh0aGlzLmluZm8pO1xufVxuXG5DaGFydEJhc2UucHJvdG90eXBlLnNlbGVjdCA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgdGhpcy5zZWxlY3RlZFNjcmVlblggPSB4O1xuICB0aGlzLnNlbGVjdGVkU2NyZWVuWSA9IHk7XG4gIHRoaXMuc2VsZWN0ZWRJbmQgPSB0aGlzLmdldEluZEJ5U2NyZWVuWCh4KTtcbiAgdGhpcy5pbmZvLnNldFRpdGxlKGNyZWF0ZUxhYmVsRnJvbURhdGUodGhpcy5kYXRlQ29sdW1uW3RoaXMuc2VsZWN0ZWRJbmRdLCB0cnVlKSk7XG4gIHRoaXMuY29sdW1ucy5maWx0ZXIoYyA9PiBjLmlzT24pLmZvckVhY2goYyA9PiB7XG4gICAgdGhpcy5pbmZvLnNldFJvd1ZhbHVlKGMubmFtZSwgYy52YWx1ZXNbdGhpcy5zZWxlY3RlZEluZF0pO1xuICB9KTtcbn1cblxuQ2hhcnRCYXNlLnByb3RvdHlwZS5kcmF3QmcgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5kcmF3T3hMYWJlbHModGhpcy5zdGF0aWNPeExhYmVscywgdGhpcy5veExhYmVscy5sZW5ndGggLSAxKTtcbiAgdGhpcy5kcmF3T3hMYWJlbHModGhpcy5keW5hbWljT3hMYWJlbHMsIHRoaXMub3hMYWJlbHMubGVuZ3RoIC0gMSAtIE1hdGguZmxvb3IodGhpcy5keW5hbWljT3hMYWJlbHMuc3RlcC8yKSk7IC8vINCT0L7QstC90L4g0LrQsNC60L7QtS3RgtC+XG4gIHRoaXMuZHJhd095TGFiZWxzKHRoaXMub2xkT3lMYWJlbHMpO1xuICB0aGlzLmRyYXdPeUxhYmVscyh0aGlzLm5ld095TGFiZWxzKTtcbiAgdGhpcy5kcmF3WmVyb0xpbmUoKTtcbn1cblxuQ2hhcnRCYXNlLnByb3RvdHlwZS5kcmF3WmVyb0xpbmUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICB0aGlzLmN0eC5nbG9iYWxBbHBoYSA9IDE7XG4gIHRoaXMuY3R4LmZpbGxUZXh0KDAsIENIQVJUX0dSSURfUEFERElORywgdGhpcy5ib3R0b21ZICsgT1lfTEFCRUxTX01BUkdJTl9UT1ApO1xuICB0aGlzLmN0eC5tb3ZlVG8oQ0hBUlRfR1JJRF9QQURESU5HLCB0aGlzLmJvdHRvbVkgKyAwLjUpO1xuICB0aGlzLmN0eC5saW5lVG8odGhpcy53IC0gQ0hBUlRfR1JJRF9QQURESU5HLCB0aGlzLmJvdHRvbVkgKyAwLjUpO1xuICB0aGlzLmN0eC5zdHJva2UoKTtcbn07XG5cbkNoYXJ0QmFzZS5wcm90b3R5cGUuY2FsY3VsYXRlT3hMYWJlbHNPZmZzZXRYID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLm94TGFiZWxzT2Zmc2V0WCA9IHRoaXMub2Zmc2V0WCAtIHRoaXMubGFiZWxXaWR0aEhhbGY7XG59O1xuXG5DaGFydEJhc2UucHJvdG90eXBlLmRyYXdPeExhYmVscyA9IGZ1bmN0aW9uKG94TGFiZWxzUHJvcHMsIGxhc3RJbmQpIHtcbiAgaWYgKG94TGFiZWxzUHJvcHMuYWxwaGEudmFsdWUgPD0gMCkgcmV0dXJuO1xuXG4gIHdoaWxlKGxhc3RJbmQgPiB0aGlzLmVuZEluZCkgbGFzdEluZCAtPSBveExhYmVsc1Byb3BzLnN0ZXA7XG5cbiAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gIHRoaXMuY3R4Lmdsb2JhbEFscGhhID0gb3hMYWJlbHNQcm9wcy5hbHBoYS52YWx1ZTtcbiAgdGhpcy5jdHguZmlsbFN0eWxlID0gdGhpcy5ncmlkVGV4dHNDb2xvcjtcblxuICBmb3IgKHZhciBpID0gbGFzdEluZDsgaSA+PSB0aGlzLnN0YXJ0SW5kOyBpLT1veExhYmVsc1Byb3BzLnN0ZXApIHtcbiAgICB0aGlzLmN0eC5maWxsVGV4dCh0aGlzLm94TGFiZWxzW2ldLCBNYXRoLmZsb29yKGkgKiB0aGlzLmJhcldpZHRoICsgdGhpcy5veExhYmVsc09mZnNldFgpLCB0aGlzLm94TGFiZWxzQm90dG9tWSAtIE9YTEFCRUxTX0hFSUdIVC8yKTtcbiAgfVxufVxuXG5DaGFydEJhc2UucHJvdG90eXBlLnVwZGF0ZU94TGFiZWxzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBzdGVwID0gTWF0aC5tYXgoMSwgKHRoaXMuZW5kSW5kIC0gdGhpcy5zdGFydEluZCArIDEpIC8gdGhpcy5jb3VudE9uU2NyZWVuKTsgLy8gRklYTUUg0LXRgdC70LggcmFuZ2Ug0L3QtSDQuNC30LzQtdC90LjQu9GB0Y8sINGC0L4g0Lgg0YHRjtC00LAg0L3QtSDQvdCw0LTQvlxuICB2YXIgcCA9IDE7XG4gIHdoaWxlIChzdGVwID4gcCkgcCAqPSAyO1xuICBzdGVwID0gcDtcblxuICBpZiAoc3RlcCA9PT0gdGhpcy5jdXJyT3hMYWJlbHNTdGVwKSByZXR1cm4gZmFsc2U7XG5cbiAgdmFyIG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuXG4gIGlmIChzdGVwID4gdGhpcy5jdXJyT3hMYWJlbHNTdGVwKSB7XG4gICAgdGhpcy5jdXJyT3hMYWJlbHNTdGVwICo9IDI7XG4gICAgdGhpcy5keW5hbWljT3hMYWJlbHMuYWxwaGEuc2V0KDEpO1xuICAgIHRoaXMuZHluYW1pY094TGFiZWxzLmFscGhhLnNldCgwLCBub3csIHRydWUpO1xuICAgIHRoaXMuc3RhdGljT3hMYWJlbHMuc3RlcCA9IHRoaXMuY3Vyck94TGFiZWxzU3RlcDtcbiAgICB0aGlzLmR5bmFtaWNPeExhYmVscy5zdGVwID0gdGhpcy5jdXJyT3hMYWJlbHNTdGVwO1xuICB9XG4gIGVsc2UgaWYgKHN0ZXAgPCB0aGlzLmN1cnJPeExhYmVsc1N0ZXApIHtcbiAgICB0aGlzLmR5bmFtaWNPeExhYmVscy5hbHBoYS5zZXQoMCk7XG4gICAgdGhpcy5keW5hbWljT3hMYWJlbHMuYWxwaGEuc2V0KDEsIG5vdywgdHJ1ZSk7XG4gICAgdGhpcy5zdGF0aWNPeExhYmVscy5zdGVwID0gdGhpcy5jdXJyT3hMYWJlbHNTdGVwO1xuICAgIHRoaXMuZHluYW1pY094TGFiZWxzLnN0ZXAgPSB0aGlzLmN1cnJPeExhYmVsc1N0ZXA7XG4gICAgdGhpcy5jdXJyT3hMYWJlbHNTdGVwIC89IDI7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuQ2hhcnRCYXNlLnByb3RvdHlwZS5kcmF3T3lMYWJlbHMgPSBmdW5jdGlvbihveUxhYmVscykge1xuICBpZiAob3lMYWJlbHMuYWxwaGEudmFsdWUgPD0gMCkgcmV0dXJuO1xuICB0aGlzLmN0eC5nbG9iYWxBbHBoYSA9IG95TGFiZWxzLmFscGhhLnZhbHVlO1xuICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IHRoaXMuZ3JpZExpbmVzQ29sb3I7XG4gIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHRoaXMuZ3JpZFRleHRzQ29sb3I7XG4gIHRoaXMuY3R4LmxpbmVXaWR0aCA9IDE7XG4gIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuXG4gIHZhciBvZmZzZXQgPSBNYXRoLnJvdW5kKFxuICAgIG95TGFiZWxzLmxhYmVscy5sZW5ndGggKiB0aGlzLmdyaWRMaW5lc0hlaWdodCArIG95TGFiZWxzLm9mZnNldFkqKDEtb3lMYWJlbHMuYWxwaGEudmFsdWUpXG4gICk7XG5cbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBveUxhYmVscy5sYWJlbHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgeSA9IG9mZnNldCAtIGkgKiB0aGlzLmdyaWRMaW5lc0hlaWdodDtcblxuICAgIHRoaXMuY3R4LmZpbGxUZXh0KFxuICAgICAgb3lMYWJlbHMubGFiZWxzW2ldLFxuICAgICAgQ0hBUlRfR1JJRF9QQURESU5HLFxuICAgICAgeSArIE9ZX0xBQkVMU19NQVJHSU5fVE9QXG4gICAgKTtcbiAgICB5IC09IDAuNTtcbiAgICB0aGlzLmN0eC5tb3ZlVG8oQ0hBUlRfR1JJRF9QQURESU5HLCB5KTtcbiAgICB0aGlzLmN0eC5saW5lVG8odGhpcy53IC0gQ0hBUlRfR1JJRF9QQURESU5HLCB5KTtcbiAgfVxuICB0aGlzLmN0eC5zdHJva2UoKTtcbn1cblxuQ2hhcnRCYXNlLnByb3RvdHlwZS5pbml0QnV0dG9ucyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmJ1dHRvbnNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgdGhpcy5idXR0b25zQ29udGFpbmVyLnN0eWxlLndpZHRoID0gdGhpcy53IC0gQ0hBUlRfR1JJRF9QQURESU5HKjIgKyAncHgnO1xuICB0aGlzLmJ1dHRvbnNDb250YWluZXIuc3R5bGUubWFyZ2luTGVmdCA9IENIQVJUX0dSSURfUEFERElORyArICdweCc7XG4gIHRoaXMuYnV0dG9uc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdidXR0b25zLWNvbnRhaW5lcicpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGIgPSBjcmVhdGVCdXR0b24odGhpcy5jb2x1bW5zW2ldLmNvbG9yLCB0aGlzLmNvbHVtbnNbaV0ubmFtZSwgZnVuY3Rpb24obmFtZSwgaXNPbikge1xuICAgICAgdGhpcy5idXR0b25DbGlja2VkKG5hbWUsIGlzT24pO1xuICAgIH0uYmluZCh0aGlzKSk7XG4gICAgdGhpcy5idXR0b25zQ29udGFpbmVyLmFwcGVuZChiKTtcbiAgfVxuXG4gIHRoaXMuY2hhcnRDb250YWluZXIuYXBwZW5kKHRoaXMuYnV0dG9uc0NvbnRhaW5lcik7XG59XG5cbkNoYXJ0QmFzZS5wcm90b3R5cGUuYnV0dG9uQ2xpY2tlZCA9IGZ1bmN0aW9uKCkge31cblxuQ2hhcnRCYXNlLnByb3RvdHlwZS5kcmF3RnJhbWUgPSBmdW5jdGlvbigpIHtcbiAgLy8gdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gIC8vIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gJyMwMDAwMDAnXG4gIC8vIHRoaXMuY3R4LnJlY3QoMCwgMCwgdGhpcy53LCB0aGlzLmJvdHRvbVkpO1xuICAvLyB0aGlzLmN0eC5zdHJva2UoKVxufVxuXG5DaGFydEJhc2UucHJvdG90eXBlLmRyYXdTZXF1ZW5jZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmRyYXdCZygpO1xuICB0aGlzLmRyYXdDaGFydENvbnRlbnQoKTtcbiAgdGhpcy5kcmF3U2VsZWN0ZWQoKTtcbn1cblxuXG5DaGFydEJhc2UucHJvdG90eXBlLmRyYXdTZWxlY3RlZENoYXJ0Q29udGVudCA9IGZ1bmN0aW9uICgpIHt9XG5cbkNoYXJ0QmFzZS5wcm90b3R5cGUuZHJhd1NlbGVjdGVkID0gZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLnNlbGVjdGVkSW5kID49IDApIHtcbiAgICB0aGlzLmRyYXdTZWxlY3RlZENoYXJ0Q29udGVudCgpO1xuXG4gICAgdGhpcy5pbmZvLnN0eWxlLmxlZnQgPSBNYXRoLm1heCh0aGlzLnNlbGVjdGVkU2NyZWVuWCAtIHRoaXMuaW5mby5vZmZzZXRXaWR0aCAtIDMwLCAwKSArICdweCc7IC8vIEZJWE1FIHRoaXMuaW5mbyBtYXJnaW5cbiAgICB0aGlzLmluZm8uc3R5bGUudG9wID0gTWF0aC5tYXgodGhpcy5zZWxlY3RlZFNjcmVlblkgLSB0aGlzLmluZm8ub2Zmc2V0SGVpZ2h0LCAwKSArICdweCc7XG4gICAgdGhpcy5pbmZvLmFwcGVhcigpO1xuICB9XG4gIGVsc2Uge1xuICAgIHRoaXMuaW5mby5kaXNhcHBlYXIoKVxuICB9XG59XG5cbkNoYXJ0QmFzZS5wcm90b3R5cGUuY2hlY2tSZWRyYXdCZyA9IGZ1bmN0aW9uKG5vdykge1xuICBpZiAodGhpcy5ncmlkTWF4WS5uZXh0VGljayhub3cpKSB0aGlzLm5lZWRSZWRyYXcgPSB0cnVlO1xuICBpZiAodGhpcy5vbGRPeUxhYmVscy5hbHBoYS5uZXh0VGljayhub3cpKSB0aGlzLm5lZWRSZWRyYXcgPSB0cnVlO1xuICBpZiAodGhpcy5uZXdPeUxhYmVscy5hbHBoYS5uZXh0VGljayhub3cpKSB0aGlzLm5lZWRSZWRyYXcgPSB0cnVlO1xuICBpZiAodGhpcy5keW5hbWljT3hMYWJlbHMuYWxwaGEubmV4dFRpY2sobm93KSkgdGhpcy5uZWVkUmVkcmF3ID0gdHJ1ZTtcbn1cblxuQ2hhcnRCYXNlLnByb3RvdHlwZS5jaGVja1JlZHJhd0NoYXJ0c0NvbnRlbnQgPSBmdW5jdGlvbihub3cpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAodGhpcy5jb2x1bW5zW2ldLmFscGhhLm5leHRUaWNrKG5vdykpIHtcbiAgICAgIHRoaXMubmVlZFJlZHJhdyA9IHRoaXMubmVlZERyYXdQcmV2aWV3ID0gdHJ1ZTtcbiAgICB9XG4gIH1cbn1cblxuQ2hhcnRCYXNlLnByb3RvdHlwZS5kcmF3Q2hhcnRDb250ZW50ID0gZnVuY3Rpb24oKSB7fVxuXG5DaGFydEJhc2UucHJvdG90eXBlLmNsZWFyRHJhd1ByZXZpZXcgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5jdHguY2xlYXJSZWN0KHRoaXMucHJldmlld0NoYXJ0WC0yLCB0aGlzLnByZXZpZXdDaGFydFksIHRoaXMucHJldmlld0NoYXJ0V2lkdGgrNCwgdGhpcy5wcmV2aWV3Q2hhcnRZKTtcbn1cblxuQ2hhcnRCYXNlLnByb3RvdHlwZS5jYWxjdWxhdGVWYWx1ZXNNYXhZID0gZnVuY3Rpb24oKSB7XG4gIHZhciB0ID0gZ2V0TWF0cml4TWF4KHRoaXMuY29sdW1ucy5maWx0ZXIoYyA9PiBjLmlzT24pLm1hcChjID0+IGMudmFsdWVzLnNsaWNlKHRoaXMuc3RhcnRJbmQsIHRoaXMuZW5kSW5kKzEpKSk7XG4gIHJldHVybiBnZXRNYXRyaXhNYXgodGhpcy5jb2x1bW5zLmZpbHRlcihjID0+IGMuaXNPbikubWFwKGMgPT4gYy52YWx1ZXMuc2xpY2UodGhpcy5zdGFydEluZCwgdGhpcy5lbmRJbmQrMSkpKTtcbn1cblxuQ2hhcnRCYXNlLnByb3RvdHlwZS51cGRhdGVZID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbWF4WSA9IHRoaXMuY2FsY3VsYXRlVmFsdWVzTWF4WSgpO1xuICB2YXIgbmV3R3JpZFN0ZXBZID0gZ2V0U3RlcEZvckdyaWRWYWx1ZXMobWF4WSk7XG5cbiAgaWYgKHRoaXMuZ3JpZFN0ZXBZICE9PSBuZXdHcmlkU3RlcFkpIHtcbiAgICB2YXIgbm93ID0gcGVyZm9ybWFuY2Uubm93KCk7XG5cbiAgICB0aGlzLmdyaWRNYXhZLnNldChuZXdHcmlkU3RlcFkqNiwgbm93LCB0cnVlKTtcblxuICAgIGlmIChcbiAgICAgICh0aGlzLm9sZE95TGFiZWxzLm9mZnNldFkgPiAwICYmIHRoaXMuZ3JpZFN0ZXBZID4gbmV3R3JpZFN0ZXBZKSB8fFxuICAgICAgKHRoaXMub2xkT3lMYWJlbHMub2Zmc2V0WSA8IDAgJiYgdGhpcy5ncmlkU3RlcFkgPCBuZXdHcmlkU3RlcFkpXG4gICAgKSB7XG4gICAgICB0aGlzLm9sZE95TGFiZWxzLm9mZnNldFkgKj0gLTE7XG4gICAgICB0aGlzLm5ld095TGFiZWxzLm9mZnNldFkgKj0gLTE7XG4gICAgfVxuXG4gICAgdGhpcy5ncmlkU3RlcFkgPSBuZXdHcmlkU3RlcFk7XG5cbiAgICB0aGlzLm9sZE95TGFiZWxzLmFscGhhLnNldCgxKTtcbiAgICB0aGlzLm9sZE95TGFiZWxzLmFscGhhLnNldCgwLCBub3csIHRydWUpO1xuICAgIHRoaXMubmV3T3lMYWJlbHMuYWxwaGEuc2V0KDApO1xuICAgIHRoaXMubmV3T3lMYWJlbHMuYWxwaGEuc2V0KDEsIG5vdywgdHJ1ZSk7XG5cbiAgICB0aGlzLm9sZE95TGFiZWxzLmxhYmVscyA9IHRoaXMubmV3T3lMYWJlbHMubGFiZWxzO1xuICAgIHRoaXMubmV3T3lMYWJlbHMubGFiZWxzID0gWzAsIDEsIDIsIDMsIDQsIDVdLm1hcChuID0+IG4qbmV3R3JpZFN0ZXBZKTtcbiAgfVxufTtcblxuQ2hhcnRCYXNlLnByb3RvdHlwZS5vbk1vdXNlRW50ZXIgPSBmdW5jdGlvbihlKSB7XG4gIHRoaXMuY2FudmFzLm9ubW91c2Vtb3ZlID0gdGhpcy5vbk1vdXNlTW92ZS5iaW5kKHRoaXMpO1xuICB0aGlzLmNhbnZhcy5vbm1vdXNlbGVhdmUgPSB0aGlzLm9uTW91c2VMZWF2ZS5iaW5kKHRoaXMpO1xufVxuXG5DaGFydEJhc2UucHJvdG90eXBlLm9uTW91c2VNb3ZlID0gZnVuY3Rpb24gKGUpIHtcbiAgaWYgKGUubGF5ZXJZIDw9IHRoaXMuYm90dG9tWSkge1xuICAgIGlmIChlLmxheWVyWCA+IENIQVJUX0dSSURfUEFERElORyAmJiBlLmxheWVyWCA8IHRoaXMudyAtIENIQVJUX0dSSURfUEFERElORykge1xuICAgICAgdGhpcy5tb3VzZVggPSBlLmxheWVyWDtcbiAgICAgIHRoaXMubW91c2VZID0gZS5sYXllclk7XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIHRoaXMuc2VsZWN0ZWRJbmQgPSAtMTtcbiAgfVxuXG4gIGlmICh0aGlzLnByZXZpZXdVSVN0YXRlIDwgMSkge1xuICAgIHRoaXMuc3RhcnRVcGRhdGUoKTtcbiAgfVxufVxuXG5DaGFydEJhc2UucHJvdG90eXBlLm9uTW91c2VMZWF2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5zZWxlY3RlZEluZCA9IC0xO1xuICB0aGlzLmNhbnZhcy5vbm1vdXNlbW92ZSA9IG51bGw7XG4gIHRoaXMuY2FudmFzLm9ubW91c2VsZWF2ZSA9IG51bGw7XG5cbiAgdGhpcy5tb3VzZVggPSBudWxsO1xuICB0aGlzLm1vdXNlWSA9IG51bGw7XG5cbiAgaWYgKHRoaXMucHJldmlld1VJU3RhdGUgPCAxKSB7XG4gICAgdGhpcy5zdGFydFVwZGF0ZSgpO1xuICB9XG59XG5cbkNoYXJ0QmFzZS5wcm90b3R5cGUuZ2V0U2NyZWVuWEJ5SW5kID0gZnVuY3Rpb24gKGksIHN0ZXA9dGhpcy5iYXJXaWR0aCwgb2Zmc2V0PXRoaXMub2Zmc2V0WCkge1xuICByZXR1cm4gaSpzdGVwICsgb2Zmc2V0O1xufTtcblxuQ2hhcnRCYXNlLnByb3RvdHlwZS5nZXRJbmRCeVNjcmVlblggPSBmdW5jdGlvbiAoeCwgc3RlcD10aGlzLmJhcldpZHRoLCBvZmZzZXQ9dGhpcy5vZmZzZXRYKSB7XG4gIHJldHVybiBNYXRoLnJvdW5kKCh4IC0gb2Zmc2V0KS9zdGVwKTtcbn07XG5cbkNoYXJ0QmFzZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpIHtcblxuICBpZiAodGhpcy5wcmV2aWV3VUlTdGF0ZSA+IDApIHtcbiAgICB2YXIgc3RhdGUgPSB0aGlzLnByZXZpZXdVSS51cGRhdGUoKTtcblxuICAgIGlmICh0aGlzLnByZXZpZXdVSUxlZnRYICE9PSBzdGF0ZS5sZWZ0IHx8IHRoaXMucHJldmlld1VJUmlnaHRYICE9PSBzdGF0ZS5yaWdodCkge1xuICAgICAgdGhpcy5wcmV2aWV3VUlMZWZ0WCA9IHN0YXRlLmxlZnQ7XG4gICAgICB0aGlzLnByZXZpZXdVSVJpZ2h0WCA9IHN0YXRlLnJpZ2h0O1xuICAgIH1cbiAgfVxuXG4gIHRoaXMuc3RhcnRJbmQgPSBNYXRoLm1heChNYXRoLmNlaWwodGhpcy5wcmV2aWV3VUlMZWZ0WCAqIHRoaXMuTCkgLSAxLCAwKTtcbiAgdGhpcy5lbmRJbmQgPSBNYXRoLmNlaWwodGhpcy5wcmV2aWV3VUlSaWdodFggKiB0aGlzLkwpO1xuICB0aGlzLmJhcldpZHRoID0gdGhpcy5ncmlkV2lkdGgvKHRoaXMuTCoodGhpcy5wcmV2aWV3VUlSaWdodFgtdGhpcy5wcmV2aWV3VUlMZWZ0WCkpO1xuICB0aGlzLm9mZnNldFggPSBjYWxjdWxhdGVPZmZzZXRYKHRoaXMuZ3JpZFdpZHRoLCBDSEFSVF9HUklEX1BBRERJTkcsIHRoaXMucHJldmlld1VJTGVmdFgsIHRoaXMucHJldmlld1VJUmlnaHRYKTtcblxuICB0aGlzLnVwZGF0ZURhdGVSYW5nZSgpO1xuICB0aGlzLmNhbGN1bGF0ZU94TGFiZWxzT2Zmc2V0WCgpO1xuICB0aGlzLnVwZGF0ZVkoKTtcblxuICBpZiAodGhpcy5tb3VzZVgpIHsgLy8gRklYTUUgTW92ZSB0byBkcmF3U2VsZWN0ZWRcbiAgICB0aGlzLnNlbGVjdCh0aGlzLm1vdXNlWCwgdGhpcy5tb3VzZVkpXG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tIERSQVcgLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLncsIHRoaXMucHJldmlld0NoYXJ0WSk7XG5cbiAgdmFyIG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICB0aGlzLm5lZWRSZWRyYXcgPSBmYWxzZTtcblxuICBpZiAodGhpcy51cGRhdGVPeExhYmVscygpKSB0aGlzLm5lZWRSZWRyYXcgPSB0cnVlO1xuICB0aGlzLmNoZWNrUmVkcmF3Qmcobm93KTtcbiAgdGhpcy5jaGVja1JlZHJhd0NoYXJ0c0NvbnRlbnQobm93KTtcblxuICB0aGlzLmRyYXdTZXF1ZW5jZSgpO1xuXG4gIGlmICh0aGlzLm5lZWREcmF3UHJldmlldykge1xuICAgIHRoaXMubmVlZERyYXdQcmV2aWV3ID0gZmFsc2U7XG4gICAgdGhpcy5kcmF3UHJldmlldygpO1xuICB9XG5cbiAgaWYgKHRoaXMubmVlZFJlZHJhdyB8fCB0aGlzLnByZXZpZXdVSVN0YXRlID4gMCkge1xuICAgIHRoaXMudXBkYXRlKCk7XG4gIH1cblxuICB9LmJpbmQodGhpcykpO1xufVxuXG5DaGFydEJhc2UucHJvdG90eXBlLnN0YXJ0VXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMubmVlZFJlZHJhdykge1xuICAgIHRoaXMubmVlZFJlZHJhdyA9IHRydWU7XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgfVxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZU9mZnNldFgodywgcGFkZGluZywgbGVmdCwgcmlnaHQpIHtcbiAgcmV0dXJuIHcgKyBwYWRkaW5nIC0gcmlnaHQqdy8ocmlnaHQtbGVmdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTY3JlZW5YQnlJbmQoaSwgc3RlcCwgb2Zmc2V0PTApIHtcbiAgcmV0dXJuIGkqc3RlcCArIG9mZnNldDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEluZEJ5U2NyZWVuWCh4LCBzdGVwLCBvZmZzZXQ9MCkge1xuICByZXR1cm4gTWF0aC5yb3VuZCgoeCAtIG9mZnNldCkvc3RlcCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRZQ29vcmRzKGhlaWdodCwgWSwgbWF4KSB7XG4gIHZhciBjb29yZHMgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IFkubGVuZ3RoOyBpKyspIHtcbiAgICBjb29yZHMucHVzaChNYXRoLmZsb29yKGhlaWdodCAtIChZW2ldL21heCkgKiBoZWlnaHQpKTtcbiAgfVxuICByZXR1cm4gY29vcmRzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2NyZWVuWShoZWlnaHQsIHksIG1heCkge1xuICB2YXIgc2NyZWVuWSA9IGhlaWdodCAtIHkqaGVpZ2h0L21heDtcbiAgcmV0dXJuIE1hdGguZmxvb3Ioc2NyZWVuWSk7XG59XG4iLCJpbXBvcnQgeyBDaGFydEJhc2UsIGdldFNjcmVlblhCeUluZCwgZ2V0WUNvb3JkcywgZ2V0U2NyZWVuWSB9IGZyb20gJy4vY2hhcnQnO1xuaW1wb3J0IHsgQW5pbWF0ZWRWYWx1ZSB9IGZyb20gJy4uL2FuaW1hdGlvbnMnO1xuaW1wb3J0IHtcbiAgZ2V0TWF4LFxuICBnZXRNYXRyaXhNYXgsXG4gIGRlYm91bmNlXG59IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7XG4gIENIQVJUX0dSSURfUEFERElORyxcbiAgQ0hBUlRfSEVBREVSX0hFSUdIVCxcbiAgQ0hBUlRfSEVBREVSX01BUkdJTl9CT1RUT00sXG4gIENIQVJUX01BWF9XSURUSCxcbiAgQ0hBUlRfTUlOX0hFSUdIVCxcbiAgQ0hBUlRfTUFYX0hFSUdIVCxcbiAgWV9BTklNQVRJT05fVElNRVxufSBmcm9tICcuLi9jb25zdHMnO1xuXG5leHBvcnQgZnVuY3Rpb24gbGluZUNoYXJ0KGNvbnRhaW5lciwgZGF0YSwgbmFtZSkge1xuICB2YXIgY2hhcnQgPSBuZXcgTGluZUNoYXJ0KGNvbnRhaW5lciwgZGF0YSwgbmFtZSk7XG4gIHJldHVybiBjaGFydDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIExpbmVDaGFydChjb250YWluZXIsIGRhdGEpIHtcbiAgY29uc29sZS5sb2coZGF0YSk7XG4gIENoYXJ0QmFzZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB0aGlzLmluaXQoKTtcbn1cblxuTGluZUNoYXJ0LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ2hhcnRCYXNlLnByb3RvdHlwZSk7XG5MaW5lQ2hhcnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTGluZUNoYXJ0O1xuXG5MaW5lQ2hhcnQucHJvdG90eXBlLmluaXREYXRhID0gZnVuY3Rpb24oKSB7XG4gIENoYXJ0QmFzZS5wcm90b3R5cGUuaW5pdERhdGEuY2FsbCh0aGlzKTtcbn1cblxuTGluZUNoYXJ0LnByb3RvdHlwZS5pbml0T3lQcm9wcyA9IGZ1bmN0aW9uKCkge1xuICBDaGFydEJhc2UucHJvdG90eXBlLmluaXRPeVByb3BzLmFwcGx5KHRoaXMpO1xuXG4gIHRoaXMuZ3JpZFByZXZpZXdNYXhZID0gbmV3IEFuaW1hdGVkVmFsdWUoMCwgWV9BTklNQVRJT05fVElNRSk7XG4gIHRoaXMuZ3JpZFByZXZpZXdNYXhZLnNldCh0aGlzLmNhbGN1bGF0ZUdyaWRQcmV2aWV3TWF4WSgpLCBwZXJmb3JtYW5jZS5ub3coKSwgdHJ1ZSk7XG59XG5cbkxpbmVDaGFydC5wcm90b3R5cGUuY2FsY3VsYXRlR3JpZFByZXZpZXdNYXhZID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZ2V0TWF0cml4TWF4KHRoaXMuY29sdW1ucy5maWx0ZXIoYyA9PiBjLmlzT24pLm1hcChjID0+IGMudmFsdWVzKSk7XG59XG5cbkxpbmVDaGFydC5wcm90b3R5cGUuYnV0dG9uQ2xpY2tlZCA9IGZ1bmN0aW9uKG5hbWUsIGlzT24pIHtcbiAgdmFyIG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgIGlmICh0aGlzLmNvbHVtbnNbaV0ubmFtZSA9PT0gbmFtZSkge1xuICAgICAgaWYgKGlzT24pIHtcbiAgICAgICAgdGhpcy5jb2x1bW5zW2ldLmFscGhhLnNldCgxLCBub3csIHRydWUpO1xuICAgICAgICB0aGlzLmluZm8uZW5hYmxlUm93KHRoaXMuY29sdW1uc1tpXS5uYW1lKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmNvbHVtbnNbaV0uYWxwaGEuc2V0KDAsIG5vdywgdHJ1ZSk7XG4gICAgICAgIHRoaXMuaW5mby5kaXNhYmxlUm93KHRoaXMuY29sdW1uc1tpXS5uYW1lKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY29sdW1uc1tpXS5pc09uID0gaXNPbjtcblxuICAgICAgdGhpcy5ncmlkUHJldmlld01heFkuc2V0KE1hdGgubWF4KHRoaXMuY2FsY3VsYXRlR3JpZFByZXZpZXdNYXhZKCksIDApLCBub3csIHRydWUpO1xuXG4gICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH1cbiAgfVxufVxuXG5MaW5lQ2hhcnQucHJvdG90eXBlLmNoZWNrUmVkcmF3Q2hhcnRzQ29udGVudCA9IGZ1bmN0aW9uKG5vdykge1xuICBDaGFydEJhc2UucHJvdG90eXBlLmNoZWNrUmVkcmF3Q2hhcnRzQ29udGVudC5jYWxsKHRoaXMsIG5vdyk7XG5cbiAgaWYgKHRoaXMuZ3JpZFByZXZpZXdNYXhZLm5leHRUaWNrKG5vdykpIHRoaXMubmVlZERyYXdQcmV2aWV3ID0gdHJ1ZTtcbn1cblxuTGluZUNoYXJ0LnByb3RvdHlwZS5kcmF3Q2hhcnRDb250ZW50ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBiYXJXID0gTWF0aC5yb3VuZCh0aGlzLmJhcldpZHRoKnRoaXMucm91bmQpL3RoaXMucm91bmQ7XG4gIHZhciBzSSA9IE1hdGgubWF4KHRoaXMuc3RhcnRJbmQgLSB0aGlzLmRyYXdJbmRPZmZzZXQsIDApO1xuICB2YXIgZUkgPSBNYXRoLm1pbih0aGlzLmVuZEluZCArIHRoaXMuZHJhd0luZE9mZnNldCwgdGhpcy5MKTtcblxuICAvLyB2YXIgc0kgPSBNYXRoLm1heCh0aGlzLnN0YXJ0SW5kIC0gMSwgMCk7XG4gIC8vIHZhciBlSSA9IE1hdGgubWluKHRoaXMuZW5kSW5kICsgMSwgdGhpcy5MKTtcblxuICB2YXIgWCA9IFtdO1xuICBmb3IgKHZhciBpID0gc0k7IGkgPCBlSSsxOyBpKyspIHtcbiAgICBYLnB1c2goZ2V0U2NyZWVuWEJ5SW5kKGksIGJhclcsIHRoaXMub2Zmc2V0WCkpO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgWSA9IGdldFlDb29yZHModGhpcy5ib3R0b21ZLCB0aGlzLmNvbHVtbnNbaV0udmFsdWVzLnNsaWNlKHNJLCBlSSsxKSwgdGhpcy5nZXRHcmlkTWF4Rm9yQ29sdW1uKHRoaXMuY29sdW1uc1tpXSkpO1xuICAgIHRoaXMuZHJhd0xpbmUoWCwgWSwgdGhpcy5jb2x1bW5zW2ldLmNvbG9yLCB0aGlzLmNvbHVtbnNbaV0uYWxwaGEudmFsdWUpO1xuICB9XG59XG5cbkxpbmVDaGFydC5wcm90b3R5cGUuZ2V0R3JpZE1heEZvckNvbHVtbiA9IGZ1bmN0aW9uKGNvbHVtbikge1xuICByZXR1cm4gdGhpcy5ncmlkTWF4WS52YWx1ZTtcbn07XG5cbkxpbmVDaGFydC5wcm90b3R5cGUuZHJhd0xpbmUgPSBmdW5jdGlvbihYLCBZLCBjb2xvciwgYWxwaGEsIGxpbmVXaWR0aCkge1xuICBpZiAoYWxwaGEgPiAwKSB7XG4gICAgYWxwaGEgPSBhbHBoYSB8fCAxO1xuICAgIGxpbmVXaWR0aCA9IGxpbmVXaWR0aCB8fCAyO1xuICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgIHRoaXMuY3R4Lmdsb2JhbEFscGhhID0gYWxwaGE7XG4gICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSBjb2xvcjtcbiAgICB0aGlzLmN0eC5saW5lQ2FwID0gJ3JvdW5kJztcbiAgICB0aGlzLmN0eC5saW5lSm9pbiA9ICdyb3VuZCc7XG4gICAgdGhpcy5jdHgubGluZVdpZHRoID0gbGluZVdpZHRoO1xuXG4gICAgdGhpcy5jdHgubW92ZVRvKFhbMF0sIFlbMF0pO1xuICAgIGZvciAobGV0IGk9MTsgaSA8IFgubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuY3R4LmxpbmVUbyhYW2ldLCBZW2ldKTtcbiAgICB9XG4gICAgdGhpcy5jdHguc3Ryb2tlKCk7XG4gIH1cbn1cblxuTGluZUNoYXJ0LnByb3RvdHlwZS5kcmF3U2VsZWN0ZWRDaGFydENvbnRlbnQgPSBmdW5jdGlvbigpIHtcbiAgLy8gaWYgKHRoaXMuc2VsZWN0ZWRJbmQgPiAwKSB7XG5cbiAgICB2YXIgYmFyVyA9IE1hdGgucm91bmQodGhpcy5iYXJXaWR0aCp0aGlzLnJvdW5kKS90aGlzLnJvdW5kO1xuICAgIHZhciBzZWxlY3RlZEluZFggPSBNYXRoLmZsb29yKHRoaXMuZ2V0U2NyZWVuWEJ5SW5kKHRoaXMuc2VsZWN0ZWRJbmQsIGJhclcpKTtcbiAgICB2YXIgbWF4U2NyZWVuWSA9IDA7XG5cbiAgICAvLyBjb25zb2xlLmxvZygnc2VsZWN0ZWQnKTtcblxuICAgIHZhciBpbmQgPSB0aGlzLnNlbGVjdGVkSW5kIC0gdGhpcy5zdGFydEluZDtcbiAgICB2YXIgZmlsdGVyZWRDb2x1bW5zID0gdGhpcy5jb2x1bW5zLmZpbHRlcihjID0+IGMuaXNPbik7XG5cbiAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICB0aGlzLmN0eC5nbG9iYWxBbHBoYSA9IDE7XG4gICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmdyaWRMaW5lc0NvbG9yO1xuICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IDE7XG4gICAgdGhpcy5jdHgubW92ZVRvKHRoaXMuc2VsZWN0ZWRTY3JlZW5YICsgMC41LCAwKTtcbiAgICB0aGlzLmN0eC5saW5lVG8odGhpcy5zZWxlY3RlZFNjcmVlblggKyAwLjUsIHRoaXMuYm90dG9tWSk7XG4gICAgdGhpcy5jdHguc3Ryb2tlKCk7XG5cbiAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSAnI0ZGRkZGRic7IC8vIEZJWE1FIENvbG9yXG4gICAgZmlsdGVyZWRDb2x1bW5zLmZvckVhY2goYyA9PiB7XG4gICAgICB2YXIgeSA9IE1hdGguZmxvb3IoZ2V0U2NyZWVuWSh0aGlzLmJvdHRvbVksIGMudmFsdWVzW3RoaXMuc2VsZWN0ZWRJbmRdLCB0aGlzLmdldEdyaWRNYXhGb3JDb2x1bW4oYykpKTtcbiAgICAgIGlmICh5ID4gbWF4U2NyZWVuWSkgbWF4U2NyZWVuWSA9IHk7XG5cbiAgICAgIHRoaXMuY3R4LmFyYyhcbiAgICAgICAgc2VsZWN0ZWRJbmRYLFxuICAgICAgICB5LFxuICAgICAgICA1LjUsIC8vIEZJWE1FIFJhZGl1cyB0byBjb25zdFxuICAgICAgICAwLFxuICAgICAgICAyICogTWF0aC5QSVxuICAgICAgKTtcbiAgICB9KTtcbiAgICB0aGlzLmN0eC5maWxsKCk7XG5cbiAgICBmaWx0ZXJlZENvbHVtbnMuZm9yRWFjaChjID0+IHtcbiAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgdGhpcy5jdHgubGluZVdpZHRoID0gMjtcbiAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5kYXRhLmNvbG9yc1tjLmlkXTtcbiAgICAgIHRoaXMuY3R4LmFyYyhcbiAgICAgICAgc2VsZWN0ZWRJbmRYLFxuICAgICAgICBNYXRoLmZsb29yKGdldFNjcmVlblkodGhpcy5ib3R0b21ZLCBjLnZhbHVlc1t0aGlzLnNlbGVjdGVkSW5kXSwgdGhpcy5nZXRHcmlkTWF4Rm9yQ29sdW1uKGMpKSksXG4gICAgICAgIDUuNSxcbiAgICAgICAgMCxcbiAgICAgICAgMiAqIE1hdGguUElcbiAgICAgICk7XG4gICAgICB0aGlzLmN0eC5zdHJva2UoKTtcbiAgICAgIHRoaXMuY3R4LmNsb3NlUGF0aCgpO1xuICAgIH0pO1xufVxuXG5MaW5lQ2hhcnQucHJvdG90eXBlLmdldEdyaWRNYXhGb3JDb2x1bW5QcmV2aWV3ID0gZnVuY3Rpb24oY29sdW1uKSB7XG4gIHJldHVybiB0aGlzLmdyaWRQcmV2aWV3TWF4WS52YWx1ZTtcbn07XG5cbkxpbmVDaGFydC5wcm90b3R5cGUuZHJhd1ByZXZpZXcgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5jbGVhckRyYXdQcmV2aWV3KCk7XG5cbiAgdmFyIFggPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm94TGFiZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgWC5wdXNoKGdldFNjcmVlblhCeUluZChpLCB0aGlzLnByZXZpZXdDaGFydFN0ZXAsIHRoaXMucHJldmlld0NoYXJ0WCkpO1xuICB9XG4gIFhbMF0gKz0gMVxuICBYW1gubGVuZ3RoLTFdIC09IDE7XG5cbiAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIFkgPSBnZXRZQ29vcmRzKHRoaXMucHJldmlld0NoYXJ0SGVpZ2h0LCB0aGlzLmNvbHVtbnNbaV0udmFsdWVzLCB0aGlzLmdldEdyaWRNYXhGb3JDb2x1bW5QcmV2aWV3KHRoaXMuY29sdW1uc1tpXSkpXG4gICAgLy8gLm1hcCh5ID0+IHRoaXMucHJldmlld0NoYXJ0WSArIHkpO1xuICAgIC5tYXAoeSA9PiBNYXRoLm1heCh0aGlzLnByZXZpZXdDaGFydFkgKyB5LCB0aGlzLnByZXZpZXdDaGFydFkpKTtcblxuICAgIHRoaXMuZHJhd0xpbmUoWCwgWSwgdGhpcy5jb2x1bW5zW2ldLmNvbG9yLCB0aGlzLmNvbHVtbnNbaV0uYWxwaGEudmFsdWUsIDEpO1xuICB9XG59XG4iLCJjb25zdCBJTkZPX0FOSU1BVElPTl9USU1FID0gMC4zO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSW5mbyhuYW1lKSB7XG4gIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgLy8gY29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3BvaW50LWluZm8nKTtcbiAgY29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSAnb3BhY2l0eSAnICsgSU5GT19BTklNQVRJT05fVElNRSArICdzJztcbiAgY29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAwO1xuICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgY29udGFpbmVyLmlzT24gPSBmYWxzZTtcblxuICAvLyBjb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JlZCc7XG5cbiAgdmFyIHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDQnKTtcbiAgdGl0bGUuY2xhc3NMaXN0LmFkZCgncG9pbnQtaW5mby10aXRsZScpO1xuICB0aXRsZS5pbm5lckhUTUwgPSAnVGl0bGUnO1xuXG4gIGNvbnRhaW5lci5hcHBlYXIgPSBmdW5jdGlvbigpIHtcbiAgICBjb250YWluZXIuaXNPbiA9IHRydWU7XG4gICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gMTtcbiAgICB9LCAwKVxuICB9XG5cbiAgY29udGFpbmVyLmRpc2FwcGVhciA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChjb250YWluZXIuaXNPbikge1xuICAgICAgY29udGFpbmVyLmlzT24gPSBmYWxzZTtcbiAgICAgIGNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gMDtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgfSwgSU5GT19BTklNQVRJT05fVElNRSAqIDEwMDApXG4gICAgfVxuICB9XG5cbiAgY29udGFpbmVyLnNldFRpdGxlID0gZnVuY3Rpb24odGV4dCkge1xuICAgIHRpdGxlLmlubmVySFRNTCA9IHRleHQ7XG4gIH1cblxuICAvLyBjb250YWluZXIuZ2V0V2lkdGggPSBmdW5jdGlvbigpIHtcbiAgLy8gICByZXR1cm4gY29uYXRpbmVyZ2V0Q2xpXG4gIC8vIH1cbiAgdmFyIHJvd3MgPSB7fTtcblxuICBjb250YWluZXIuYWRkUm93ID0gZnVuY3Rpb24odGV4dCwgdmFsdWUsIGNvbG9yPSdibGFjaycpIHtcbiAgICB2YXIgbmV3Um93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbmV3Um93LmlkID0gJ3JvdycgKyB0ZXh0O1xuICAgIG5ld1Jvdy5jbGFzc0xpc3QuYWRkKCdwb2ludC1pbmZvLXJvdycpXG5cbiAgICB2YXIgdGV4dFNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgdGV4dFNwYW4uaW5uZXJIVE1MID0gdGV4dDtcblxuICAgIHZhciB2YWx1ZVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgdmFsdWVTcGFuLmNsYXNzTGlzdC5hZGQoJ3BvaW50LWluZm8tcm93LXZhbHVlJylcbiAgICB2YWx1ZVNwYW4uaWQgPSB0ZXh0O1xuICAgIHZhbHVlU3Bhbi5zdHlsZS5jb2xvciA9IGNvbG9yO1xuICAgIHZhbHVlU3Bhbi5pbm5lckhUTUwgPSB2YWx1ZTtcblxuICAgIHJvd3NbdGV4dF0gPSB2YWx1ZVNwYW47XG5cbiAgICBuZXdSb3cuYXBwZW5kKHRleHRTcGFuKTtcbiAgICBuZXdSb3cuYXBwZW5kKHZhbHVlU3Bhbik7XG4gICAgY29udGFpbmVyLmFwcGVuZChuZXdSb3cpO1xuICB9XG5cbiAgY29udGFpbmVyLmVuYWJsZVJvdyA9IGZ1bmN0aW9uKHRleHQpIHtcbiAgICB2YXIgZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb3cnICsgdGV4dCk7XG4gICAgaWYgKGUpIHtcbiAgICAgIGUuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICB9XG4gIH1cblxuICBjb250YWluZXIuZGlzYWJsZVJvdyA9IGZ1bmN0aW9uKHRleHQpIHtcbiAgICB2YXIgZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb3cnICsgdGV4dCk7XG4gICAgaWYgKGUpIHtcbiAgICAgIGUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG4gIH1cblxuICBjb250YWluZXIuc2V0Um93VmFsdWUgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgcm93c1trZXldLmlubmVySFRNTCA9IHZhbHVlO1xuICB9XG5cbiAgY29udGFpbmVyLmFwcGVuZCh0aXRsZSk7XG4gIHJldHVybiBjb250YWluZXI7XG59XG4iLCJpbXBvcnQgeyB0aHJvdHRsZSB9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7XG4gIFBSRVZJRVdfSU5JVF9XLCBwcmV2aWV3TWFza0NvbG9yLCBQUkVWSUVXX0lOTkVSX01BUkdJTl9UT1AsIFBSRVZJRVdfREFZX1RIRU1FXG59IGZyb20gJy4uL2NvbnN0cy5qcyc7XG5cbmNvbnN0IFBSRVZJRVdfUkVTSVpFX0FSRUFfV0lEVEggPSAxMDtcbmNvbnN0IFBSRVZJRVdfTUlOX1dJRFRIID0gMzA7XG5cbmNvbnN0IFBSRVZJRVdfQk9SREVSU19XSURUSCA9IDEwO1xuY29uc3QgUFJFVklFV19CT1JERVJfUkFESVVTID0gNTtcblxuY29uc3QgUFJFVklFV19BQ1RJT05TID0ge1xuICBOb25lOiAwLFxuICBSZXNpemVMZWZ0OiAxLFxuICBNb3ZlOiAyLFxuICBSZXNpemVSaWdodDogMyxcbn07XG5cbi8vIGV4cG9ydCBmdW5jdGlvbiBwcmV2aWV3KHcsIGgsIHBpeGVsUmF0aW8pIHtcbmV4cG9ydCBmdW5jdGlvbiBwcmV2aWV3KHcsIGgsIHBpeGVsUmF0aW8sIG9uQWN0aW9uVXBkYXRlKSB7XG4gIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG4gIHZhciBjdXJyVyA9IHc7XG4gIHZhciBjdXJySCA9IGg7XG5cbiAgY2FudmFzLndpZHRoID0gY3VyclcgKiBwaXhlbFJhdGlvO1xuICBjYW52YXMuaGVpZ2h0ID0gY3VyckggKiBwaXhlbFJhdGlvO1xuICBjYW52YXMuc3R5bGUud2lkdGggPSBjdXJyVyArICdweCc7XG4gIGNhbnZhcy5zdHlsZS5oZWlnaHQgPSBjdXJySCArICdweCc7XG4gIGN0eC5zY2FsZShwaXhlbFJhdGlvLCBwaXhlbFJhdGlvKTtcblxuICB2YXIgcHJldmlld01hc2tDb2xvciA9ICcjMDAwMDAwJztcbiAgdmFyIHByZXZpZXdNYXNrQWxwaGEgPSAnIzAwMDAwMCc7XG4gIHZhciBwcmV2aWV3Qm9yZGVyQ29sb3IgPSAnIzAwMDAwMCc7XG4gIHZhciBwcmV2aWV3Q29ybmVyc0ZpbGxDb2xvciA9ICcjMDAwMDAwJztcblxuICB2YXIgcHJldmlld0hlaWdodCA9IGN1cnJIIC0gUFJFVklFV19JTk5FUl9NQVJHSU5fVE9QICogMjtcblxuICB2YXIgbGVmdFggPSAoMSAtIFBSRVZJRVdfSU5JVF9XKSAqIGN1cnJXO1xuICB2YXIgcmlnaHRYID0gMSAqIGN1cnJXO1xuXG4gIHZhciBzdGF0ZSA9IHsgYWN0aW9uOiBQUkVWSUVXX0FDVElPTlMuTm9uZSwgbGVmdDogMSAtIFBSRVZJRVdfSU5JVF9XLCByaWdodDogMSB9O1xuICBmdW5jdGlvbiB1cGRhdGVTdGF0ZSgpIHtcbiAgICBzdGF0ZS5sZWZ0ID0gbGVmdFgvY3Vyclc7XG4gICAgc3RhdGUucmlnaHQgPSByaWdodFgvY3Vyclc7XG4gIH1cbiAgdXBkYXRlU3RhdGUoKTtcblxuICBmdW5jdGlvbiB1cGRhdGVBY3Rpb24oYWN0aW9uKSB7XG4gICAgc3RhdGUuYWN0aW9uID0gYWN0aW9uIHx8IFBSRVZJRVdfQUNUSU9OUy5Ob25lO1xuXG4gICAgaWYgKG9uQWN0aW9uVXBkYXRlKSB7XG4gICAgICBvbkFjdGlvblVwZGF0ZShzdGF0ZS5hY3Rpb24pO1xuICAgIH1cbiAgfVxuXG4gIGNhbnZhcy51cGRhdGVXaWR0aCA9IGZ1bmN0aW9uKHcsIHBpeGVsUmF0aW8pIHsgLy9GSVhNRSBSZW5hbWVcbiAgICBjdXJyVyA9IHc7XG5cbiAgICBjYW52YXMud2lkdGggPSBjdXJyVyAqIHBpeGVsUmF0aW87XG4gICAgY2FudmFzLmhlaWdodCA9IGN1cnJIICogcGl4ZWxSYXRpbztcbiAgICBjYW52YXMuc3R5bGUud2lkdGggPSBjdXJyVyArICdweCc7XG4gICAgY3R4LnNjYWxlKHBpeGVsUmF0aW8sIHBpeGVsUmF0aW8pO1xuXG4gICAgbGVmdFggPSBzdGF0ZS5sZWZ0ICogY3VycldcbiAgICByaWdodFggPSBzdGF0ZS5yaWdodCAqIGN1cnJXO1xuXG4gICAgY2FudmFzLmRyYXcoKTtcbiAgfVxuXG4gIGNhbnZhcy5zd2l0Y2hUaGVtZSA9IGZ1bmN0aW9uKHRoZW1lKSB7XG4gICAgc2V0VGhlbWUodGhlbWUpO1xuICAgIGNhbnZhcy5kcmF3KCk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRUaGVtZSh0aGVtZSkge1xuICAgIHByZXZpZXdNYXNrQ29sb3IgPSB0aGVtZS5wcmV2aWV3TWFza0NvbG9yO1xuICAgIHByZXZpZXdNYXNrQWxwaGEgPSB0aGVtZS5wcmV2aWV3TWFza0FscGhhO1xuICAgIHByZXZpZXdCb3JkZXJDb2xvciA9IHRoZW1lLnByZXZpZXdCb3JkZXJDb2xvcjtcbiAgICBwcmV2aWV3Q29ybmVyc0ZpbGxDb2xvciA9IHRoZW1lLnByZXZpZXdDb3JuZXJzRmlsbENvbG9yO1xuICB9XG4gIHNldFRoZW1lKFBSRVZJRVdfREFZX1RIRU1FKTtcblxuICBmdW5jdGlvbiBsZWZ0Wm9uZVVwZGF0ZSh4KSB7XG4gICAgaWYgKGxlZnRYID4gcmlnaHRYIC0gUFJFVklFV19NSU5fV0lEVEgpIGxlZnRYID0gcmlnaHRYIC0gUFJFVklFV19NSU5fV0lEVEg7XG4gICAgZWxzZSBpZiAobGVmdFggPCAwKSBsZWZ0WCA9IDA7XG4gIH1cblxuICBmdW5jdGlvbiBjZW50cmFsWm9uZVVwZGF0ZShjdXJyV2lkdGgpIHtcbiAgICBpZiAobGVmdFggPCAwKSBsZWZ0WCA9IDA7XG4gICAgaWYgKGxlZnRYID4gY3VyclcgLSBjdXJyV2lkdGgpIGxlZnRYID0gY3VyclcgLSBjdXJyV2lkdGg7XG4gICAgcmlnaHRYID0gbGVmdFggKyBjdXJyV2lkdGg7XG4gIH1cblxuICBmdW5jdGlvbiByaWdodFpvbmVVcGRhdGUoeCkge1xuICAgIGlmIChyaWdodFggPCBsZWZ0WCArIFBSRVZJRVdfTUlOX1dJRFRIKSByaWdodFggPSBsZWZ0WCArIFBSRVZJRVdfTUlOX1dJRFRIO1xuICAgIGVsc2UgaWYgKHJpZ2h0WCA+IGN1cnJXKSByaWdodFggPSBjdXJyVztcbiAgfVxuXG4gIHZhciBtb3VzZVggPSBudWxsO1xuXG4gIHZhciBvZmZzZXRMZWZ0WCA9IG51bGw7XG4gIHZhciBjdXJyV2lkdGggPSBudWxsO1xuICB2YXIgb2Zmc2V0UmlnaHRYID0gbnVsbDtcblxuICBmdW5jdGlvbiBjaGVja0FjdGlvbihlKSB7XG4gICAgbW91c2VYID0gZS5jbGllbnRYO1xuICAgIGlmIChpc0xlZnRab25lKGUuY2xpZW50WCAtIGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS54KSkge1xuICAgICAgb2Zmc2V0TGVmdFggPSBsZWZ0WCAtIGUuY2xpZW50WDtcbiAgICAgIHVwZGF0ZUFjdGlvbihQUkVWSUVXX0FDVElPTlMuUmVzaXplTGVmdClcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNDZW50cmFsWm9uZShlLmNsaWVudFggLSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkueCkpIHtcbiAgICAgIG9mZnNldExlZnRYID0gbGVmdFggLSBlLmNsaWVudFg7XG4gICAgICBjdXJyV2lkdGggPSByaWdodFggLSBsZWZ0WDtcblxuICAgICAgdXBkYXRlQWN0aW9uKFBSRVZJRVdfQUNUSU9OUy5Nb3ZlKVxuICAgIH1cbiAgICBlbHNlIGlmIChpc1JpZ2h0Wm9uZShlLmNsaWVudFggLSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkueCkpIHtcbiAgICAgIG9mZnNldFJpZ2h0WCA9IHJpZ2h0WCAtIGUuY2xpZW50WDtcbiAgICAgIHVwZGF0ZUFjdGlvbihQUkVWSUVXX0FDVElPTlMuUmVzaXplUmlnaHQpXG4gICAgfVxuICB9XG5cbiAgY2FudmFzLm9ubW91c2Vkb3duID0gZnVuY3Rpb24oZSkge1xuICAgIGNvbnNvbGUubG9nKCdtb3VzZSBkb3duJywgZSk7XG5cbiAgICBjaGVja0FjdGlvbihlKTtcbiAgICBvbm1vdXNlbW92ZSA9IG9uTW91c2VNb3ZlO1xuXG4gICAgb25tb3VzZXVwID0gZnVuY3Rpb24oZSkge1xuICAgICAgb25tb3VzZW1vdmUgPSBudWxsO1xuICAgICAgb25tb3VzZXVwID0gbnVsbDtcbiAgICAgIHVwZGF0ZUFjdGlvbihQUkVWSUVXX0FDVElPTlMuTm9uZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY2FudmFzLm9udG91Y2hzdGFydCA9IGZ1bmN0aW9uKGUpIHtcbiAgICBjaGVja0FjdGlvbihlLnRvdWNoZXNbMF0pO1xuICAgIG9udG91Y2htb3ZlID0gb25Ub3VjaE1vdmU7XG5cbiAgICBvbnRvdWNoZW5kID0gZnVuY3Rpb24oZSkge1xuICAgICAgb250b3VjaG1vdmUgPSBudWxsO1xuICAgICAgb250b3VjaGVuZCA9IG51bGw7XG4gICAgICB1cGRhdGVBY3Rpb24oUFJFVklFV19BQ1RJT05TLk5vbmUpO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBvbk1vdXNlTW92ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICBtb3VzZVggPSBlLmNsaWVudFg7XG4gIH1cblxuICB2YXIgb25Ub3VjaE1vdmUgPSBmdW5jdGlvbihlKSB7XG4gICAgbW91c2VYID0gZS50b3VjaGVzWzBdLmNsaWVudFg7XG4gIH1cblxuICBjYW52YXMudXBkYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHN0YXRlLmFjdGlvbiA+IDApIHtcbiAgICAgIGlmIChzdGF0ZS5hY3Rpb24gPT09IFBSRVZJRVdfQUNUSU9OUy5SZXNpemVMZWZ0KSB7XG4gICAgICAgIGxlZnRYID0gbW91c2VYICsgb2Zmc2V0TGVmdFg7XG4gICAgICAgIGxlZnRab25lVXBkYXRlKCk7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuYWN0aW9uID09PSBQUkVWSUVXX0FDVElPTlMuTW92ZSkge1xuICAgICAgICBsZWZ0WCA9IG1vdXNlWCArIG9mZnNldExlZnRYO1xuICAgICAgICBjZW50cmFsWm9uZVVwZGF0ZShjdXJyV2lkdGgpO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmFjdGlvbiA9PT0gUFJFVklFV19BQ1RJT05TLlJlc2l6ZVJpZ2h0KSB7XG4gICAgICAgIHJpZ2h0WCA9IG1vdXNlWCArIG9mZnNldFJpZ2h0WDtcbiAgICAgICAgcmlnaHRab25lVXBkYXRlKCk7XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZVN0YXRlKCk7XG4gICAgICBjYW52YXMuZHJhdygpO1xuICAgIH1cblxuICAgIHJldHVybiBzdGF0ZTtcbiAgfVxuXG4gIHZhciBvZmZYID0gMTtcbiAgdmFyIG1hc2tPdmVybGF5WCA9IDQ7XG5cbiAgY2FudmFzLmRyYXcgPSBmdW5jdGlvbigpIHtcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGN1cnJXLCBjdXJySCk7XG5cbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4LmZpbGxTdHlsZSA9IHByZXZpZXdNYXNrQ29sb3I7XG4gICAgY3R4Lmdsb2JhbEFscGhhID0gcHJldmlld01hc2tBbHBoYTtcblxuICAgIHZhciBsZWZ0ID0gbGVmdFg7XG4gICAgdmFyIHJpZ2h0ID0gcmlnaHRYO1xuICAgIGN0eC5yZWN0KDAsIFBSRVZJRVdfSU5ORVJfTUFSR0lOX1RPUCwgbGVmdCArIG1hc2tPdmVybGF5WCwgcHJldmlld0hlaWdodCk7XG4gICAgY3R4LnJlY3QocmlnaHQgLSBtYXNrT3ZlcmxheVgsIFBSRVZJRVdfSU5ORVJfTUFSR0lOX1RPUCwgY3VyclcgLSByaWdodCArIG1hc2tPdmVybGF5WCwgcHJldmlld0hlaWdodCk7XG4gICAgY3R4LmZpbGwoKTtcblxuXG4gICAgY3R4Lmdsb2JhbEFscGhhID0gMTtcbiAgICBjdHguZmlsbFN0eWxlID0gcHJldmlld0Nvcm5lcnNGaWxsQ29sb3I7XG5cbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4LmFyYyhcbiAgICAgIFBSRVZJRVdfQk9SREVSX1JBRElVUyxcbiAgICAgIFBSRVZJRVdfQk9SREVSX1JBRElVUyArIFBSRVZJRVdfSU5ORVJfTUFSR0lOX1RPUCxcbiAgICAgIFBSRVZJRVdfQk9SREVSX1JBRElVUyxcbiAgICAgIDEqTWF0aC5QSSxcbiAgICAgIDEuNSpNYXRoLlBJXG4gICAgKTtcbiAgICBjdHgubW92ZVRvKFBSRVZJRVdfQk9SREVSX1JBRElVUywgUFJFVklFV19JTk5FUl9NQVJHSU5fVE9QKTtcbiAgICBjdHgubGluZVRvKDAsIFBSRVZJRVdfSU5ORVJfTUFSR0lOX1RPUCk7XG4gICAgY3R4LmxpbmVUbygwLCBQUkVWSUVXX0JPUkRFUl9SQURJVVMgKyBQUkVWSUVXX0lOTkVSX01BUkdJTl9UT1ApO1xuICAgIGN0eC5maWxsKCk7XG5cbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4LmFyYyhcbiAgICAgIGN1cnJXIC0gUFJFVklFV19CT1JERVJfUkFESVVTLFxuICAgICAgUFJFVklFV19CT1JERVJfUkFESVVTICsgUFJFVklFV19JTk5FUl9NQVJHSU5fVE9QLFxuICAgICAgUFJFVklFV19CT1JERVJfUkFESVVTLFxuICAgICAgMS41Kk1hdGguUEksXG4gICAgICAwKk1hdGguUElcbiAgICApO1xuICAgIGN0eC5tb3ZlVG8oY3VyclcsIFBSRVZJRVdfQk9SREVSX1JBRElVUyArIFBSRVZJRVdfSU5ORVJfTUFSR0lOX1RPUCk7XG4gICAgY3R4LmxpbmVUbyhjdXJyVywgUFJFVklFV19JTk5FUl9NQVJHSU5fVE9QKTtcbiAgICBjdHgubGluZVRvKGN1cnJXIC0gUFJFVklFV19CT1JERVJfUkFESVVTLCBQUkVWSUVXX0lOTkVSX01BUkdJTl9UT1ApO1xuICAgIGN0eC5maWxsKCk7XG5cbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4LmFyYyhcbiAgICAgIGN1cnJXIC0gUFJFVklFV19CT1JERVJfUkFESVVTLFxuICAgICAgY3VyckggLSBQUkVWSUVXX0JPUkRFUl9SQURJVVMgLSBQUkVWSUVXX0lOTkVSX01BUkdJTl9UT1AsXG4gICAgICBQUkVWSUVXX0JPUkRFUl9SQURJVVMsXG4gICAgICAwKk1hdGguUEksXG4gICAgICAwLjUqTWF0aC5QSVxuICAgICk7XG4gICAgY3R4Lm1vdmVUbyhjdXJyVyAtIFBSRVZJRVdfQk9SREVSX1JBRElVUywgY3VyckggLSBQUkVWSUVXX0lOTkVSX01BUkdJTl9UT1ApO1xuICAgIGN0eC5saW5lVG8oY3VyclcsIGN1cnJIIC0gUFJFVklFV19JTk5FUl9NQVJHSU5fVE9QKTtcbiAgICBjdHgubGluZVRvKGN1cnJXLCBjdXJySCAtIFBSRVZJRVdfQk9SREVSX1JBRElVUyAtIFBSRVZJRVdfSU5ORVJfTUFSR0lOX1RPUCk7XG4gICAgY3R4LmZpbGwoKTtcblxuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHguYXJjKFxuICAgICAgUFJFVklFV19CT1JERVJfUkFESVVTLFxuICAgICAgY3VyckggLSBQUkVWSUVXX0JPUkRFUl9SQURJVVMgLSBQUkVWSUVXX0lOTkVSX01BUkdJTl9UT1AsXG4gICAgICBQUkVWSUVXX0JPUkRFUl9SQURJVVMsXG4gICAgICAwLjUqTWF0aC5QSSxcbiAgICAgIDEqTWF0aC5QSVxuICAgICk7XG4gICAgY3R4Lm1vdmVUbygwLCBjdXJySCAtIFBSRVZJRVdfQk9SREVSX1JBRElVUyAtIFBSRVZJRVdfSU5ORVJfTUFSR0lOX1RPUCk7XG4gICAgY3R4LmxpbmVUbygwLCBjdXJySCAtIFBSRVZJRVdfSU5ORVJfTUFSR0lOX1RPUCk7XG4gICAgY3R4LmxpbmVUbyhQUkVWSUVXX0JPUkRFUl9SQURJVVMsIGN1cnJIIC0gUFJFVklFV19JTk5FUl9NQVJHSU5fVE9QKTtcbiAgICBjdHguZmlsbCgpO1xuXG4gICAgY3R4LnN0cm9rZVN0eWxlID0gcHJldmlld0JvcmRlckNvbG9yO1xuICAgIGN0eC5saW5lV2lkdGggPSAxICsgb2ZmWDtcbiAgICBjdHguZ2xvYmFsQWxwaGEgPSAxO1xuICAgIHJvdW5kUmVjdChcbiAgICAgIGN0eCxcbiAgICAgIGxlZnQrb2ZmWCxcbiAgICAgIFBSRVZJRVdfSU5ORVJfTUFSR0lOX1RPUCxcbiAgICAgIHJpZ2h0IC0gbGVmdCAtIG9mZlgqMixcbiAgICAgIHByZXZpZXdIZWlnaHQsXG4gICAgICBbUFJFVklFV19CT1JERVJfUkFESVVTLCBQUkVWSUVXX0JPUkRFUl9SQURJVVMsIFBSRVZJRVdfQk9SREVSX1JBRElVUywgUFJFVklFV19CT1JERVJfUkFESVVTXVxuICAgICk7XG5cbiAgICBjdHguZmlsbFN0eWxlID0gcHJldmlld0JvcmRlckNvbG9yO1xuICAgIHJvdW5kUmVjdChcbiAgICAgIGN0eCxcbiAgICAgIGxlZnQgKyBvZmZYLFxuICAgICAgUFJFVklFV19JTk5FUl9NQVJHSU5fVE9QLFxuICAgICAgOCxcbiAgICAgIHByZXZpZXdIZWlnaHQsXG4gICAgICBbUFJFVklFV19CT1JERVJfUkFESVVTLCAwLCAwLCBQUkVWSUVXX0JPUkRFUl9SQURJVVNdLFxuICAgICAgdHJ1ZVxuICAgICk7XG4gICAgcm91bmRSZWN0KFxuICAgICAgY3R4LFxuICAgICAgcmlnaHQgLSA4IC0gb2ZmWCxcbiAgICAgIFBSRVZJRVdfSU5ORVJfTUFSR0lOX1RPUCxcbiAgICAgIDgsXG4gICAgICBwcmV2aWV3SGVpZ2h0LFxuICAgICAgWzAsIFBSRVZJRVdfQk9SREVSX1JBRElVUywgUFJFVklFV19CT1JERVJfUkFESVVTLCAwXSxcbiAgICAgIHRydWVcbiAgICApO1xuICB9XG4gIGNhbnZhcy5kcmF3KCk7XG5cbiAgZnVuY3Rpb24gaXNMZWZ0Wm9uZSh4KSB7XG4gICAgcmV0dXJuIE1hdGguYWJzKHggLSBsZWZ0WCkgPCBQUkVWSUVXX1JFU0laRV9BUkVBX1dJRFRIO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNSaWdodFpvbmUoeCkge1xuICAgIHJldHVybiBNYXRoLmFicyh4IC0gcmlnaHRYKSA8IFBSRVZJRVdfUkVTSVpFX0FSRUFfV0lEVEg7XG4gIH1cblxuICBmdW5jdGlvbiBpc0NlbnRyYWxab25lKHgpIHtcbiAgICByZXR1cm4geCA+IGxlZnRYICsgUFJFVklFV19SRVNJWkVfQVJFQV9XSURUSCAmJiB4IDwgcmlnaHRYIC0gUFJFVklFV19SRVNJWkVfQVJFQV9XSURUSDtcbiAgfVxuXG4gIC8vIHJlcXVlc3RBbmltYXRpb25GcmFtZShkcmF3KTtcbiAgcmV0dXJuIGNhbnZhcztcbn1cblxuZnVuY3Rpb24gcm91bmRSZWN0KGN0eCwgeCwgeSwgd2lkdGgsIGhlaWdodCwgcmFkaXVzLCBmaWxsLCBzdHJva2UpIHtcbiAgaWYgKHR5cGVvZiBzdHJva2UgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBzdHJva2UgPSB0cnVlO1xuICB9XG4gIGlmICh0eXBlb2YgcmFkaXVzID09PSAndW5kZWZpbmVkJykge1xuICAgIHJhZGl1cyA9IDU7XG4gIH1cbiAgaWYgKHR5cGVvZiByYWRpdXMgPT09ICdudW1iZXInKSB7XG4gICAgcmFkaXVzID0ge3RsOiByYWRpdXMsIHRyOiByYWRpdXMsIGJyOiByYWRpdXMsIGJsOiByYWRpdXN9O1xuICB9XG4gIGlmICh0eXBlb2YgcmFkaXVzID09PSAnb2JqZWN0Jykge1xuICAgIHJhZGl1cyA9IHt0bDogcmFkaXVzWzBdLCB0cjogcmFkaXVzWzFdLCBicjogcmFkaXVzWzJdLCBibDogcmFkaXVzWzNdfTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgZGVmYXVsdFJhZGl1cyA9IHt0bDogMCwgdHI6IDAsIGJyOiAwLCBibDogMH07XG4gICAgZm9yICh2YXIgc2lkZSBpbiBkZWZhdWx0UmFkaXVzKSB7XG4gICAgICByYWRpdXNbc2lkZV0gPSByYWRpdXNbc2lkZV0gfHwgZGVmYXVsdFJhZGl1c1tzaWRlXTtcbiAgICB9XG4gIH1cbiAgY3R4LmJlZ2luUGF0aCgpO1xuICBjdHgubW92ZVRvKHggKyByYWRpdXMudGwsIHkpO1xuICBjdHgubGluZVRvKHggKyB3aWR0aCAtIHJhZGl1cy50ciwgeSk7XG4gIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHggKyB3aWR0aCwgeSwgeCArIHdpZHRoLCB5ICsgcmFkaXVzLnRyKTtcbiAgY3R4LmxpbmVUbyh4ICsgd2lkdGgsIHkgKyBoZWlnaHQgLSByYWRpdXMuYnIpO1xuICBjdHgucXVhZHJhdGljQ3VydmVUbyh4ICsgd2lkdGgsIHkgKyBoZWlnaHQsIHggKyB3aWR0aCAtIHJhZGl1cy5iciwgeSArIGhlaWdodCk7XG4gIGN0eC5saW5lVG8oeCArIHJhZGl1cy5ibCwgeSArIGhlaWdodCk7XG4gIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHgsIHkgKyBoZWlnaHQsIHgsIHkgKyBoZWlnaHQgLSByYWRpdXMuYmwpO1xuICBjdHgubGluZVRvKHgsIHkgKyByYWRpdXMudGwpO1xuICBjdHgucXVhZHJhdGljQ3VydmVUbyh4LCB5LCB4ICsgcmFkaXVzLnRsLCB5KTtcbiAgY3R4LmNsb3NlUGF0aCgpO1xuICBpZiAoZmlsbCkge1xuICAgIGN0eC5maWxsKCk7XG4gIH1cbiAgZWxzZSBpZiAoc3Ryb2tlKSB7XG4gICAgY3R4LnN0cm9rZSgpO1xuICB9XG5cbn1cbiIsImltcG9ydCB7IENoYXJ0QmFzZSwgZ2V0U2NyZWVuWEJ5SW5kLCBnZXRZQ29vcmRzLCBnZXRTY3JlZW5ZIH0gZnJvbSAnLi9jaGFydCc7XG5pbXBvcnQgeyBBbmltYXRlZFZhbHVlLCBBbmltYXRlZEFycmF5LCBtYWluIH0gZnJvbSAnLi4vYW5pbWF0aW9ucyc7XG5pbXBvcnQge1xuICBjcmVhdGVMYWJlbEZyb21EYXRlLFxuICBnZXRNaW4sIGdldE1heCxcbiAgZ2V0TWF0cml4TWF4LFxuICBkZWJvdW5jZSwgZ2V0R3JpZFZhbHVlc0J5TWF4LFxuICBnZXRTdGVwRm9yR3JpZFZhbHVlcyxcbiAgZ2V0RGF0YUNvbHVtbkJ5TmFtZSxcbiAgdHJhbnNwb3NlLFxuICByb3VuZCwgc3VtLCBnZXRQZXJjZW50cywgZ2V0U3RhY2tlZFBlcmNlbnRzXG59IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7XG4gIENIQVJUX0dSSURfUEFERElORyxcbiAgQ0hBUlRfSEVBREVSX0hFSUdIVCxcbiAgQ0hBUlRfSEVBREVSX01BUkdJTl9CT1RUT00sXG4gIENIQVJUX01BWF9XSURUSCxcbiAgQ0hBUlRfTUlOX0hFSUdIVCxcbiAgQ0hBUlRfTUFYX0hFSUdIVCxcbiAgT1lfTEFCRUxTX01BUkdJTl9UT1AsXG4gIFlfQU5JTUFUSU9OX1RJTUUsXG59IGZyb20gJy4uL2NvbnN0cyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBwZXJjZW50YWdlU3RhY2tlZEFyZWFDaGFydChjb250YWluZXIsIGRhdGEsIG5hbWUpIHtcbiAgdmFyIGNoYXJ0ID0gbmV3IFBlcmNlbnRhZ2VTdGFja2VkQXJlYUNoYXJ0KGNvbnRhaW5lciwgZGF0YSwgbmFtZSk7XG4gIHJldHVybiBjaGFydDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFBlcmNlbnRhZ2VTdGFja2VkQXJlYUNoYXJ0KGNvbnRhaW5lciwgZGF0YSkge1xuICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgQ2hhcnRCYXNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIHRoaXMuaW5pdCgpO1xufVxuXG5QZXJjZW50YWdlU3RhY2tlZEFyZWFDaGFydC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENoYXJ0QmFzZS5wcm90b3R5cGUpO1xuUGVyY2VudGFnZVN0YWNrZWRBcmVhQ2hhcnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUGVyY2VudGFnZVN0YWNrZWRBcmVhQ2hhcnQ7XG5cblBlcmNlbnRhZ2VTdGFja2VkQXJlYUNoYXJ0LnByb3RvdHlwZS5pbml0RGF0YSA9IGZ1bmN0aW9uKCkge1xuICBDaGFydEJhc2UucHJvdG90eXBlLmluaXREYXRhLmNhbGwodGhpcyk7XG5cbiAgdGhpcy5wZXJjZW50cyA9IHRoaXMuY29sdW1uc1swXS52YWx1ZXMubWFwKHYgPT4gdGhpcy5jb2x1bW5zLm1hcChjID0+IG5ldyBBbmltYXRlZFZhbHVlKDAsIFlfQU5JTUFUSU9OX1RJTUUpKSlcbiAgdGhpcy51cGRhdGVQZXJjZW50cygpO1xufVxuXG5QZXJjZW50YWdlU3RhY2tlZEFyZWFDaGFydC5wcm90b3R5cGUudXBkYXRlWSA9IGZ1bmN0aW9uKCkge31cblxuUGVyY2VudGFnZVN0YWNrZWRBcmVhQ2hhcnQucHJvdG90eXBlLmluaXRPeVByb3BzID0gZnVuY3Rpb24oKSB7XG4gIENoYXJ0QmFzZS5wcm90b3R5cGUuaW5pdE95UHJvcHMuYXBwbHkodGhpcyk7XG5cbiAgdGhpcy5tYXJnaW5Ub3AgPSAyMDtcblxuICB0aGlzLnBlcmNlbnRhZ2VMYWJlbHMgPSB7XG4gICAgYWxwaGE6IHsgdmFsdWU6IDF9LFxuICAgIG9mZnNldFk6IDAsXG4gICAgbGFiZWxzOiBbMCwgMjUsIDUwLCA3NSwgMTAwXVxuICB9O1xuICB0aGlzLmdyaWRMaW5lc0hlaWdodCA9IE1hdGgucm91bmQoKHRoaXMuYm90dG9tWSAtIHRoaXMubWFyZ2luVG9wKSAvIDQpOyAvLyBtb3ZlIHRvIGNvbnN0XG5cbiAgdGhpcy5ncmlkT3lUZXh0c0NvbG9yID0gJyMyNTI1Mjk5MCc7IC8vIDUwJVxufVxuXG5cblBlcmNlbnRhZ2VTdGFja2VkQXJlYUNoYXJ0LnByb3RvdHlwZS5kcmF3T3lMYWJlbHMgPSBmdW5jdGlvbihveUxhYmVscykge1xuICAvLyBpZiAob3lMYWJlbHMuYWxwaGEudmFsdWUgPD0gMCkgcmV0dXJuO1xuICB0aGlzLmN0eC5nbG9iYWxBbHBoYSA9IG95TGFiZWxzLmFscGhhLnZhbHVlO1xuICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IHRoaXMuZ3JpZExpbmVzQ29sb3I7IC8vIEZJWE1FIGNvbG9yIHRvIGNvbnN0XG4gIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHRoaXMuZ3JpZE95VGV4dHNDb2xvcjsgLy8gRklYTUUgY29sb3IgdG8gY29uc3RcbiAgdGhpcy5jdHgubGluZVdpZHRoID0gMTtcbiAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG5cbiAgLy8gdmFyIG9mZnNldCA9IE1hdGgucm91bmQodGhpcy5ncmlkTGluZXNIZWlnaHQgKiAob3lMYWJlbHMubGFiZWxzLmxlbmd0aCAtIDEpKTtcblxuICBmb3IgKHZhciBpID0gMTsgaSA8IG95TGFiZWxzLmxhYmVscy5sZW5ndGg7IGkrKykge1xuICAgIHZhciB5ID0gdGhpcy5ib3R0b21ZIC0gaSAqIHRoaXMuZ3JpZExpbmVzSGVpZ2h0O1xuICAgIHRoaXMuY3R4LmZpbGxUZXh0KFxuICAgICAgb3lMYWJlbHMubGFiZWxzW2ldLFxuICAgICAgQ0hBUlRfR1JJRF9QQURESU5HLFxuICAgICAgeSArIE9ZX0xBQkVMU19NQVJHSU5fVE9QXG4gICAgKTtcbiAgICB5IC09IDAuNTtcbiAgICB0aGlzLmN0eC5tb3ZlVG8oQ0hBUlRfR1JJRF9QQURESU5HLCB5KTtcbiAgICB0aGlzLmN0eC5saW5lVG8odGhpcy53IC0gQ0hBUlRfR1JJRF9QQURESU5HLCB5KTtcbiAgfVxuICB0aGlzLmN0eC5zdHJva2UoKTtcbn1cblxuUGVyY2VudGFnZVN0YWNrZWRBcmVhQ2hhcnQucHJvdG90eXBlLnVwZGF0ZVBlcmNlbnRzID0gZnVuY3Rpb24gKCkge1xuICAvLyB0aGlzLnBlcmNlbnRzID0gZ2V0U3RhY2tlZFBlcmNlbnRzKHRoaXMuY29sdW1ucy5maWx0ZXIoYyA9PiBjLmlzT24pLm1hcChjID0+IGMudmFsdWVzKSk7XG4gIHZhciBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTtcblxuICB2YXIgc3RhY2tlZFBlcmNlbnRzID0gZ2V0U3RhY2tlZFBlcmNlbnRzKHRoaXMuY29sdW1ucy5tYXAoYyA9PiB7XG4gICAgaWYgKCFjLmlzT24pIHtcbiAgICAgIHJldHVybiBjLnZhbHVlcy5tYXAodiA9PiAwKVxuICAgIH1cbiAgICByZXR1cm4gYy52YWx1ZXM7XG4gIH0pKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YWNrZWRQZXJjZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3RhY2tlZFBlcmNlbnRzW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICB0aGlzLnBlcmNlbnRzW2ldW2pdLnNldChNYXRoLm1pbigxMDAsIHN0YWNrZWRQZXJjZW50c1tpXVtqXSksIG5vdywgdHJ1ZSk7XG4gICAgfVxuICB9XG59O1xuXG5QZXJjZW50YWdlU3RhY2tlZEFyZWFDaGFydC5wcm90b3R5cGUuZHJhd0JnID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuZHJhd094TGFiZWxzKHRoaXMuc3RhdGljT3hMYWJlbHMsIHRoaXMub3hMYWJlbHMubGVuZ3RoIC0gMSk7XG4gIHRoaXMuZHJhd094TGFiZWxzKHRoaXMuZHluYW1pY094TGFiZWxzLCB0aGlzLm94TGFiZWxzLmxlbmd0aCAtIDEgLSB0aGlzLmR5bmFtaWNPeExhYmVscy5zdGVwLzIpO1xufVxuXG4vLyBQZXJjZW50YWdlU3RhY2tlZEFyZWFDaGFydC5wcm90b3R5cGUuZHJhd095TGFiZWxzID0gZnVuY3Rpb24ob3lMYWJlbHMpIHtcbi8vICAgY29uc29sZS5sb2coJ2RyYXcgb3knKTtcbi8vIH1cblxuXG5QZXJjZW50YWdlU3RhY2tlZEFyZWFDaGFydC5wcm90b3R5cGUuY2hlY2tSZWRyYXdDaGFydHNDb250ZW50ID0gZnVuY3Rpb24obm93KSB7XG4gIC8vIGNvbnNvbGUubG9nKCdjaGVjayByZWRyYXcnKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBlcmNlbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLnBlcmNlbnRzW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICBpZiAodGhpcy5wZXJjZW50c1tpXVtqXS5uZXh0VGljayhub3cpKSB7XG4gICAgICAgIHRoaXMubmVlZFJlZHJhdyA9IHRoaXMubmVlZERyYXdQcmV2aWV3ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuUGVyY2VudGFnZVN0YWNrZWRBcmVhQ2hhcnQucHJvdG90eXBlLmJ1dHRvbkNsaWNrZWQgPSBmdW5jdGlvbihuYW1lLCBpc09uKSB7XG4gIHZhciBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAodGhpcy5jb2x1bW5zW2ldLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgIC8vIGlmIChpc09uKSB0aGlzLmNvbHVtbnNbaV0uYWxwaGEuc2V0KDEsIG5vdywgdHJ1ZSlcbiAgICAgIC8vIGVsc2UgdGhpcy5jb2x1bW5zW2ldLmFscGhhLnNldCgwLCBub3csIHRydWUpXG4gICAgICB0aGlzLmNvbHVtbnNbaV0uaXNPbiA9IGlzT247XG4gICAgICB0aGlzLnVwZGF0ZVBlcmNlbnRzKCk7XG5cbiAgICAgIC8vIHRoaXMuZ3JpZFByZXZpZXdNYXhZLnNldChNYXRoLm1heCh0aGlzLmNhbGN1bGF0ZUdyaWRQcmV2aWV3TWF4WSgpLCAwKSwgbm93LCB0cnVlKTtcblxuICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9XG4gIH1cbn1cblxuUGVyY2VudGFnZVN0YWNrZWRBcmVhQ2hhcnQucHJvdG90eXBlLmRyYXdDaGFydENvbnRlbnQgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGJhclcgPSBNYXRoLnJvdW5kKHRoaXMuYmFyV2lkdGgqdGhpcy5yb3VuZCkvdGhpcy5yb3VuZDtcbiAgdmFyIHNJID0gTWF0aC5tYXgodGhpcy5zdGFydEluZCAtIHRoaXMuZHJhd0luZE9mZnNldCwgMCk7XG4gIHZhciBlSSA9IE1hdGgubWluKHRoaXMuZW5kSW5kICsgdGhpcy5kcmF3SW5kT2Zmc2V0LCB0aGlzLkwpO1xuXG4gIHZhciBYID0gW107XG4gIGZvciAodmFyIGkgPSBzSTsgaSA8IGVJKzE7IGkrKykge1xuICAgIFgucHVzaChnZXRTY3JlZW5YQnlJbmQoaSwgYmFyVywgdGhpcy5vZmZzZXRYKSk7XG4gIH1cblxuICB2YXIgbWlucyA9IHRyYW5zcG9zZSh0aGlzLnBlcmNlbnRzKS5tYXAoYyA9PiBnZXRNaW4oYy5tYXAodiA9PiB2LnZhbHVlKSkpO1xuXG4gIFggPSBYLmNvbmNhdChYW1gubGVuZ3RoLTFdLCBYWzBdKTtcbiAgZm9yICh2YXIgaSA9IHRoaXMuY29sdW1ucy5sZW5ndGggLSAxOyBpID49IDAgOyBpLS0pIHtcbiAgICB2YXIgdmFsdWVzID0gdGhpcy5wZXJjZW50cy5tYXAocCA9PiBwW2ldKS5zbGljZShzSSwgZUkrMSk7XG4gICAgdmFyIFkgPSB2YWx1ZXMubWFwKHYgPT4gZ2V0U2NyZWVuWSh0aGlzLmJvdHRvbVkgLSB0aGlzLm1hcmdpblRvcCwgdi52YWx1ZSwgMTAwKSArIHRoaXMubWFyZ2luVG9wKTtcblxuICAgIHZhciBtID0gZ2V0U2NyZWVuWSh0aGlzLmJvdHRvbVkgLSB0aGlzLm1hcmdpblRvcCwgKG1pbnNbaS0xXSkgPyBtaW5zW2ktMV0gOiAwLCAxMDApICsgdGhpcy5tYXJnaW5Ub3A7XG4gICAgWSA9IFkuY29uY2F0KG0sIG0pO1xuICAgIHRoaXMuZHJhd0FyZWEoWCwgWSwgdGhpcy5jb2x1bW5zW2ldLmNvbG9yKTtcbiAgfVxuXG4gIHRoaXMuZHJhd095TGFiZWxzKHRoaXMucGVyY2VudGFnZUxhYmVscyk7XG4gIHRoaXMuZHJhd1plcm9MaW5lKCk7XG59XG5cblBlcmNlbnRhZ2VTdGFja2VkQXJlYUNoYXJ0LnByb3RvdHlwZS5kcmF3QXJlYSA9IGZ1bmN0aW9uIChYLCBZLCBjb2xvciwgYWxwaGE9MSkge1xuICAvLyBpZiAoYWxwaGEgPiAwKSB7XG4gICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgdGhpcy5jdHguZ2xvYmFsQWxwaGEgPSBhbHBoYTtcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICB0aGlzLmN0eC5saW5lV2lkdGggPSAxO1xuXG4gICAgdGhpcy5jdHgubW92ZVRvKFhbMF0sIFlbMF0pO1xuICAgIGZvciAobGV0IGk9MTsgaSA8IFgubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuY3R4LmxpbmVUbyhYW2ldLCBZW2ldKTtcbiAgICB9XG4gICAgdGhpcy5jdHguZmlsbCgpO1xuICAvLyB9XG59XG5cblBlcmNlbnRhZ2VTdGFja2VkQXJlYUNoYXJ0LnByb3RvdHlwZS5kcmF3UHJldmlldyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmNsZWFyRHJhd1ByZXZpZXcoKTtcblxuICB2YXIgWCA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMub3hMYWJlbHMubGVuZ3RoOyBpKyspIHtcbiAgICBYLnB1c2goZ2V0U2NyZWVuWEJ5SW5kKGksIHRoaXMucHJldmlld0NoYXJ0U3RlcCwgdGhpcy5wcmV2aWV3Q2hhcnRYKSk7XG4gIH1cbiAgWFswXSA9IE1hdGguY2VpbChYWzBdKTtcbiAgWFtYLmxlbmd0aC0xXSA9IE1hdGguZmxvb3IoWFtYLmxlbmd0aC0xXSk7XG4gIFggPSBYLmNvbmNhdChYW1gubGVuZ3RoLTFdLCBYWzBdKTtcblxuICB2YXIgbWlucyA9IHRyYW5zcG9zZSh0aGlzLnBlcmNlbnRzKS5tYXAoYyA9PiBnZXRNaW4oYy5tYXAodiA9PiB2LnZhbHVlKSkpOyAvLyDQo9Cx0YDQsNGC0Ywg0L7RgtGB0Y7QtNCwLCDQvNC+0LbQvdC+INC/0LXRgNC10YHRh9C40YLRi9Cy0LDRgtGMINC/0YDQuCDQuNC30LzQtdC90LXQvdC40Y/RhSDQsiDQtNCw0L3QvdGL0YVcblxuICBmb3IgKHZhciBpID0gdGhpcy5jb2x1bW5zLmxlbmd0aCAtIDE7IGkgPj0gMCA7IGktLSkge1xuICAgIHZhciB2YWx1ZXMgPSB0aGlzLnBlcmNlbnRzLm1hcChwID0+IHBbaV0pO1xuICAgIHZhciBZID0gdmFsdWVzLm1hcCh2ID0+IGdldFNjcmVlblkodGhpcy5wcmV2aWV3Q2hhcnRIZWlnaHQsIHYudmFsdWUsIDEwMCkpO1xuICAgIHZhciBtID0gZ2V0U2NyZWVuWSh0aGlzLnByZXZpZXdDaGFydEhlaWdodCwgKG1pbnNbaS0xXSkgPyBtaW5zW2ktMV0gOiAwLCAxMDApO1xuICAgIFkgPSBZLmNvbmNhdChtLCBtKS5tYXAoeSA9PiBNYXRoLm1heCh0aGlzLnByZXZpZXdDaGFydFkgKyB5LCB0aGlzLnByZXZpZXdDaGFydFkpKTtcblxuICAgIHRoaXMuZHJhd0FyZWEoWCwgWSwgdGhpcy5jb2x1bW5zW2ldLmNvbG9yKTtcbiAgfVxufVxuXG5QZXJjZW50YWdlU3RhY2tlZEFyZWFDaGFydC5wcm90b3R5cGUuZHJhd1NlbGVjdGVkQ2hhcnRDb250ZW50ID0gZnVuY3Rpb24oKSB7XG4gIC8vIGlmICh0aGlzLnNlbGVjdGVkSW5kID4gMCkge1xuXG4gICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmdyaWRMaW5lc0NvbG9yO1xuICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IDE7XG4gICAgdGhpcy5jdHgubW92ZVRvKHRoaXMuc2VsZWN0ZWRTY3JlZW5YICsgMC41LCAwKTtcbiAgICB0aGlzLmN0eC5saW5lVG8odGhpcy5zZWxlY3RlZFNjcmVlblggKyAwLjUsIHRoaXMuYm90dG9tWSk7XG4gICAgdGhpcy5jdHguc3Ryb2tlKCk7XG5cbiAgLy8gICB0aGlzLmluZm8uc3R5bGUubGVmdCA9IHRoaXMuc2VsZWN0ZWRTY3JlZW5YIC0gdGhpcy5pbmZvLm9mZnNldFdpZHRoIC0gMzAgKyAncHgnOyAvLyBGSVhNRSB0aGlzLmluZm8gbWFyZ2luXG4gIC8vICAgdGhpcy5pbmZvLnN0eWxlLnRvcCA9IHRoaXMuc2VsZWN0ZWRTY3JlZW5ZIC0gdGhpcy5pbmZvLm9mZnNldEhlaWdodC8yICsgJ3B4JzsgLy8gRklYTUUgdGhpcy5pbmZvIG1hcmdpblxuICAvLyAgIHRoaXMuaW5mby5hcHBlYXIoKTtcbiAgLy8gfVxuICAvLyBlbHNlIHtcbiAgLy8gICB0aGlzLmluZm8uZGlzYXBwZWFyKClcbiAgLy8gfVxufVxuIiwiaW1wb3J0IHsgQ2hhcnRCYXNlLCBnZXRTY3JlZW5YQnlJbmQsIGdldFlDb29yZHMsIGdldFNjcmVlblkgfSBmcm9tICcuL2NoYXJ0JztcbmltcG9ydCB7IEJhckNoYXJ0IH0gZnJvbSAnLi9iYXItY2hhcnQnO1xuaW1wb3J0IHsgQW5pbWF0ZWRWYWx1ZSwgQW5pbWF0ZWRBcnJheSwgbWFpbiB9IGZyb20gJy4uL2FuaW1hdGlvbnMnO1xuaW1wb3J0IHsgY3JlYXRlSW5mbyB9IGZyb20gJy4vcG9pbnQtaW5mbyc7XG5pbXBvcnQge1xuICBjcmVhdGVMYWJlbEZyb21EYXRlLFxuICBnZXRNaW4sIGdldE1heCxcbiAgZGVib3VuY2UsIGdldEdyaWRWYWx1ZXNCeU1heCxcbiAgc3VtLCByb3VuZCwgdHJhbnNwb3NlLCBnZXRTdGFja2VkQXJyYXlTdW1zXG59IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7XG4gIE9YTEFCRUxTX0hFSUdIVCxcbiAgQ0hBUlRfR1JJRF9QQURESU5HLFxuICBDSEFSVF9IRUFERVJfSEVJR0hULFxuICBDSEFSVF9IRUFERVJfTUFSR0lOX0JPVFRPTSxcbiAgQ0hBUlRfTUFYX1dJRFRILFxuICBDSEFSVF9NSU5fSEVJR0hULFxuICBDSEFSVF9NQVhfSEVJR0hULFxuICBZX0FOSU1BVElPTl9USU1FLFxuICBPWV9MQUJFTFNfTUFSR0lOX1RPUCxcbn0gZnJvbSAnLi4vY29uc3RzJztcblxuLy8gY29uc3QgT1hfTEFCRUxTX0FOSU1BVElPTl9EVVJBVElPTiA9IDAuMjU7XG4vL1xuLy8gY29uc3QgUFJFVklFV19DSEFSVF9IRUlHSFQgPSA1MDtcbi8vIGNvbnN0IFBSRVZJRVdfQ0hBUlRfTUFSR0lOID0gMzBcblxuXG5leHBvcnQgZnVuY3Rpb24gc3RhY2tlZEJhckNoYXJ0KGNvbnRhaW5lciwgZGF0YSwgbmFtZSkge1xuICB2YXIgY2hhcnQgPSBuZXcgU3RhY2tlZEJhckNoYXJ0KGNvbnRhaW5lciwgZGF0YSwgbmFtZSk7XG4gIHJldHVybiBjaGFydDtcbn1cblxuZnVuY3Rpb24gU3RhY2tlZEJhckNoYXJ0KGNvbnRhaW5lciwgZGF0YSkge1xuICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcbiAgQmFyQ2hhcnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgLy8gdGhpcy5MKys7XG4gIC8vIHRoaXMuaW5pdCgpO1xuXG59XG5cblN0YWNrZWRCYXJDaGFydC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEJhckNoYXJ0LnByb3RvdHlwZSk7XG5TdGFja2VkQmFyQ2hhcnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3RhY2tlZEJhckNoYXJ0O1xuXG5TdGFja2VkQmFyQ2hhcnQucHJvdG90eXBlLmluaXREYXRhID0gZnVuY3Rpb24oKSB7XG4gIENoYXJ0QmFzZS5wcm90b3R5cGUuaW5pdERhdGEuY2FsbCh0aGlzKTtcblxuICB0aGlzLnN0YWNrZWRDb2x1bW5zID0gdGhpcy5jb2x1bW5zLm1hcChjID0+IGMudmFsdWVzLm1hcChcbiAgICB2ID0+IDBcbiAgKSk7XG5cbiAgdGhpcy5zdGFja2VkQ29sdW1uc0FuaW1hdGVkID0gdGhpcy5jb2x1bW5zLm1hcChjID0+IGMudmFsdWVzLm1hcChcbiAgICB2ID0+IG5ldyBBbmltYXRlZFZhbHVlKDAsIFlfQU5JTUFUSU9OX1RJTUUpXG4gICkpO1xuXG4gIHRoaXMudXBkYXRlU3RhY2tlZENvbHVtbnMoKTtcbn1cblxuU3RhY2tlZEJhckNoYXJ0LnByb3RvdHlwZS5pbml0SW5mbyA9IGZ1bmN0aW9uKCkge1xuICBDaGFydEJhc2UucHJvdG90eXBlLmluaXRJbmZvLmFwcGx5KHRoaXMpO1xuICAvLyB0aGlzLmluZm8gPSBjcmVhdGVJbmZvKCk7XG4gIC8vIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gIC8vICAgdGhpcy5pbmZvLmFkZFJvdyh0aGlzLmNvbHVtbnNbaV0ubmFtZSwgMCwgdGhpcy5jb2x1bW5zW2ldLmNvbG9yKTtcbiAgLy8gfVxuICAvLyB0aGlzLmNoYXJ0Q29udGFpbmVyLmFwcGVuZCh0aGlzLmluZm8pO1xuICB0aGlzLmluZm8uYWRkUm93KCdBbGwnLCAwLCAnIzAwMDAwMCcpO1xufVxuXG5TdGFja2VkQmFyQ2hhcnQucHJvdG90eXBlLnVwZGF0ZVN0YWNrZWRDb2x1bW5zID0gZnVuY3Rpb24oKSB7XG4gIHZhciBzdW1zID0gZ2V0U3RhY2tlZEFycmF5U3VtcyhcbiAgICB0aGlzLmNvbHVtbnMubWFwKGMgPT4gKFxuICAgICAgKCFjLmlzT24pID8gYy52YWx1ZXMubWFwKHYgPT4gMCkgOiBjLnZhbHVlc1xuICAgICkpXG4gICk7XG5cbiAgdmFyIG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHN1bXMubGVuZ3RoOyBpKyspIHtcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHN1bXNbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgIHRoaXMuc3RhY2tlZENvbHVtbnNbaV1bal0gPSBzdW1zW2ldW2pdO1xuICAgICAgdGhpcy5zdGFja2VkQ29sdW1uc0FuaW1hdGVkW2ldW2pdLnNldChzdW1zW2ldW2pdLCBub3csIHRydWUpO1xuICAgIH1cbiAgfVxufVxuXG5TdGFja2VkQmFyQ2hhcnQucHJvdG90eXBlLmluaXRPeVByb3BzID0gZnVuY3Rpb24oKSB7XG4gIENoYXJ0QmFzZS5wcm90b3R5cGUuaW5pdE95UHJvcHMuYXBwbHkodGhpcyk7XG5cbiAgdGhpcy5ncmlkUHJldmlld01heFkgPSBuZXcgQW5pbWF0ZWRWYWx1ZSgwLCBZX0FOSU1BVElPTl9USU1FKTtcbiAgdGhpcy5ncmlkUHJldmlld01heFkuc2V0KHRoaXMuY2FsY3VsYXRlR3JpZFByZXZpZXdNYXhZKCksIHBlcmZvcm1hbmNlLm5vdygpLCB0cnVlKTtcbn1cblxuU3RhY2tlZEJhckNoYXJ0LnByb3RvdHlwZS5jYWxjdWxhdGVHcmlkUHJldmlld01heFkgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBhcnIgPSB0aGlzLnN0YWNrZWRDb2x1bW5zW3RoaXMuc3RhY2tlZENvbHVtbnMubGVuZ3RoLTFdO1xuICByZXR1cm4gZ2V0TWF4KGFycik7XG59O1xuXG5TdGFja2VkQmFyQ2hhcnQucHJvdG90eXBlLmluaXRCdXR0b25zID0gQ2hhcnRCYXNlLnByb3RvdHlwZS5pbml0QnV0dG9ucztcblxuU3RhY2tlZEJhckNoYXJ0LnByb3RvdHlwZS5idXR0b25DbGlja2VkID0gZnVuY3Rpb24obmFtZSwgaXNPbikge1xuICB2YXIgbm93ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHRoaXMuY29sdW1uc1tpXS5uYW1lID09PSBuYW1lKSB7XG4gICAgICB0aGlzLmNvbHVtbnNbaV0uaXNPbiA9IGlzT247XG4gICAgICBpZiAoaXNPbikgdGhpcy5pbmZvLmVuYWJsZVJvdyh0aGlzLmNvbHVtbnNbaV0ubmFtZSk7XG4gICAgICBlbHNlIHRoaXMuaW5mby5kaXNhYmxlUm93KHRoaXMuY29sdW1uc1tpXS5uYW1lKTtcbiAgICAgIHRoaXMudXBkYXRlU3RhY2tlZENvbHVtbnMoKTtcblxuICAgICAgaWYgKHRoaXMuY29sdW1ucy5maWx0ZXIoYyA9PiBjLmlzT24pLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgdGhpcy5pbmZvLmRpc2FibGVSb3coJ0FsbCcpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5pbmZvLmVuYWJsZVJvdygnQWxsJylcbiAgICAgIH1cblxuICAgICAgdGhpcy5ncmlkUHJldmlld01heFkuc2V0KE1hdGgubWF4KHRoaXMuY2FsY3VsYXRlR3JpZFByZXZpZXdNYXhZKCksIDApLCBub3csIHRydWUpO1xuICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9XG4gIH1cbn1cblxuU3RhY2tlZEJhckNoYXJ0LnByb3RvdHlwZS5jYWxjdWxhdGVWYWx1ZXNNYXhZID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhcnIgPSB0aGlzLnN0YWNrZWRDb2x1bW5zW3RoaXMuc3RhY2tlZENvbHVtbnMubGVuZ3RoLTFdXG4gIC5zbGljZSh0aGlzLnN0YXJ0SW5kLCB0aGlzLmVuZEluZCsxKTtcblxuICByZXR1cm4gZ2V0TWF4KGFycik7XG59XG5cblN0YWNrZWRCYXJDaGFydC5wcm90b3R5cGUuY2hlY2tSZWRyYXdDaGFydHNDb250ZW50ID0gZnVuY3Rpb24obm93KSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdGFja2VkQ29sdW1uc0FuaW1hdGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLnN0YWNrZWRDb2x1bW5zQW5pbWF0ZWRbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgIGlmICh0aGlzLnN0YWNrZWRDb2x1bW5zQW5pbWF0ZWRbaV1bal0ubmV4dFRpY2sobm93KSkge1xuICAgICAgICB0aGlzLm5lZWRSZWRyYXcgPSB0aGlzLm5lZWREcmF3UHJldmlldyA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmICh0aGlzLmdyaWRQcmV2aWV3TWF4WS5uZXh0VGljayhub3cpKSB0aGlzLm5lZWREcmF3UHJldmlldyA9IHRydWU7XG59XG5cblN0YWNrZWRCYXJDaGFydC5wcm90b3R5cGUuZHJhd0NoYXJ0Q29udGVudCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYmFyVyA9IE1hdGgucm91bmQodGhpcy5iYXJXaWR0aCp0aGlzLnJvdW5kKS90aGlzLnJvdW5kO1xuICB2YXIgc0kgPSBNYXRoLm1heCh0aGlzLnN0YXJ0SW5kIC0gdGhpcy5kcmF3SW5kT2Zmc2V0LCAwKTtcbiAgdmFyIGVJID0gTWF0aC5taW4odGhpcy5lbmRJbmQgKyB0aGlzLmRyYXdJbmRPZmZzZXQsIHRoaXMuTCk7XG5cbiAgdmFyIFggPSBbXTtcbiAgZm9yICh2YXIgaSA9IHNJOyBpIDwgZUkrMTsgaSsrKSB7XG4gICAgWC5wdXNoKGdldFNjcmVlblhCeUluZChpLCBiYXJXLCB0aGlzLm9mZnNldFgpKTtcbiAgfVxuXG4gIHZhciBZQ29vcmRzID0gdGhpcy5zdGFja2VkQ29sdW1uc0FuaW1hdGVkLm1hcChjID0+IGMuc2xpY2Uoc0ksIGVJKzEpKVxuICAgIC5tYXAoYyA9PiBnZXRZQ29vcmRzKHRoaXMuYm90dG9tWSwgYy5tYXAodiA9PiB2LnZhbHVlKSwgdGhpcy5ncmlkTWF4WS52YWx1ZSkpO1xuICBZQ29vcmRzLnNwbGljZSgwLCAwLCBZQ29vcmRzWzFdLm1hcChjID0+IHRoaXMuYm90dG9tWSkpO1xuXG4gIHRoaXMuY3R4Lmdsb2JhbEFscGhhID0gKHRoaXMuc2VsZWN0ZWRJbmQgPiAtMSkgPyAwLjYgOiAxOyAvLyBGSVhNRSBBbHBoYSB0byBjb25zdFxuXG4gIGZvciAodmFyIGkgPSB0aGlzLmNvbHVtbnMubGVuZ3RoLTE7IGkgPj0gMDsgaS0tKSB7XG4gICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IFgubGVuZ3RoOyBqKyspIHtcbiAgICAgIGlmIChqICE9PSB0aGlzLnNlbGVjdGVkSW5kIC0gc0kpIHtcbiAgICAgICAgdGhpcy5jdHgucmVjdChYW2pdLCBZQ29vcmRzW2krMV1bal0sIGJhclcsIFlDb29yZHNbaV1bal0gLSBZQ29vcmRzW2krMV1bal0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29sdW1uc1tpXS5jb2xvcjtcbiAgICB0aGlzLmN0eC5maWxsKCk7XG4gIH1cblxuICBpZiAodGhpcy5zZWxlY3RlZEluZCA+IC0xKSB7XG4gICAgdGhpcy5kcmF3U2VsZWN0ZWRDaGFydENvbnRlbnQoKTtcbiAgfVxuXG59XG5cblN0YWNrZWRCYXJDaGFydC5wcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24oeCwgeSkge1xuICB0aGlzLnNlbGVjdGVkU2NyZWVuWCA9IHg7XG4gIHRoaXMuc2VsZWN0ZWRTY3JlZW5ZID0geTtcbiAgdGhpcy5zZWxlY3RlZEluZCA9IHRoaXMuZ2V0SW5kQnlTY3JlZW5YKHgpO1xuICB0aGlzLmluZm8uc2V0VGl0bGUoY3JlYXRlTGFiZWxGcm9tRGF0ZSh0aGlzLmRhdGVDb2x1bW5bdGhpcy5zZWxlY3RlZEluZF0sIHRydWUpKTtcbiAgdGhpcy5jb2x1bW5zLmZpbHRlcihjID0+IGMuaXNPbikuZm9yRWFjaChjID0+IHtcbiAgICB0aGlzLmluZm8uc2V0Um93VmFsdWUoYy5uYW1lLCBjLnZhbHVlc1t0aGlzLnNlbGVjdGVkSW5kXSk7XG4gICAgdGhpcy5pbmZvLnNldFJvd1ZhbHVlKCdBbGwnLCB0aGlzLnN0YWNrZWRDb2x1bW5zW3RoaXMuc3RhY2tlZENvbHVtbnMubGVuZ3RoLTFdW3RoaXMuc2VsZWN0ZWRJbmRdKTtcbiAgfSk7XG59XG5cblN0YWNrZWRCYXJDaGFydC5wcm90b3R5cGUuZHJhd1NlbGVjdGVkQ2hhcnRDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgYmFyVyA9IE1hdGgucm91bmQodGhpcy5iYXJXaWR0aCp0aGlzLnJvdW5kKS90aGlzLnJvdW5kO1xuICB2YXIgc2VsZWN0ZWRJbmRYID0gdGhpcy5nZXRTY3JlZW5YQnlJbmQodGhpcy5zZWxlY3RlZEluZCk7XG5cbiAgdGhpcy5jdHguZ2xvYmFsQWxwaGEgPSAxO1xuXG4gIGZvciAodmFyIGkgPSB0aGlzLmNvbHVtbnMubGVuZ3RoLTE7IGkgPj0gMDsgaS0tKSB7XG4gICAgdmFyIHkgPSBNYXRoLmZsb29yKGdldFNjcmVlblkodGhpcy5ib3R0b21ZLCB0aGlzLnN0YWNrZWRDb2x1bW5zQW5pbWF0ZWRbaV1bdGhpcy5zZWxlY3RlZEluZF0udmFsdWUsIHRoaXMuZ3JpZE1heFkudmFsdWUpKVxuICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29sdW1uc1tpXS5jb2xvcjtcbiAgICB0aGlzLmN0eC5yZWN0KHNlbGVjdGVkSW5kWCwgeSwgYmFyVywgdGhpcy5ib3R0b21ZIC0geSk7XG4gICAgdGhpcy5jdHguZmlsbCgpO1xuICB9XG59XG5cblN0YWNrZWRCYXJDaGFydC5wcm90b3R5cGUuZHJhd1ByZXZpZXcgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5jbGVhckRyYXdQcmV2aWV3KCk7XG5cbiAgdmFyIFggPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm94TGFiZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgWC5wdXNoKGdldFNjcmVlblhCeUluZChpLCB0aGlzLnByZXZpZXdDaGFydFN0ZXAsIHRoaXMucHJldmlld0NoYXJ0WCkpO1xuICB9XG4gIHZhciBiYXJXaWR0aCA9IFhbMV0gLSBYWzBdO1xuXG4gIHZhciBZQ29vcmRzID0gdGhpcy5zdGFja2VkQ29sdW1uc0FuaW1hdGVkLm1hcChcbiAgICBjID0+IGdldFlDb29yZHModGhpcy5wcmV2aWV3Q2hhcnRIZWlnaHQsIGMubWFwKHYgPT4gdi52YWx1ZSksIHRoaXMuZ3JpZFByZXZpZXdNYXhZLnZhbHVlKS5tYXAoeSA9PiB0aGlzLnByZXZpZXdDaGFydFkgKyB5KVxuICApO1xuICBZQ29vcmRzLnNwbGljZSgwLCAwLCBZQ29vcmRzWzFdLm1hcChjID0+IHRoaXMuaCkpO1xuXG4gIGZvciAodmFyIGkgPSB0aGlzLmNvbHVtbnMubGVuZ3RoLTE7IGkgPj0gMDsgaS0tKSB7XG5cbiAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICB0aGlzLmN0eC5nbG9iYWxBbHBoYSA9IDE7IC8vIEZJWE1FIEFscGhhIHRvIGNvbnN0XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IFgubGVuZ3RoOyBqKyspIHtcbiAgICAgIHRoaXMuY3R4LnJlY3QoWFtqXSwgWUNvb3Jkc1tpKzFdW2pdLCBiYXJXaWR0aCwgWUNvb3Jkc1tpXVtqXSAtIFlDb29yZHNbaSsxXVtqXSk7XG4gICAgfVxuXG4gICAgdGhpcy5jdHguZmlsbFN0eWxlID0gdGhpcy5jb2x1bW5zW2ldLmNvbG9yO1xuICAgIHRoaXMuY3R4LmZpbGwoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgZ2V0U2NyZWVuWEJ5SW5kLCBnZXRZQ29vcmRzIH0gZnJvbSAnLi9jaGFydCc7XG5pbXBvcnQgeyBMaW5lQ2hhcnQgfSBmcm9tICcuL2xpbmUtY2hhcnQnO1xuaW1wb3J0IHsgQW5pbWF0ZWRWYWx1ZSwgQW5pbWF0ZWRBcnJheSwgbWFpbiB9IGZyb20gJy4uL2FuaW1hdGlvbnMnO1xuaW1wb3J0IHtcbiAgZ2V0TWF4LFxuICBkZWJvdW5jZSwgZ2V0R3JpZFZhbHVlc0J5TWF4LFxuICBnZXRTdGVwRm9yR3JpZFZhbHVlcyxcbiAgZ2V0RGF0YUNvbHVtbkJ5TmFtZVxufSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQge1xuICBDSEFSVF9HUklEX1BBRERJTkcsXG4gIENIQVJUX0hFQURFUl9IRUlHSFQsXG4gIENIQVJUX0hFQURFUl9NQVJHSU5fQk9UVE9NLFxuICBDSEFSVF9NQVhfV0lEVEgsXG4gIENIQVJUX01JTl9IRUlHSFQsXG4gIENIQVJUX01BWF9IRUlHSFQsXG4gIE9ZX0xBQkVMU19NQVJHSU5fVE9QLFxuICBZX0FOSU1BVElPTl9USU1FLFxufSBmcm9tICcuLi9jb25zdHMnO1xuXG5leHBvcnQgZnVuY3Rpb24gdHdvQXhlc0xpbmVDaGFydChjb250YWluZXIsIGRhdGEsIG5hbWUpIHtcbiAgdmFyIGNoYXJ0ID0gbmV3IFR3b0F4ZXNMaW5lQ2hhcnQoY29udGFpbmVyLCBkYXRhLCBuYW1lKTtcbiAgcmV0dXJuIGNoYXJ0O1xufVxuXG5mdW5jdGlvbiBUd29BeGVzTGluZUNoYXJ0KGNvbnRhaW5lciwgZGF0YSkge1xuICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcbiAgTGluZUNoYXJ0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIC8vIHRoaXMuaW5pdCgpO1xufVxuXG5Ud29BeGVzTGluZUNoYXJ0LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoTGluZUNoYXJ0LnByb3RvdHlwZSk7XG5Ud29BeGVzTGluZUNoYXJ0LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFR3b0F4ZXNMaW5lQ2hhcnQ7XG5cblR3b0F4ZXNMaW5lQ2hhcnQucHJvdG90eXBlLmluaXRPeVByb3BzID0gZnVuY3Rpb24oKSB7XG4gIExpbmVDaGFydC5wcm90b3R5cGUuaW5pdE95UHJvcHMuYXBwbHkodGhpcyk7XG5cbiAgdGhpcy5ncmlkU3RlcFlSaWdodCA9IDA7XG4gIHRoaXMuZ3JpZE1heFlSaWdodCA9IG5ldyBBbmltYXRlZFZhbHVlKDAsIFlfQU5JTUFUSU9OX1RJTUUpO1xuICB0aGlzLmdyaWRQcmV2aWV3TWF4WVJpZ2h0ID0gbmV3IEFuaW1hdGVkVmFsdWUoMCwgWV9BTklNQVRJT05fVElNRSk7XG4gIHRoaXMuZ3JpZFByZXZpZXdNYXhZUmlnaHQuc2V0KGdldE1heCh0aGlzLmNvbHVtbnNbMV0udmFsdWVzKSwgcGVyZm9ybWFuY2Uubm93KCksIHRydWUpO1xuXG4gIHRoaXMub2xkT3lMYWJlbHMuYWxwaGFSaWdodCA9IG5ldyBBbmltYXRlZFZhbHVlKDAsIFlfQU5JTUFUSU9OX1RJTUUpO1xuICB0aGlzLm9sZE95TGFiZWxzLmxhYmVsc1JpZ2h0ID0gWzAsIDEsIDIsIDMsIDQsIDUsIDZdO1xuXG4gIHRoaXMubmV3T3lMYWJlbHMuYWxwaGFSaWdodCA9IG5ldyBBbmltYXRlZFZhbHVlKDAsIFlfQU5JTUFUSU9OX1RJTUUpO1xuICB0aGlzLm5ld095TGFiZWxzLmxhYmVsc1JpZ2h0ID0gWzAsIDEsIDIsIDMsIDQsIDUsIDZdO1xufVxuXG5Ud29BeGVzTGluZUNoYXJ0LnByb3RvdHlwZS5jaGVja1JlZHJhd0NoYXJ0c0NvbnRlbnQgPSBmdW5jdGlvbihub3cpIHtcbiAgTGluZUNoYXJ0LnByb3RvdHlwZS5jaGVja1JlZHJhd0NoYXJ0c0NvbnRlbnQuY2FsbCh0aGlzLCBub3cpO1xuXG4gIGlmICh0aGlzLmdyaWRQcmV2aWV3TWF4WVJpZ2h0Lm5leHRUaWNrKG5vdykpIHRoaXMubmVlZERyYXdQcmV2aWV3ID0gdHJ1ZTtcbn1cblxuVHdvQXhlc0xpbmVDaGFydC5wcm90b3R5cGUuZHJhd1plcm9MaW5lID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgdGhpcy5jdHguZ2xvYmFsQWxwaGEgPSAxO1xuXG4gIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29sdW1uc1swXS5jb2xvcjtcbiAgdGhpcy5jdHguZmlsbFRleHQoMCwgQ0hBUlRfR1JJRF9QQURESU5HLCB0aGlzLmJvdHRvbVkgKyBPWV9MQUJFTFNfTUFSR0lOX1RPUCk7XG4gIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29sdW1uc1sxXS5jb2xvcjtcbiAgdGhpcy5jdHguZmlsbFRleHQoXG4gICAgMCxcbiAgICBDSEFSVF9HUklEX1BBRERJTkcgKyB0aGlzLmdyaWRXaWR0aCAtIHRoaXMuY3R4Lm1lYXN1cmVUZXh0KDApLndpZHRoLFxuICAgIHRoaXMuYm90dG9tWSArIE9ZX0xBQkVMU19NQVJHSU5fVE9QXG4gICk7XG4gIHRoaXMuY3R4Lm1vdmVUbyhDSEFSVF9HUklEX1BBRERJTkcsIHRoaXMuYm90dG9tWSArIDAuNSk7XG4gIHRoaXMuY3R4LmxpbmVUbyh0aGlzLncgLSBDSEFSVF9HUklEX1BBRERJTkcsIHRoaXMuYm90dG9tWSArIDAuNSk7XG4gIHRoaXMuY3R4LnN0cm9rZSgpO1xufTtcblxuVHdvQXhlc0xpbmVDaGFydC5wcm90b3R5cGUuZHJhd095TGFiZWxzID0gZnVuY3Rpb24ob3lMYWJlbHMpIHtcbiAgLy8gaWYgKG95TGFiZWxzLmFscGhhLnZhbHVlIDw9IDAgJiYgb3lMYWJlbHMuYWxwaGFSaWdodC52YWx1ZSA8PSAwKSByZXR1cm47XG4gIGlmIChveUxhYmVscy5hbHBoYS52YWx1ZSA+IDApIHtcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbHVtbnNbMF0uY29sb3I7XG4gICAgdGhpcy5jdHguZ2xvYmFsQWxwaGEgPSBveUxhYmVscy5hbHBoYS52YWx1ZTtcbiAgICB2YXIgb2Zmc2V0ID0gTWF0aC5yb3VuZChcbiAgICAgIG95TGFiZWxzLmxhYmVscy5sZW5ndGggKiB0aGlzLmdyaWRMaW5lc0hlaWdodCArIG95TGFiZWxzLm9mZnNldFkqKDEtb3lMYWJlbHMuYWxwaGEudmFsdWUpXG4gICAgKTtcblxuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgb3lMYWJlbHMubGFiZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgeSA9IG9mZnNldCAtIGkgKiB0aGlzLmdyaWRMaW5lc0hlaWdodDtcblxuICAgICAgdGhpcy5jdHguZmlsbFRleHQoXG4gICAgICAgIG95TGFiZWxzLmxhYmVsc1tpXSxcbiAgICAgICAgQ0hBUlRfR1JJRF9QQURESU5HLFxuICAgICAgICB5ICsgT1lfTEFCRUxTX01BUkdJTl9UT1BcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gIHRoaXMuY3R4Lmdsb2JhbEFscGhhID0gMTtcbiAgdGhpcy5jdHgubGluZVdpZHRoID0gMTtcbiAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmdyaWRMaW5lc0NvbG9yO1xuICBmb3IgKHZhciBpID0gMTsgaSA8IDY7IGkrKykge1xuICAgIHZhciB5ID0gKG95TGFiZWxzLmxhYmVscy5sZW5ndGggLSBpKSAqIHRoaXMuZ3JpZExpbmVzSGVpZ2h0O1xuXG4gICAgeSAtPSAwLjU7XG4gICAgdGhpcy5jdHgubW92ZVRvKENIQVJUX0dSSURfUEFERElORywgeSk7XG4gICAgdGhpcy5jdHgubGluZVRvKHRoaXMudyAtIENIQVJUX0dSSURfUEFERElORywgeSk7XG4gIH1cbiAgdGhpcy5jdHguc3Ryb2tlKCk7XG5cbiAgaWYgKG95TGFiZWxzLmFscGhhUmlnaHQudmFsdWUgPiAwKSB7XG4gICAgdGhpcy5jdHguZmlsbFN0eWxlID0gdGhpcy5jb2x1bW5zWzFdLmNvbG9yO1xuICAgIHRoaXMuY3R4Lmdsb2JhbEFscGhhID0gb3lMYWJlbHMuYWxwaGFSaWdodC52YWx1ZTtcbiAgICB2YXIgb2Zmc2V0ID0gTWF0aC5yb3VuZChcbiAgICAgIG95TGFiZWxzLmxhYmVsc1JpZ2h0Lmxlbmd0aCAqIHRoaXMuZ3JpZExpbmVzSGVpZ2h0ICsgb3lMYWJlbHMub2Zmc2V0WSooMS1veUxhYmVscy5hbHBoYVJpZ2h0LnZhbHVlKVxuICAgICk7XG5cbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IG95TGFiZWxzLmxhYmVsc1JpZ2h0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgeSA9IG9mZnNldCAtIGkgKiB0aGlzLmdyaWRMaW5lc0hlaWdodDtcblxuICAgICAgdGhpcy5jdHguZmlsbFRleHQoXG4gICAgICAgIG95TGFiZWxzLmxhYmVsc1JpZ2h0W2ldLFxuICAgICAgICBDSEFSVF9HUklEX1BBRERJTkcgKyB0aGlzLmdyaWRXaWR0aCAtIHRoaXMuY3R4Lm1lYXN1cmVUZXh0KG95TGFiZWxzLmxhYmVsc1JpZ2h0W2ldKS53aWR0aCxcbiAgICAgICAgeSArIE9ZX0xBQkVMU19NQVJHSU5fVE9QXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG5Ud29BeGVzTGluZUNoYXJ0LnByb3RvdHlwZS5jaGVja1JlZHJhd0JnID0gZnVuY3Rpb24obm93KSB7XG4gIExpbmVDaGFydC5wcm90b3R5cGUuY2hlY2tSZWRyYXdCZy5jYWxsKHRoaXMsIG5vdyk7XG5cbiAgaWYgKHRoaXMuZ3JpZE1heFlSaWdodC5uZXh0VGljayhub3cpKSB0aGlzLm5lZWRSZWRyYXcgPSB0cnVlO1xuICBpZiAodGhpcy5vbGRPeUxhYmVscy5hbHBoYVJpZ2h0Lm5leHRUaWNrKG5vdykpIHRoaXMubmVlZFJlZHJhdyA9IHRydWU7XG4gIGlmICh0aGlzLm5ld095TGFiZWxzLmFscGhhUmlnaHQubmV4dFRpY2sobm93KSkgdGhpcy5uZWVkUmVkcmF3ID0gdHJ1ZTtcbn1cblxuVHdvQXhlc0xpbmVDaGFydC5wcm90b3R5cGUudXBkYXRlWSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIG1heFkgPSAodGhpcy5jb2x1bW5zWzBdLmlzT24pID8gZ2V0TWF4KHRoaXMuY29sdW1uc1swXS52YWx1ZXMuc2xpY2UodGhpcy5zdGFydEluZCwgdGhpcy5lbmRJbmQrMSkpIDogMDtcbiAgdmFyIG1heFlSaWdodCA9ICh0aGlzLmNvbHVtbnNbMV0uaXNPbikgPyBnZXRNYXgodGhpcy5jb2x1bW5zWzFdLnZhbHVlcy5zbGljZSh0aGlzLnN0YXJ0SW5kLCB0aGlzLmVuZEluZCsxKSkgOiAwO1xuICB2YXIgbmV3R3JpZFN0ZXBZID0gZ2V0U3RlcEZvckdyaWRWYWx1ZXMobWF4WSk7XG4gIHZhciBuZXdHcmlkU3RlcFlSaWdodCA9IGdldFN0ZXBGb3JHcmlkVmFsdWVzKG1heFlSaWdodCk7XG5cbiAgaWYgKHRoaXMuZ3JpZFN0ZXBZICE9PSBuZXdHcmlkU3RlcFkpIHtcbiAgICB2YXIgbm93ID0gcGVyZm9ybWFuY2Uubm93KCk7XG5cbiAgICB0aGlzLmdyaWRNYXhZLnNldChuZXdHcmlkU3RlcFkqNiwgbm93LCB0cnVlKTtcblxuICAgIGlmIChcbiAgICAgICh0aGlzLm9sZE95TGFiZWxzLm9mZnNldFkgPiAwICYmIHRoaXMuZ3JpZFN0ZXBZID4gbmV3R3JpZFN0ZXBZKSB8fFxuICAgICAgKHRoaXMub2xkT3lMYWJlbHMub2Zmc2V0WSA8IDAgJiYgdGhpcy5ncmlkU3RlcFkgPCBuZXdHcmlkU3RlcFkpXG4gICAgKSB7XG4gICAgICB0aGlzLm9sZE95TGFiZWxzLm9mZnNldFkgKj0gLTE7XG4gICAgICB0aGlzLm5ld095TGFiZWxzLm9mZnNldFkgKj0gLTE7XG4gICAgfVxuXG4gICAgdGhpcy5ncmlkU3RlcFkgPSBuZXdHcmlkU3RlcFk7XG5cbiAgICB0aGlzLm9sZE95TGFiZWxzLmFscGhhLnNldCgxKTtcbiAgICB0aGlzLm9sZE95TGFiZWxzLmFscGhhLnNldCgwLCBub3csIHRydWUpO1xuICAgIHRoaXMubmV3T3lMYWJlbHMuYWxwaGEuc2V0KDApO1xuICAgIHRoaXMubmV3T3lMYWJlbHMuYWxwaGEuc2V0KDEsIG5vdywgdHJ1ZSk7XG5cbiAgICB0aGlzLm9sZE95TGFiZWxzLmxhYmVscyA9IHRoaXMubmV3T3lMYWJlbHMubGFiZWxzO1xuICAgIHRoaXMubmV3T3lMYWJlbHMubGFiZWxzID0gKG1heFkgIT09IDApID8gWzAsIDEsIDIsIDMsIDQsIDVdLm1hcChuID0+IG4qbmV3R3JpZFN0ZXBZKSA6IDA7XG4gIH1cblxuICBpZiAodGhpcy5ncmlkU3RlcFlSaWdodCAhPT0gbmV3R3JpZFN0ZXBZUmlnaHQpIHtcbiAgICB2YXIgbm93ID0gcGVyZm9ybWFuY2Uubm93KCk7XG5cbiAgICB0aGlzLmdyaWRNYXhZUmlnaHQuc2V0KG5ld0dyaWRTdGVwWVJpZ2h0KjYsIG5vdywgdHJ1ZSk7XG4gICAgdGhpcy5ncmlkU3RlcFlSaWdodCA9IG5ld0dyaWRTdGVwWVJpZ2h0O1xuXG4gICAgdGhpcy5vbGRPeUxhYmVscy5hbHBoYVJpZ2h0LnNldCgxKTtcbiAgICB0aGlzLm9sZE95TGFiZWxzLmFscGhhUmlnaHQuc2V0KDAsIG5vdywgdHJ1ZSk7XG4gICAgdGhpcy5uZXdPeUxhYmVscy5hbHBoYVJpZ2h0LnNldCgwKTtcbiAgICB0aGlzLm5ld095TGFiZWxzLmFscGhhUmlnaHQuc2V0KDEsIG5vdywgdHJ1ZSk7XG5cbiAgICB0aGlzLm9sZE95TGFiZWxzLmxhYmVsc1JpZ2h0ID0gdGhpcy5uZXdPeUxhYmVscy5sYWJlbHNSaWdodDtcbiAgICB0aGlzLm5ld095TGFiZWxzLmxhYmVsc1JpZ2h0ID0gKG1heFlSaWdodCAhPT0gMCkgPyBbMCwgMSwgMiwgMywgNCwgNV0ubWFwKG4gPT4gbipuZXdHcmlkU3RlcFlSaWdodCkgOiBbMF07XG4gIH1cbn1cblxuVHdvQXhlc0xpbmVDaGFydC5wcm90b3R5cGUuZ2V0R3JpZE1heEZvckNvbHVtbiA9IGZ1bmN0aW9uKGNvbHVtbikge1xuICByZXR1cm4gKHRoaXMuY29sdW1uc1swXS5pZCA9PT0gY29sdW1uLmlkKSA/IHRoaXMuZ3JpZE1heFkudmFsdWUgOiB0aGlzLmdyaWRNYXhZUmlnaHQudmFsdWU7XG59XG5cblR3b0F4ZXNMaW5lQ2hhcnQucHJvdG90eXBlLmdldEdyaWRNYXhGb3JDb2x1bW5QcmV2aWV3ID0gZnVuY3Rpb24oY29sdW1uKSB7XG4gIHJldHVybiAodGhpcy5jb2x1bW5zWzBdLmlkID09PSBjb2x1bW4uaWQpID8gdGhpcy5ncmlkUHJldmlld01heFkudmFsdWUgOiB0aGlzLmdyaWRQcmV2aWV3TWF4WVJpZ2h0LnZhbHVlO1xufVxuIiwiZXhwb3J0IGNvbnN0IFBSRVZJRVdfSEVJR0hUID0gNDQ7XG5leHBvcnQgY29uc3QgUFJFVklFV19JTk5FUl9NQVJHSU5fVE9QID0gMjtcbmV4cG9ydCBjb25zdCBQUkVWSUVXX0lOSVRfVyA9IDAuMjtcblxuZXhwb3J0IGNvbnN0IFBSRVZJRVdfQ0hBUlRfSEVJR0hUID0gNDA7XG5leHBvcnQgY29uc3QgUFJFVklFV19DSEFSVF9NQVJHSU4gPSAzMDtcblxuZXhwb3J0IGNvbnN0IENIQVJUX0dSSURfUEFERElORyA9IDEwO1xuZXhwb3J0IGNvbnN0IEdSSURfTElORVNfQ09VTlQgPSA2O1xuZXhwb3J0IGNvbnN0IE9YTEFCRUxTX0hFSUdIVCA9IDMwO1xuZXhwb3J0IGNvbnN0IE9YX0xBQkVMU19BTklNQVRJT05fRFVSQVRJT04gPSAwLjI1O1xuXG5leHBvcnQgY29uc3QgQ0hBUlRfSEVBREVSX0hFSUdIVCA9IDIwO1xuZXhwb3J0IGNvbnN0IENIQVJUX0hFQURFUl9NQVJHSU5fQk9UVE9NID0gMjA7XG5cbmV4cG9ydCBjb25zdCBDSEFSVF9NQVhfV0lEVEggPSA1MDA7XG5leHBvcnQgY29uc3QgQ0hBUlRfTUlOX0hFSUdIVCA9IDE1MCArIENIQVJUX0hFQURFUl9IRUlHSFQgKyBDSEFSVF9IRUFERVJfTUFSR0lOX0JPVFRPTSArIDgwO1xuZXhwb3J0IGNvbnN0IENIQVJUX01BWF9IRUlHSFQgPSA0MDAgKyBDSEFSVF9IRUFERVJfSEVJR0hUICsgQ0hBUlRfSEVBREVSX01BUkdJTl9CT1RUT00gKyA4MDtcblxuZXhwb3J0IGNvbnN0IFlfQU5JTUFUSU9OX1RJTUUgPSAuMztcbmV4cG9ydCBjb25zdCBPWV9MQUJFTFNfTUFSR0lOX1RPUCA9IC01O1xuXG5leHBvcnQgY29uc3QgQ0hBUlRfREFZX1RIRU1FID0ge1xuICBncmlkTGluZXNDb2xvcjogJyMxODJEM0IxQScsXG4gIGdyaWRUZXh0c0NvbG9yOiAnIzhFOEU5MycsXG4gIGNoYXJ0VGl0bGVDb2xvcjogJyMwMDAwMDAnLFxuICBpbmZvQmFja2dyb3VuZENvbG9yOiAnI0ZGRkZGRicsXG4gIGluZm9UZXh0Q29sb3I6ICcjMDAwMDAwJyxcbn07XG5cbmV4cG9ydCBjb25zdCBDSEFSVF9OSUdIVF9USEVNRSA9IHtcbiAgZ3JpZExpbmVzQ29sb3I6ICcjRkZGRkZGMUEnLFxuICBncmlkVGV4dHNDb2xvcjogJyNBM0IxQzI5OScsXG4gIGNoYXJ0VGl0bGVDb2xvcjogJyNGRkZGRkYnLFxuICBpbmZvQmFja2dyb3VuZENvbG9yOiAnIzI0MkYzRScsXG4gIGluZm9UZXh0Q29sb3I6ICcjRkZGRkZGJyxcbn07XG5cbmV4cG9ydCBjb25zdCBQUkVWSUVXX0RBWV9USEVNRSA9IHtcbiAgcHJldmlld01hc2tDb2xvcjogJyNFMkVFRjknLFxuICBwcmV2aWV3TWFza0FscGhhOiAuNixcbiAgcHJldmlld0JvcmRlckNvbG9yOiAnI0MwRDFFMScsXG4gIHByZXZpZXdDb3JuZXJzRmlsbENvbG9yOiAnI0ZGRkZGRidcbn07XG5cbmV4cG9ydCBjb25zdCBQUkVWSUVXX05JR0hUX1RIRU1FID0ge1xuICBwcmV2aWV3TWFza0NvbG9yOiAnIzMwNDI1OScsXG4gIHByZXZpZXdNYXNrQWxwaGE6IC42LFxuICBwcmV2aWV3Qm9yZGVyQ29sb3I6ICcjNTY2MjZEJyxcbiAgcHJldmlld0Nvcm5lcnNGaWxsQ29sb3I6ICcjMjQyRjNFJ1xufTtcbiIsImltcG9ydCBjaGFydF9kYXRhMSBmcm9tICcuLi9kYXRhL2NoYXJ0MS5qc29uJztcbmltcG9ydCBjaGFydF9kYXRhMiBmcm9tICcuLi9kYXRhL2NoYXJ0Mi5qc29uJztcbmltcG9ydCBjaGFydF9kYXRhMyBmcm9tICcuLi9kYXRhL2NoYXJ0My5qc29uJztcbmltcG9ydCBjaGFydF9kYXRhNCBmcm9tICcuLi9kYXRhL2NoYXJ0NC5qc29uJztcbmltcG9ydCBjaGFydF9kYXRhNSBmcm9tICcuLi9kYXRhL2NoYXJ0NS5qc29uJztcbmltcG9ydCBjaGFydF9kYXRhX29sZF9jb250ZXN0IGZyb20gJy4uL2RhdGEvY2hhcnRfZGF0YS5qc29uJztcblxuLy8gaW1wb3J0IHsgY3JlYXRlQ2hhcnQgfSBmcm9tICcuL2NoYXJ0cy9jaGFydCc7XG5pbXBvcnQgeyBsaW5lQ2hhcnQgfSBmcm9tICcuL2NoYXJ0cy9saW5lLWNoYXJ0JztcbmltcG9ydCB7IHR3b0F4ZXNMaW5lQ2hhcnQgfSBmcm9tICcuL2NoYXJ0cy90d28tYXhlcy1saW5lLWNoYXJ0JztcbmltcG9ydCB7IHN0YWNrZWRCYXJDaGFydCB9IGZyb20gJy4vY2hhcnRzL3N0YWNrZWQtYmFyLWNoYXJ0JztcbmltcG9ydCB7IGJhckNoYXJ0IH0gZnJvbSAnLi9jaGFydHMvYmFyLWNoYXJ0JztcbmltcG9ydCB7IHBlcmNlbnRhZ2VTdGFja2VkQXJlYUNoYXJ0IH0gZnJvbSAnLi9jaGFydHMvc3RhY2tlZC1hcmVhLWNoYXJ0JztcblxuZnVuY3Rpb24gbWFpbigpIHtcbiAgdmFyIGFwcENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAtY29udGFpbmVyJyk7XG5cbiAgdmFyIGNoYXJ0cyA9IFtdO1xuXG4gIC8vIHRlc3RDYW52YXMoKTtcblxuXG4gIC8vIGNvbnNvbGUubG9nKGNoYXJ0X2RhdGFfb2xkX2NvbnRlc3QpO1xuXG4gIC8vIGNoYXJ0cy5wdXNoKGxpbmVDaGFydChhcHBDb250YWluZXIsIGNoYXJ0X2RhdGFfb2xkX2NvbnRlc3RbMF0sICdMaW5lIGNoYXJ0JykpO1xuICBjaGFydHMucHVzaChsaW5lQ2hhcnQoYXBwQ29udGFpbmVyLCBjaGFydF9kYXRhMSwgJ0xpbmUgY2hhcnQnKSk7XG4gIGNoYXJ0cy5wdXNoKHR3b0F4ZXNMaW5lQ2hhcnQoYXBwQ29udGFpbmVyLCBjaGFydF9kYXRhMiwgJ1R3byBheGVzIGxpbmUgY2hhcnQnKSk7XG4gIGNoYXJ0cy5wdXNoKHN0YWNrZWRCYXJDaGFydChhcHBDb250YWluZXIsIGNoYXJ0X2RhdGEzLCAnU3RhY2tlZCBiYXIgY2hhcnQnKSk7XG4gIGNoYXJ0cy5wdXNoKGJhckNoYXJ0KGFwcENvbnRhaW5lciwgY2hhcnRfZGF0YTQsICdCYXIgY2hhcnQnKSk7XG4gIGNoYXJ0cy5wdXNoKHBlcmNlbnRhZ2VTdGFja2VkQXJlYUNoYXJ0KGFwcENvbnRhaW5lciwgY2hhcnRfZGF0YTUsICdTdGFja2VkIGFyZWEgY2hhcnQnKSk7XG5cbiAgdmFyIGlzRGF5TW9kZSA9IHRydWU7XG4gIHZhciBidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kZScpO1xuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICBpc0RheU1vZGUgPSAhaXNEYXlNb2RlO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoYXJ0c1tpXS5zd2l0Y2hNb2RlKGlzRGF5TW9kZSk7XG4gICAgfVxuXG4gICAgaWYgKGlzRGF5TW9kZSkge1xuICAgICAgYnV0dG9uLmlubmVySFRNTCA9ICdTd2l0Y2ggdG8gTmlnaHQgTW9kZSc7XG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ25pZ2h0LXRoZW1lJyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgYnV0dG9uLmlubmVySFRNTCA9ICdTd2l0Y2ggdG8gRGF5IE1vZGUnO1xuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCduaWdodC10aGVtZScpO1xuICAgIH1cblxuICB9KTtcblxuICAvLyB0ZXN0Q2FudmFzKCk7XG59XG5cblxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICBtYWluKCk7XG4gIC8vIHRlc3RDYW52YXMoKTtcbiAgLy8gdGVzdCgpO1xufVxuXG5mdW5jdGlvbiB0ZXN0KCkge1xuXG59XG5cbmZ1bmN0aW9uIHRlc3RDYW52YXMoKSB7XG4gIHZhciBzaXplID0gNDAwO1xuICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gIGNhbnZhcy53aWR0aCA9IHNpemU7XG4gIGNhbnZhcy5oZWlnaHQgPSBzaXplO1xuICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgZnVuY3Rpb24gZHJhdygpIHtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKSB7XG4gICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIHNpemUsIHNpemUpXG5cbiAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc2l6ZSAtIHNpemUvMik7XG4gICAgICB2YXIgeSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNpemUgLSBzaXplLzIpO1xuXG4gICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI0ZGMDAwMCc7XG4gICAgICBjdHgucmVjdCh4LCB5LCAxMDAsIDEwMClcbiAgICAgIGN0eC5zdHJva2UoKTtcblxuICAgICAgZHJhdygpO1xuICAgIH0pO1xuICB9XG4gIGRyYXcoKTtcblxuICBkb2N1bWVudC5ib2R5LmFwcGVuZChjYW52YXMpO1xufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUxhYmVsRnJvbURhdGUoZGF0ZSwgd2l0aFllYXI9ZmFsc2UpIHtcbiAgY29uc3QgbW9udGhzID0gWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsICdPY3QnLCAnTm92JywgJ0RlYyddO1xuICB2YXIgbCA9IG5ldyBEYXRlKGRhdGUpLmdldERhdGUoKSArICcgJyArIG1vbnRoc1tuZXcgRGF0ZShkYXRlKS5nZXRNb250aCgpXTtcbiAgaWYgKHdpdGhZZWFyKSB7XG4gICAgbCA9IGwgKyAnICcgKyBuZXcgRGF0ZShkYXRlKS5nZXRGdWxsWWVhcigpO1xuICB9XG4gIHJldHVybiBsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWF0cml4TWluKG0pIHtcbiAgcmV0dXJuIE1hdGgubWluLmFwcGx5KFxuICAgIG51bGwsXG4gICAgbS5tYXAoXG4gICAgICByb3cgPT4gTWF0aC5taW4uYXBwbHkobnVsbCwgcm93KVxuICAgIClcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE1hdHJpeE1heChtKSB7XG4gIHJldHVybiBNYXRoLm1heC5hcHBseShcbiAgICBudWxsLFxuICAgIG0ubWFwKFxuICAgICAgcm93ID0+IE1hdGgubWF4LmFwcGx5KG51bGwsIHJvdylcbiAgICApXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNaW4oYXJyKSB7XG4gIHJldHVybiBNYXRoLm1pbi5hcHBseShudWxsLCBhcnIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWF4KGFycikge1xuICByZXR1cm4gTWF0aC5tYXguYXBwbHkobnVsbCwgYXJyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuXHR2YXIgdGltZW91dDtcblx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBjb250ZXh0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50cztcblx0XHR2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcblx0XHRcdHRpbWVvdXQgPSBudWxsO1xuXHRcdFx0aWYgKCFpbW1lZGlhdGUpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdFx0fTtcblx0XHR2YXIgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcblx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdFx0dGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuXHRcdGlmIChjYWxsTm93KSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHR9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGhyb3R0bGUoZnVuYywgbGltaXQpIHtcbiAgdmFyIHRpbWVyID0gbnVsbDtcbiAgdmFyIGNvbnRleHQgPSBudWxsO1xuICB2YXIgYXJncyA9IG51bGw7XG5cbiAgdmFyIGludm9rZSA9IGZ1bmN0aW9uKCkge1xuICAgIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgdGltZXIgPSBudWxsO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGNvbnRleHQgPSB0aGlzO1xuICAgIGFyZ3MgPSBhcmd1bWVudHM7XG5cbiAgICBpZiAoIXRpbWVyKSB7XG4gICAgICB0aW1lciA9IHNldFRpbWVvdXQoaW52b2tlLCBsaW1pdCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRHcmlkVmFsdWVzQnlNYXgobWF4KSB7IC8vIEZJWE1FINCe0YLQstGP0LfQsNGC0Ywg0L7RgiA2XG4gIGNvbnN0IGsgPSBnZXRTdGVwRm9yR3JpZFZhbHVlcyhtYXgpO1xuICByZXR1cm4gWzAsIDEsIDIsIDMsIDQsIDUsIDZdLm1hcChpID0+IGkqay81KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0ZXBGb3JHcmlkVmFsdWVzKG1heCwgaz0xKSB7IC8vIEZJWE1FINCe0YLQstGP0LfQsNGC0Ywg0L7RgiA2XG4gIGlmIChtYXggPT0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIHx8IG1heCA9PSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgfHwgbWF4ID09PSAwKSByZXR1cm4gMDtcblxuICBpZiAobWF4ID4gMTAwKSByZXR1cm4gZ2V0U3RlcEZvckdyaWRWYWx1ZXMobWF4LzEwLCBrKjEwKTtcbiAgaWYgKG1heCA8IDEpIHJldHVybiBnZXRTdGVwRm9yR3JpZFZhbHVlcyhtYXgqMTAsIGsvMTApO1xuXG4gIGlmIChtYXggJSA1ID09IDApIHJldHVybiBrKm1heC81O1xuICBjb25zdCBhID0gbWF4KjUvNjtcbiAgaWYgKGEgJSA1ID09IDApIHJldHVybiBrKmEvNTtcblxuICBjb25zdCBkcyA9IFs1LCA0LCAyLCAxXTtcbiAgcmV0dXJuIHMoYSwgbWF4LCBkcyk7XG5cbiAgZnVuY3Rpb24gcyhhLCBiLCBkcykge1xuICAgIGxldCBkID0gZHMuc2hpZnQoKTtcbiAgICBmb3IgKGxldCBpPU1hdGguZmxvb3IoYik7aT49TWF0aC5jZWlsKGEpO2ktLSkge1xuICAgICAgaWYgKGkgJSBkID09IDApIHJldHVybiBrKmkvNTtcbiAgICB9XG4gICAgcmV0dXJuIHMoYSwgYiwgZHMpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREYXRhQ29sdW1uQnlOYW1lKG5hbWUsIGRhdGEpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGRhdGFbaV1bMF0gPT09IG5hbWUpIHtcbiAgICAgIHJldHVybiBkYXRhW2ldLnNsaWNlKDEpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gW107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc3Bvc2UoYXJyKSB7XG4gIHJldHVybiBhcnJbMF0ubWFwKChjb2wsIGkpID0+IGFyci5tYXAocm93ID0+IHJvd1tpXSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcm91bmQobiwgYz0wKSB7XG4gIHJldHVybiBNYXRoLnJvdW5kKG4qTWF0aC5wb3coMTAsIGMpKS9NYXRoLnBvdygxMCwgYyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdW0oYXJyYXkpIHtcbiAgcmV0dXJuIGFycmF5LnJlZHVjZSgoYSwgYykgPT4gYSArIGMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGVyY2VudHModmFsdWVzKSB7XG4gIHJldHVybiB2YWx1ZXNbMF0ubWFwKChfLCBpKSA9PiB7XG4gICAgdmFyIHN1bSA9IHZhbHVlcy5tYXAoYyA9PiBjW2ldKS5yZWR1Y2UoKGEsIGMpID0+IGErYyk7XG4gICAgaWYgKHN1bSA9PT0gMCkgcmV0dXJuIHZhbHVlcy5tYXAoYyA9PiAwKTtcbiAgICByZXR1cm4gdmFsdWVzLm1hcChjID0+IHtcbiAgICAgIHJldHVybiBNYXRoLnJvdW5kKDEwMDAwKmNbaV0vc3VtKS8xMDA7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RhY2tlZFBlcmNlbnRzKHZhbHVlcykge1xuICByZXR1cm4gZ2V0UGVyY2VudHModmFsdWVzKS5tYXAoKHJvdywgaSkgPT4ge1xuICAgIHJldHVybiByb3cubWFwKChwLCBpKSA9PiB7XG4gICAgICByZXR1cm4gcm91bmQoc3VtKHJvdy5zbGljZSgwLCBpKzEpKSwgMilcbiAgICB9KVxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RhY2tlZEFycmF5U3Vtcyh2YWx1ZXMpIHtcbiAgcmV0dXJuIHRyYW5zcG9zZSh0cmFuc3Bvc2UodmFsdWVzKS5tYXAoKHJvdywgaSkgPT4ge1xuICAgIHJldHVybiByb3cubWFwKChwLCBpKSA9PiB7XG4gICAgICByZXR1cm4gcm91bmQoc3VtKHJvdy5zbGljZSgwLCBpKzEpKSwgMilcbiAgICB9KVxuICB9KSlcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=